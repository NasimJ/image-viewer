{"version":3,"sources":["types/ToolType.ts","reportWebVitals.ts","store/selectors/brightnessSelector.ts","types/SelectionMode.ts","types/ZoomMode.ts","store/selectors/categoriesSelector.ts","store/selectors/createdCategoriesSelector.ts","store/selectors/imageInstancesSelector.ts","store/selectors/imageSelector.ts","store/selectors/invertModeSelector.ts","store/selectors/toolTypeSelector.ts","store/selectors/selectedCategroySelector.ts","store/selectors/selectionModeSelector.ts","store/selectors/unknownCategroySelector.ts","store/selectors/zoomSettingsSelector.ts","components/ImageViewer/ImageViewerAppBar/ImageViewerAppBar/ImageViewerAppBar.css.ts","components/ImageViewer/ImageViewerAppBar/OpenImageButton/OpenImageButton/OpenImageButton.css.ts","images/colorImage.png","store/slices/slice.ts","components/ImageViewer/ImageViewerAppBar/OpenImageButton/ComputerMenuItem/ComputerMenuItem.tsx","images/malaria.png","components/ImageViewer/ImageViewerAppBar/OpenImageButton/ExampleImageDialog/ExampleImageDialog.tsx","components/ImageViewer/ImageViewerAppBar/OpenImageButton/ExampleMenuItem/ExampleMenuItem.tsx","components/ImageViewer/ImageViewerAppBar/OpenImageButton/OpenImageButton/OpenImageButton.tsx","components/ImageViewer/ImageViewerAppBar/ExportButton/ExportButton.css.ts","components/ImageViewer/ImageViewerAppBar/ExportButton/ExportButton.tsx","components/ImageViewer/ImageViewerAppBar/ImageViewerAppBar/ImageViewerAppBar.tsx","components/ImageViewer/Categories/Categories/Categories.css.ts","components/ImageViewer/Categories/CollapsibleList/CollapsibleList.tsx","components/ImageViewer/Categories/ColorIcon/ColorIcon.css.ts","components/ImageViewer/Categories/ColorIcon/ColorIcon.tsx","components/ImageViewer/Categories/CreateCategoryListItem/CreateCategoryDialog/CreateCategoryDialog.css.ts","components/ImageViewer/Categories/CreateCategoryListItem/CreateCategoryDialog/CreateCategoryDialog.tsx","hooks/useDialog/useDialog.ts","hooks/useMarchingAnts/useMarchingAnts.ts","image/Tool/Tool/Tool.ts","image/imageHelper.ts","image/simplify/simplify.ts","image/polygon-fill/util.ts","image/polygon-fill/slpf.ts","image/rle.ts","image/Tool/AnnotationTool/AnnotationTool/AnnotationTool.ts","image/Tool/AnnotationTool/ColorAnnotationTool/ColorAnnotationTool.ts","image/flood.ts","image/Tool/AnnotationTool/EllipticalAnnotationTool/EllipticalAnnotationTool.ts","image/Tool/AnnotationTool/LassoAnnotationTool/LassoAnnotationTool.ts","image/pathfinder/NodeHeap.ts","image/pathfinder/PathFinder.ts","image/GraphHelper.ts","image/Tool/AnnotationTool/MagneticAnnotationTool/MagneticAnnotationTool.ts","image/Tool/AnnotationTool/RectangularAnnotationTool/RectangularAnnotationTool.ts","image/Tool/AnnotationTool/ObjectAnnotationTool/ObjectAnnotationTool.ts","image/Tool/AnnotationTool/PenAnnotationTool/PenAnnotationTool.ts","image/Tool/AnnotationTool/PolygonalAnnotationTool/PolygonalAnnotationTool.ts","image/Tool/AnnotationTool/QuickAnnotationTool/QuickAnnotationTool.ts","image/slic.ts","components/ImageViewer/Categories/CreateCategoryListItem/CreateCategoryListItem/CreateCategoryListItem.tsx","components/ImageViewer/Categories/CategoryListItemCheckbox/CategoryListItemCheckbox.tsx","components/ImageViewer/Categories/CategoryMenu/HideOrShowCategoryMenuItem/HideOrShowCategoryMenuItem.tsx","components/ImageViewer/Categories/CategoryMenu/HideOtherCategoriesMenuItem/HideOtherCategoriesMenuItem.tsx","components/ImageViewer/Categories/CategoryMenu/CategoryMenu/CategoryMenu.tsx","components/ImageViewer/Categories/DeleteCategoryDialog/DeleteCategoryDialog.tsx","components/ImageViewer/Categories/EditCategoryDialog/EditCategoryDialog.css.ts","components/ImageViewer/Categories/EditCategoryDialog/EditCategoryDialog.tsx","components/ImageViewer/Categories/Categories/Categories.tsx","components/ImageViewer/OperationOptions/OperationOptions/OperationOptions.css.ts","components/ImageViewer/ImageViewer/theme.ts","components/ImageViewer/OperationOptions/OperationOptions/OperationOptions.tsx","components/icons/InvertSelection.svg","components/ImageViewer/OperationOptions/SelectionOptions/SelectionOptions.tsx","components/ImageViewer/Operations/Operation/Operation.tsx","components/ImageViewer/Operations/Operations/Operations.css.ts","components/icons/ColorAdjustment.svg","components/icons/ColorSelection.svg","components/icons/EllipticalSelection.svg","components/icons/Hand.svg","components/icons/LassoSelection.svg","components/icons/MagneticSelection.svg","components/icons/ObjectSelection.svg","components/icons/PenSelection.svg","components/icons/PolygonalSelection.svg","components/icons/QuickSelection.svg","components/icons/RectangularSelection.svg","components/icons/Zoom.svg","components/ImageViewer/Operations/Operations/Operations.tsx","components/ImageViewer/OperationOptions/ZoomOptions/ZoomOptions.tsx","components/ImageViewer/Content/Content/Content.css.ts","components/ImageViewer/Content/Stage/Selection/EllipticalSelection/EllipticalSelection.tsx","components/ImageViewer/Content/Stage/Selection/LassoSelection/LassoSelection.tsx","components/ImageViewer/Content/Stage/Selection/MagneticSelection/MagneticSelection.tsx","components/ImageViewer/Content/Stage/Selection/ObjectSelection/ObjectSelection.tsx","components/ImageViewer/Content/Stage/Selection/PolygonalSelection/PolygonalSelection.tsx","components/ImageViewer/Content/Stage/Selection/RectangularSelection/RectangularSelection.tsx","components/ImageViewer/Content/Stage/Selection/ColorSelection/ColorSelection.tsx","components/ImageViewer/Content/Stage/Selection/QuickSelection/QuickSelection.tsx","components/ImageViewer/Content/Stage/Selection/PenSelection/PenSelection.tsx","components/ImageViewer/Content/Stage/Selection/ZoomSelection/ZoomSelection.tsx","components/ImageViewer/Content/Stage/Selection/Selection/Selection.tsx","hooks/useKeyPress/useKeyPress.ts","store/selectors/penSelectionBrushSizeSelector.ts","components/ImageViewer/Content/Stage/SelectedContour/SelectedContour.tsx","image/Tool/ZoomTool/ZoomTool.ts","components/ImageViewer/Content/Stage/Image/Image.tsx","store/selectors/visibleCategoriesSelector.ts","store/reducer/reducer.ts","store/stores/store.ts","components/ImageViewer/Content/Stage/AnnotationShapes/AnnotationShape/AnnotationShape.tsx","components/ImageViewer/Content/Stage/AnnotationShapes/AnnotationShapes/AnnotationShapes.tsx","store/selectors/selectedAnnotationSelector.ts","components/ImageViewer/Content/Stage/Stage/Stage.tsx","hooks/useOperator/useAnnotationOperator.ts","hooks/useZoomOperator/useZoomOperator.ts","components/ImageViewer/Content/Content/Content.tsx","hooks/useBoundingClientRect/useBoundingClientRect.ts","components/ImageViewer/ImageViewer/ImageViewer.css.ts","components/ImageViewer/OperationOptions/PenSelectionOptions/PenSelectionOptions.tsx","components/ImageViewer/ImageViewer/ImageViewer.tsx","i18n.ts","translations/de.ts","translations/en.ts","translations/fi.ts","translations/hi.ts","translations/hu.ts","translations/se.ts","translations/gr.ts","index.tsx"],"names":["ToolType","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","SelectionMode","ZoomMode","categoriesSelector","state","categories","createdCategoriesSelector","filter","category","id","sortBy","imageInstancesSelector","image","instances","imageSelector","invertModeSelector","invertMode","toolTypeSelector","toolType","selectedCategroySelector","_","selectedCategory","selectionModeSelector","selectionMode","unknownCategroySelector","find","zoomSettingsSelector","zoomSettings","useStyles","makeStyles","theme","appBar","zIndex","drawer","root","display","content","flexGrow","backgroundColor","palette","background","default","padding","spacing","width","grow","settings","flexShrink","settingsPaper","right","toolbar","mixins","settingsToolbar","alignItems","justifyContent","operations","whiteSpace","operationsPaper","operationsToolbar","logo","applicationDrawer","applicationDrawerHeader","paddingLeft","applicationDrawerPaper","button","margin","textTransform","initialState","brightness","color","name","visible","contrast","exposure","hue","shape","c","channels","r","src","RectangularSelection","penSelectionBrushSize","saturation","New","vibrance","zoomAutomaticCentering","zoomMode","In","zoomReset","slice","createSlice","reducers","deleteCategory","action","payload","deleteImageInstance","instance","replaceImageInstance","setBrightness","setCategories","setCategoryVisibility","setContrast","setExposure","setHue","setImage","setImageInstances","setInvertMode","setOperation","operation","setPenSelectionBrushSize","setSaturation","setSeletedCategory","setSelectedAnnotation","selectedAnnotation","setSelectedAnnotationNode","selectedAnnotationNode","setSelectionMode","setVibrance","setZoomAutomaticCentering","setZoomMode","setZoomReset","actions","ComputerMenuItem","onClose","dispatch","useDispatch","MenuItem","component","dense","accept","hidden","onChange","event","persist","currentTarget","files","blob","reader","FileReader","onload","a","target","result","Image","naturalHeight","naturalWidth","readAsDataURL","type","ExampleImageDialog","open","examples","description","data","malaria","Dialog","List","role","map","example","index","ListItem","divider","onClick","ListItemText","primary","secondary","ExampleMenuItem","React","useState","setOpen","Fragment","ComputerMenuItemRef","forwardRef","ref","ExampleMenuItemRef","OpenImageMenu","anchorEl","Menu","keepMounted","Boolean","OpenImageButton","setAnchorEl","classes","Tooltip","title","Button","className","startIcon","ExportButton","useSelector","projectCategories","boundingBox","categoryId","mask","blobParts","JSON","stringify","Blob","saveAs","ImageViewerAppBar","AppBar","position","Toolbar","Typography","variant","Chip","label","CollapsibleList","children","collapsed","setCollapsed","ListItemIcon","Collapse","in","timeout","unmountOnExit","disablePadding","alert","transition","transitions","create","duration","leavingScreen","easing","sharp","appBarShift","marginLeft","enteringScreen","easeOut","card","classifierSettingsDialogContent","marginTop","chip","height","borderWidth","fontSize","colorPicker","container","paddingBottom","paddingTop","createCategoryDialogContent","createCategoryDialogGrid","createCategoryDialogItem","drawerHeader","drawerPaper","fileInput","gridList","transform","gridTileBar","gridTileBarIconButton","imageDialogAppBar","imageDialogContent","imageSelected","border","borderRadius","imageUnselected","main","mainShift","media","progress","settingsDialogAppBar","slider","sliderInput","COLORS","ColorIcon","onColorChange","colorMenuAnchorEl","setColorMenuAnchorEl","colorPopupOpen","onCloseColorPicker","IconButton","Avatar","style","Label","Popover","anchorOrigin","vertical","horizontal","transformOrigin","colors","console","info","CreateCategoryDialog","sample","setColor","setName","fullWidth","maxWidth","DialogTitle","DialogContent","Grid","item","xs","hex","TextField","autoFocus","value","DialogActions","v4","toString","useDialog","useCallback","onOpen","useMarchingAnts","dashOffset","setDashOffset","useEffect","timer","setTimeout","clearTimeout","Tool","this","connectPoints","coordinates","connectedPoints","length","current","next","forEach","points","drawLine","p","q","x","y","x1","y1","dx","dy","step","i","coords","Math","round","abs","setPixelXY","push","getIdx","nchannels","getSqDist","p1","p2","getSqSegDist","t","simplifyDPStep","first","last","sqTolerance","simplified","maxSqDist","sqDist","simplifyDouglasPeucker","simplify","tolerance","highestQuality","undefined","prevPoint","newPoints","point","len","simplifyRadialDist","lerp","yScan","x2","y2","floor","getYMin","getYMax","getXofYMin","getXofYMax","moveEdges","ET","AET","pop","removeEdges","getSpans","spans","edge","drawSpans","img","fillSpan","decode","encoded","decoded","j","Uint8ClampedArray","encode","lastElement","lastSequenceSize","AnnotationTool","manager","annotated","annotating","annotation","_boundingBox","_contour","_mask","getRoiManager","selectedMask","selectedMaskData","currentValue","mat","el","Array","from","contours","computeContours","Uint8Array","contour","counterClockWiseContours","updatedBoundingBox","pairs","isoLines","sort","b","maskImage","ImageJS","bitDepth","edges","pointsToEdges","e1","e2","cmp","slpf","getChannel","updatedContours","updatedMask","uuid","ColorAnnotationTool","roiContour","roiMask","offset","overlayData","initialPosition","toleranceMap","fromFlood","roi","alpha","fromWaterShed","fillMaxValue","tol","getPixelXY","red","green","blue","components","makeFloodMap","updateOverlay","diff","ceil","hypot","greyData","getRGBAData","chunk","bar","createFrom","getMatrix","largest","offsetX","offsetY","coord","computeBoundingBoxFromContours","getMasks","kind","colorOverlay","fillColor","parseInt","overlay","getBitXY","toDataURL","EllipticalAnnotationTool","center","origin","radius","resize","convertToPoints","computeMask","computeBoundingBox","centerX","centerY","foo","sqrt","LassoAnnotationTool","anchor","buffer","connected","threshold","distance","NodeHeap","fScore","node","heapIndex","setNodeId","_up","top","_down","pos","compare","parent","halfLength","left","best","NO_PATH","reconstructPath","graph","searchNode","factor","fromIdxToCoord","newCoord","fromId","parentId","parentNode","getNode","trace","oldDirection","pathDirection","newDirection","to","log","validNeighbours","xoffsets","yoffsets","output","xoffset","yoffset","idx","row","makeGraph","createGraph","openSet","startIdx","dist","addNode","pixels","pixel","addLink","createPathFinder","heuristic","fromNode","toNode","toId","cameFrom","dest","distanceToSource","closed","forEachLinkedNode","visitNeighbour","otherNode","Number","POSITIVE_INFINITY","tentativeDistance","updateItem","cachedAStarPathSearch","MagneticAnnotationTool","path","pathfinder","previous","response","source","destination","options","grey","sobelFilter","RectangularAnnotationTool","ObjectAnnotationTool","prediction","predict","crop","tensorflow","cropped","fromPixels","getCanvas","batch","resizeBilinear","div","expandDims","squeeze","tile","sub","sign","relu","pad","toPixels","clamped","optimizer","adam","compile","loss","metrics","PenAnnotationTool","brushSize","circlesData","outline","thresholdMask","canvas","document","createElement","ctx","getContext","beginPath","arc","PI","fill","rgbMask","fromCanvas","computeCircleData","operator","PolygonalAnnotationTool","QuickAnnotationTool","currentData","colorMasks","currentSuperpixel","superpixels","currentMask","masks","binaryMask","setBitXY","regionSize","minRegionSize","imWidth","imHeight","numRegionsX","String","numRegionsY","numRegions","numPixels","masses","currentCenters","Float32Array","newCenters","parameters","mcMap","msMap","distanceMap","xyz","gamma","pow","parseFloat","g","xw","yw","Yw","ix","iy","iz","lab","fx","fy","fz","gradient","k","d","v","u","centerx","centery","minEdgeValue","Infinity","max","min","yp","xp","thisEdgeValue","iterations","segmentation","Int32Array","iteration","i1","region","cx","cy","spatial","dR","dG","dB","appearance","mc","ms","iMass","error","segmentSize","cleanedLabel","numExpanded","neighbor","cleaned","segment","direction","count","slic","superpixel","colorData","addImages","computeObjectSelectionMask","unique","binaryData","binaryImage","colorSuperpixelMap","colorMask","CreateCategoryListItem","CategoryListItemCheckbox","Checkbox","checked","checkedIcon","disableRipple","icon","tabIndex","HideOrShowCategoryMenuItem","onCloseCategoryMenu","HideOtherCategoriesMenuItem","CategoryMenu","anchorElCategoryMenu","openCategoryMenu","onOpenDeleteCategoryDialog","onOpenEditCategoryDialog","getContentAnchorEl","MenuList","Divider","DeleteCategoryDialog","activeCategory","selections","EditCategoryDialog","onCloseDialog","openDialog","updatedCategories","Categories","onCategoryClick","unknownCategory","onCloseDeleteCategoryDialog","openDeleteCategoryDialog","onCloseEditCategoryDialog","openEditCategoryDialog","onCategoryMenuOpen","onCategoryMenuClose","Drawer","paper","selected","primaryTypographyProps","noWrap","ListItemSecondaryAction","onOpenCategoryMenu","createMuiTheme","overrides","MuiDrawer","paperAnchorDockedLeft","borderRight","paperAnchorDockedRight","borderLeft","MuiListItem","MuiSlider","rail","thumb","track","text","OperationOptions","handleCollapse","_extends","Object","assign","arguments","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","stroke","strokeLinecap","strokeLinejoin","strokeWidth","SvgInvertSelection","_ref","svgRef","titleId","props","viewBox","xmlns","ForwardRef","SelectionOptions","RadioGroup","aria-label","Radio","Add","Subtract","Intersect","SvgIcon","Operation","fillRule","SvgColorAdjustment","SvgColorSelection","SvgEllipticalSelection","SvgHand","SvgLassoSelection","SvgMagneticSelection","SvgObjectSelection","SvgPenSelection","SvgPolygonalSelection","SvgQuickSelection","SvgRectangularSelection","SvgZoom","Operations","activeOperation","useTranslation","i18n","OperationType","ColorAdjustment","EllipticalAnnotation","PenAnnotation","LassoAnnotation","PolygonalAnnotation","MagneticAnnotation","ColorAnnotation","QuickAnnotation","ObjectAnnotation","Zoom","Hand","ZoomOptions","handleRevert","defaultValue","FormControlLabel","control","Out","stage","cursor","EllipticalSelection","scale","ReactKonva","dash","radiusX","radiusY","LassoSelection","MagneticSelection","ObjectSelection","PolygonalSelection","ColorSelection","QuickSelection","PenSelection","ZoomSelection","minimum","maximum","zooming","Selection","useKeyPress","targetKey","keyPressed","setKeyPressed","downHandler","upHandler","window","addEventListener","removeEventListener","penSelectionBrushSizeSelector","SelectedContour","ZoomTool","mode","scales","evt","getStage","getPointerPosition","onWheel","newScale","deltaY","numeral","format","useImage","visibleCategoriesSelector","reducer","combineReducers","devTools","enhancers","Sentry","middleware","logger","preloadedState","store","configureStore","AnnotationShape","annotationTool","useRef","Konva","Line","onContextMenu","preventDefault","deselect","_id","opacity","AnnotationShapes","annotations","visibleCategories","visibleAnnotations","setVisibleAnnotations","includes","selectedAnnotationSelector","Stage","imageRef","stageRef","transformerRef","selectingRef","selectionInstanceRef","tool","setOperator","load","setup","quickSelectionOperator","useAnnotationOperator","annotationOperator","selectionId","setSelected","selecting","setSelecting","useReducer","update","enterPress","escapePress","deletePress","backspacePress","reset","zoomOperator","onZoomClick","onZoomWheel","useZoomOperator","selectedInstance","invertedMask","invert","invertedContour","invertContour","invertedBoundingBox","combinedMask","combinedContour","add","subtract","intersect","detach","others","updated","getAbsoluteTransform","copy","scaledContour","transformed","nodes","layer","getLayer","batchDraw","annotate","findOne","getRelativePointerPosition","onMouseMove","useMemo","throttled","relative","onMouseUp","querySelector","marginRight","Consumer","globalCompositeOperation","onMouseDown","Content","boundingClientRect","setBoundingClientRect","useLayoutEffect","getBoundingClientRect","useResizeObserver","entry","contentRect","useBoundingClientRect","PenSelectionOptions","penSelectionBrushSizeBrushSize","Slider","aria-labelledby","changed","ImageViewer","method","isCollapsed","ThemeProvider","CssBaseline","findIndex","resources","de","translation","en","Cancel","Description","Edit","Help","Logo","Model","Open","Save","Settings","Unknown","fi","hi","hu","se","gr","interpolation","escapeValue","keySeparator","lng","use","initReactI18next","init","dsn","integrations","Integrations","BrowserTracing","release","process","npm_package_version","tracesSampleRate","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0d566572.chunk.js","sourcesContent":["export enum ToolType {\n  ColorAdjustment,\n  ColorAnnotation,\n  EllipticalAnnotation,\n  Hand,\n  LassoAnnotation,\n  MagneticAnnotation,\n  ObjectAnnotation,\n  PenAnnotation,\n  PolygonalAnnotation,\n  QuickAnnotation,\n  RectangularSelection,\n  Zoom,\n}\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { State } from \"../../types/State\";\n\nexport const brightnessSelector = ({ state }: { state: State }) => {\n  return state.brightness;\n};\n","export enum SelectionMode {\n  Add,\n  Intersect,\n  New,\n  Subtract,\n}\n","export enum ZoomMode {\n  In,\n  Out,\n}\n","import { State } from \"../../types/State\";\n\nexport const categoriesSelector = ({ state }: { state: State }) => {\n  return state.categories;\n};\n","import { State } from \"../../types/State\";\nimport { Category } from \"../../types/Category\";\nimport { sortBy } from \"underscore\";\n\nexport const createdCategoriesSelector = ({ state }: { state: State }) => {\n  const categories = state.categories.filter((category: Category) => {\n    return category.id !== \"00000000-0000-0000-0000-000000000000\";\n  });\n\n  return sortBy(categories, \"name\");\n};\n","import { State } from \"../../types/State\";\n\nexport const imageInstancesSelector = ({ state }: { state: State }) => {\n  return state.image?.instances;\n};\n","import { State } from \"../../types/State\";\n\nexport const imageSelector = ({ state }: { state: State }) => {\n  return state.image;\n};\n","import { State } from \"../../types/State\";\n\nexport const invertModeSelector = ({ state }: { state: State }): boolean => {\n  return state.invertMode;\n};\n","import { State } from \"../../types/State\";\nimport { ToolType } from \"../../types/ToolType\";\n\nexport const toolTypeSelector = ({ state }: { state: State }): ToolType => {\n  return state.toolType;\n};\n","import { State } from \"../../types/State\";\nimport * as _ from \"lodash\";\nimport { Category } from \"../../types/Category\";\n\nexport const selectedCategroySelector = ({ state }: { state: State }) => {\n  return _.find(state.categories, (category: Category) => {\n    return category.id === state.selectedCategory;\n  })!;\n};\n","import { State } from \"../../types/State\";\nimport { SelectionMode } from \"../../types/SelectionMode\";\n\nexport const selectionModeSelector = ({\n  state,\n}: {\n  state: State;\n}): SelectionMode => {\n  return state.selectionMode;\n};\n","import { State } from \"../../types/State\";\nimport { Category } from \"../../types/Category\";\n\nexport const unknownCategroySelector = ({ state }: { state: State }) => {\n  return state.categories.find((category: Category) => {\n    return category.id === \"00000000-0000-0000-0000-000000000000\";\n  })!;\n};\n","import { State } from \"../../types/State\";\nimport { ZoomSettings } from \"../../types/ZoomSettings\";\n\nexport const zoomSettingsSelector = ({\n  state,\n}: {\n  state: State;\n}): ZoomSettings => {\n  return state.zoomSettings;\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst settingsWidth = 240;\nconst operationsWidth = 56;\n\nexport const useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  root: {\n    display: \"flex\",\n  },\n  content: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n    width: \"100%\",\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  settings: {\n    width: settingsWidth,\n    flexShrink: 0,\n  },\n  settingsPaper: {\n    width: settingsWidth,\n    right: operationsWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n  },\n  settingsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  operations: {\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n    width: operationsWidth,\n  },\n  operationsPaper: {\n    width: operationsWidth,\n  },\n  operationsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  logo: {\n    flexGrow: 1,\n  },\n  applicationDrawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  applicationDrawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  applicationDrawerPaper: {\n    zIndex: 0,\n    width: theme.spacing(32),\n  },\n}));\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n    textTransform: \"none\",\n  },\n}));\n","export default __webpack_public_path__ + \"static/media/colorImage.f118ef08.png\";","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Category } from \"../../types/Category\";\nimport { Image } from \"../../types/Image\";\nimport { ToolType } from \"../../types/ToolType\";\nimport { Selection } from \"../../types/Selection\";\nimport { SelectionMode } from \"../../types/SelectionMode\";\nimport { State } from \"../../types/State\";\nimport { ZoomMode } from \"../../types/ZoomMode\";\nimport * as _ from \"lodash\";\nimport colorImage from \"../../images/colorImage.png\";\n\nconst initialState: State = {\n  brightness: 0,\n  categories: [\n    {\n      color: \"#AAAAAA\",\n      id: \"00000000-0000-0000-0000-000000000000\",\n      name: \"Unknown\",\n      visible: true,\n    },\n  ],\n  contrast: 0,\n  exposure: 0,\n  hue: 0,\n  image: {\n    id: \"\",\n    instances: [],\n    name: \"foo.png\",\n    shape: { c: 512, channels: 3, r: 512 },\n    src: colorImage,\n  },\n  invertMode: false,\n  toolType: ToolType.RectangularSelection,\n  penSelectionBrushSize: 1,\n  saturation: 0,\n  selectedCategory: \"00000000-0000-0000-0000-000000000000\",\n  selectionMode: SelectionMode.New,\n  vibrance: 0,\n  zoomSettings: {\n    zoomAutomaticCentering: false,\n    zoomMode: ZoomMode.In,\n    zoomReset: false,\n  },\n};\n\nexport const slice = createSlice({\n  initialState: initialState,\n  name: \"image-viewer\",\n  reducers: {\n    deleteCategory(\n      state: State,\n      action: PayloadAction<{ category: Category }>\n    ) {\n      state.categories = state.categories.filter(\n        (category: Category) => category.id !== action.payload.category.id\n      );\n    },\n    deleteImageInstance(state: State, action: PayloadAction<{ id: string }>) {\n      if (!state.image) return;\n\n      state.image.instances = state.image.instances.filter(\n        (instance: Selection) => instance.id !== action.payload.id\n      );\n    },\n    replaceImageInstance(\n      state: State,\n      action: PayloadAction<{ id: string; instance: Selection }>\n    ) {\n      if (!state.image) return;\n\n      const instances = state.image.instances.filter(\n        (instance: Selection) => instance.id !== action.payload.id\n      );\n\n      state.image.instances = [...instances, action.payload.instance];\n    },\n    setBrightness(state: State, action: PayloadAction<{ brightness: number }>) {\n      state.brightness = action.payload.brightness;\n    },\n    setCategories(\n      state: State,\n      action: PayloadAction<{ categories: Array<Category> }>\n    ) {\n      state.categories = action.payload.categories;\n    },\n    setCategoryVisibility(\n      state: State,\n      action: PayloadAction<{ category: Category; visible: boolean }>\n    ) {\n      const category = _.find(state.categories, (category) => {\n        return category.id === action.payload.category.id;\n      });\n      if (!category) return;\n      category.visible = action.payload.visible;\n      state.categories = [\n        ...state.categories.filter((category) => {\n          return category.id !== action.payload.category.id;\n        }),\n        category,\n      ];\n    },\n    setContrast(state: State, action: PayloadAction<{ contrast: number }>) {\n      state.contrast = action.payload.contrast;\n    },\n    setExposure(state: State, action: PayloadAction<{ exposure: number }>) {\n      state.exposure = action.payload.exposure;\n    },\n    setHue(state: State, action: PayloadAction<{ hue: number }>) {\n      state.hue = action.payload.hue;\n    },\n    setImage(state: State, action: PayloadAction<{ image: Image }>) {\n      state.image = action.payload.image;\n    },\n    setImageInstances(\n      state: State,\n      action: PayloadAction<{ instances: Array<Selection> }>\n    ) {\n      if (!state.image) return;\n      state.image.instances = action.payload.instances;\n    },\n    setInvertMode(\n      state: State,\n      action: PayloadAction<{ invertMode: boolean }>\n    ) {\n      state.invertMode = action.payload.invertMode;\n    },\n    setOperation(state: State, action: PayloadAction<{ operation: ToolType }>) {\n      state.toolType = action.payload.operation;\n    },\n    setPenSelectionBrushSize(\n      state: State,\n      action: PayloadAction<{ penSelectionBrushSize: number }>\n    ) {\n      state.penSelectionBrushSize = action.payload.penSelectionBrushSize;\n    },\n    setSaturation(state: State, action: PayloadAction<{ saturation: number }>) {\n      state.saturation = action.payload.saturation;\n    },\n    setSeletedCategory(\n      state: State,\n      action: PayloadAction<{ selectedCategory: string }>\n    ) {\n      state.selectedCategory = action.payload.selectedCategory;\n    },\n    setSelectedAnnotation(\n      state: State,\n      action: PayloadAction<{ selectedAnnotation: string }>\n    ) {\n      state.selectedAnnotation = action.payload.selectedAnnotation;\n    },\n    setSelectedAnnotationNode(\n      state: State,\n      action: PayloadAction<{ selectedAnnotationNode: number }>\n    ) {\n      state.selectedAnnotationNode = action.payload.selectedAnnotationNode;\n    },\n    setSelectionMode(\n      state: State,\n      action: PayloadAction<{ selectionMode: SelectionMode }>\n    ) {\n      state.selectionMode = action.payload.selectionMode;\n    },\n    setVibrance(state: State, action: PayloadAction<{ vibrance: number }>) {\n      state.vibrance = action.payload.vibrance;\n    },\n    setZoomAutomaticCentering(\n      state: State,\n      action: PayloadAction<{ zoomAutomaticCentering: boolean }>\n    ) {\n      state.zoomSettings.zoomAutomaticCentering =\n        action.payload.zoomAutomaticCentering;\n    },\n    setZoomMode(state: State, action: PayloadAction<{ zoomMode: ZoomMode }>) {\n      state.zoomSettings.zoomMode = action.payload.zoomMode;\n    },\n    setZoomReset(state: State, action: PayloadAction<{ zoomReset: boolean }>) {\n      state.zoomSettings.zoomReset = action.payload.zoomReset;\n    },\n  },\n});\n\nexport const {\n  deleteCategory,\n  deleteImageInstance,\n  replaceImageInstance,\n  setBrightness,\n  setCategories,\n  setCategoryVisibility,\n  setContrast,\n  setExposure,\n  setHue,\n  setImage,\n  setImageInstances,\n  setInvertMode,\n  setOperation,\n  setPenSelectionBrushSize,\n  setSaturation,\n  setSelectedAnnotation,\n  setSelectedAnnotationNode,\n  setSelectionMode,\n  setSeletedCategory,\n  setVibrance,\n  setZoomMode,\n  setZoomReset,\n} = slice.actions;\n","import MenuItem from \"@material-ui/core/MenuItem\";\nimport React from \"react\";\nimport { Shape } from \"../../../../../types/Shape\";\nimport { setImage } from \"../../../../../store/slices\";\nimport { useDispatch } from \"react-redux\";\n\ntype ComputerMenuItemProps = {\n  onClose: () => void;\n};\n\nexport const ComputerMenuItem = ({ onClose }: ComputerMenuItemProps) => {\n  const dispatch = useDispatch();\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    onClose();\n\n    event.persist();\n\n    if (event.currentTarget.files) {\n      const blob = event.currentTarget.files[0];\n\n      const reader = new FileReader();\n\n      reader.onload = async (event: ProgressEvent<FileReader>) => {\n        if (event.target) {\n          const src = event.target.result;\n\n          const image = new Image();\n\n          image.onload = () => {\n            const name = blob.name;\n\n            const shape: Shape = {\n              r: image.naturalHeight,\n              c: image.naturalWidth,\n              channels: 4,\n            };\n\n            dispatch(\n              setImage({\n                image: {\n                  id: \"\",\n                  instances: [],\n                  name: name,\n                  shape: shape,\n                  src: src as string,\n                },\n              })\n            );\n          };\n\n          image.src = src as string;\n        }\n      };\n\n      reader.readAsDataURL(blob);\n    }\n  };\n\n  return (\n    <MenuItem component=\"label\" dense>\n      Computer\n      <input\n        accept=\"image/*\"\n        hidden\n        id=\"open-image\"\n        onChange={onChange}\n        type=\"file\"\n      />\n    </MenuItem>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/malaria.5b73ad75.png\";","import Dialog from \"@material-ui/core/Dialog\";\nimport React from \"react\";\nimport { Shape } from \"../../../../../types/Shape\";\nimport { setImage } from \"../../../../../store/slices\";\nimport { useDispatch } from \"react-redux\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport malaria from \"../../../../../images/malaria.png\";\n\ntype ExampleImageDialogProps = {\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const ExampleImageDialog = ({\n  onClose,\n  open,\n}: ExampleImageDialogProps) => {\n  const dispatch = useDispatch();\n\n  const examples = [\n    {\n      name: \"Microscopy\",\n      description:\n        \"Fusce lectus lorem, lacinia eu libero eu, pellentesque semper dui. Nunc bibendum est eget lacus fermentum ullamcorper.\",\n      data: malaria,\n    },\n    {\n      name: \"Microscopy (3D)\",\n      description:\n        \"Cras lobortis sapien eu tellus malesuada sodales. Vivamus placerat est eu mi ullamcorper, ut ultrices elit rhoncus. Aliquam vitae viverra nisi. Sed odio metus, finibus quis nisi a, vulputate varius justo.\",\n      data: malaria,\n    },\n  ];\n\n  const onClick = ({\n    data,\n    description,\n    name,\n  }: {\n    data: any;\n    description: string;\n    name: string;\n  }) => {\n    onClose();\n\n    const shape: Shape = {\n      r: 512,\n      c: 512,\n      channels: 4,\n    };\n\n    dispatch(\n      setImage({\n        image: {\n          id: \"\",\n          instances: [],\n          name: name,\n          shape: shape,\n          src: data as string,\n        },\n      })\n    );\n  };\n\n  return (\n    <Dialog open={open}>\n      <List component=\"div\" role=\"list\">\n        {examples.map((example, index) => {\n          return (\n            <ListItem\n              button\n              divider\n              key={index}\n              role=\"listitem\"\n              onClick={() => onClick(example)}\n            >\n              <ListItemText\n                primary={example.name}\n                secondary={example.description}\n              />\n            </ListItem>\n          );\n        })}\n      </List>\n    </Dialog>\n  );\n};\n","import MenuItem from \"@material-ui/core/MenuItem\";\nimport React from \"react\";\nimport { ExampleImageDialog } from \"../ExampleImageDialog\";\n\ntype ExampleMenuItemProps = {\n  onClose: () => void;\n};\n\nexport const ExampleMenuItem = ({ onClose }: ExampleMenuItemProps) => {\n  const [open, setOpen] = React.useState(false);\n\n  const onClick = () => {\n    onClose();\n\n    setOpen(true);\n  };\n\n  const onDialogClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <MenuItem dense onClick={onClick}>\n        Example\n      </MenuItem>\n\n      <ExampleImageDialog onClose={onDialogClose} open={open} />\n    </React.Fragment>\n  );\n};\n","import Button from \"@material-ui/core/Button\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\nimport Menu from \"@material-ui/core/Menu\";\nimport React from \"react\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { useStyles } from \"./OpenImageButton.css\";\nimport { ComputerMenuItem } from \"../ComputerMenuItem\";\nimport { ExampleMenuItem } from \"../ExampleMenuItem\";\n\ntype OpenImageMenuProps = {\n  anchorEl: null | HTMLElement;\n  onClose: () => void;\n};\n\ntype ComputerMenuItemProps = {\n  onClose: () => void;\n};\n\ntype ExampleMenuItemProps = {\n  onClose: () => void;\n};\n\nconst ComputerMenuItemRef = React.forwardRef<any, ComputerMenuItemProps>(\n  ({ onClose }, ref) => <ComputerMenuItem onClose={onClose} />\n);\n\nconst ExampleMenuItemRef = React.forwardRef<any, ExampleMenuItemProps>(\n  ({ onClose }, ref) => <ExampleMenuItem onClose={onClose} />\n);\n\nconst OpenImageMenu = ({ anchorEl, onClose }: OpenImageMenuProps) => {\n  return (\n    <Menu\n      anchorEl={anchorEl}\n      keepMounted\n      onClose={onClose}\n      open={Boolean(anchorEl)}\n    >\n      <ComputerMenuItemRef onClose={onClose} />\n\n      <ExampleMenuItemRef onClose={onClose} />\n    </Menu>\n  );\n};\n\nexport const OpenImageButton = () => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const classes = useStyles();\n\n  const onClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <React.Fragment>\n      <Tooltip title=\"Open image\">\n        <Button\n          className={classes.button}\n          startIcon={<CloudUploadIcon />}\n          onClick={onClick}\n        >\n          Open image\n        </Button>\n      </Tooltip>\n\n      <OpenImageMenu anchorEl={anchorEl} onClose={onClose} />\n    </React.Fragment>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n    textTransform: \"none\",\n  },\n}));\n","import Button from \"@material-ui/core/Button\";\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\nimport React from \"react\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport { useStyles } from \"./ExportButton.css\";\nimport { saveAs } from \"file-saver\";\nimport { useSelector } from \"react-redux\";\nimport { categoriesSelector, imageSelector } from \"../../../../store/selectors\";\nimport * as _ from \"lodash\";\n\nexport const ExportButton = () => {\n  const classes = useStyles();\n\n  const image = useSelector(imageSelector);\n  const projectCategories = useSelector(categoriesSelector);\n\n  const onClick = () => {\n    if (!image) return;\n\n    const content = {\n      src: image.src,\n      instances: image.instances.map((instance) => {\n        return {\n          boundingBox: instance.boundingBox,\n          category: _.find(projectCategories, (category) => {\n            return category.id === instance.categoryId;\n          })?.name,\n          mask: instance.mask,\n        };\n      }),\n    };\n\n    const blobParts = [JSON.stringify(content)];\n\n    const options = {\n      type: \"text/json;charset=utf-8\",\n    };\n\n    const blob = new Blob(blobParts, options);\n\n    saveAs(blob, \"foo.json\");\n  };\n\n  return (\n    <React.Fragment>\n      <Tooltip title=\"Export annotations\">\n        <Button\n          className={classes.button}\n          startIcon={<CloudUploadIcon />}\n          onClick={onClick}\n        >\n          Export\n        </Button>\n      </Tooltip>\n    </React.Fragment>\n  );\n};\n","import AppBar from \"@material-ui/core/AppBar\";\nimport React from \"react\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Chip } from \"@material-ui/core\";\nimport { useStyles } from \"./ImageViewerAppBar.css\";\nimport { OpenImageButton } from \"../OpenImageButton\";\nimport { ExportButton } from \"../ExportButton\";\n\nexport const ImageViewerAppBar = () => {\n  const classes = useStyles();\n\n  return (\n    <AppBar className={classes.appBar} color=\"inherit\" position=\"fixed\">\n      <Toolbar>\n        <Typography className={classes.logo} variant=\"h6\">\n          <strong>Piximi</strong> Image viewer <Chip label=\"Early access\" />\n        </Typography>\n\n        <div className={classes.grow} />\n\n        <OpenImageButton />\n\n        <ExportButton />\n      </Toolbar>\n    </AppBar>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst settingsWidth = 240;\nconst operationsWidth = 56;\n\nexport const useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  root: {\n    display: \"flex\",\n  },\n  content: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n    width: \"100%\",\n  },\n  settings: {\n    width: settingsWidth,\n    flexShrink: 0,\n  },\n  settingsPaper: {\n    width: settingsWidth,\n    right: operationsWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n  },\n  settingsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  operations: {\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n    width: operationsWidth,\n  },\n  operationsPaper: {\n    width: operationsWidth,\n  },\n  operationsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  logo: {\n    flexGrow: 1,\n  },\n  applicationDrawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  applicationDrawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  applicationDrawerPaper: {\n    zIndex: 0,\n    width: theme.spacing(32),\n  },\n}));\n","import React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Collapse from \"@material-ui/core/Collapse\";\n\ntype CollapsibleListProps = {\n  children: any;\n  primary: string;\n};\n\nexport const CollapsibleList = ({\n  children,\n  primary,\n}: CollapsibleListProps) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n\n  const onClick = () => {\n    setCollapsed(!collapsed);\n  };\n\n  return (\n    <List dense>\n      <ListItem button dense onClick={onClick}>\n        <ListItemIcon>\n          {collapsed ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ListItemIcon>\n\n        <ListItemText primary={primary} />\n      </ListItem>\n\n      <Collapse in={collapsed} timeout=\"auto\" unmountOnExit>\n        <List component=\"div\" dense disablePadding>\n          {children}\n        </List>\n      </Collapse>\n    </List>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  alert: {\n    width: theme.spacing(64),\n  },\n  appBar: {\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  appBarShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n    width: `calc(100% - ${theme.spacing(32)}px)`,\n  },\n  card: {},\n  classifierSettingsDialogContent: {\n    marginTop: theme.spacing(8),\n  },\n  chip: {\n    height: \"20px\",\n    borderWidth: \"2px\",\n    fontSize: \"0.875rem\",\n    color: \"white\",\n  },\n  colorPicker: {\n    margin: \"16px\",\n  },\n  container: {\n    paddingBottom: theme.spacing(8),\n    paddingTop: theme.spacing(8),\n  },\n  createCategoryDialogContent: {\n    paddingLeft: \"0 !important\",\n  },\n  createCategoryDialogGrid: {\n    margin: theme.spacing(1),\n  },\n  createCategoryDialogItem: {\n    // paddingLeft: \"0 !important\",\n  },\n  drawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  drawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  drawerPaper: {\n    width: theme.spacing(32),\n  },\n  fileInput: {\n    display: \"none\",\n  },\n  gridList: {\n    transform: \"translateZ(0)\",\n  },\n  gridTileBar: {\n    background:\n      \"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)\",\n  },\n  gridTileBarIconButton: {\n    color: \"white\",\n  },\n  imageDialogAppBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  imageDialogContent: {\n    paddingBottom: theme.spacing(12),\n    paddingTop: theme.spacing(12),\n  },\n  imageSelected: {\n    border: \"solid 2px blue\",\n    borderRadius: \"3px\",\n  },\n  imageUnselected: {\n    border: \"none\",\n  },\n  main: {\n    flexGrow: 1,\n    marginLeft: -theme.spacing(32),\n    padding: theme.spacing(3),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  mainShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n  },\n  media: {},\n  progress: {\n    width: \"100%\",\n  },\n  settingsDialogAppBar: {},\n  slider: {\n    padding: theme.spacing(3),\n  },\n  sliderInput: {\n    width: 42,\n  },\n}));\n","import { Label } from \"@material-ui/icons\";\nimport * as React from \"react\";\nimport { Avatar, IconButton } from \"@material-ui/core\";\nimport Popover from \"@material-ui/core/Popover\";\nimport { CirclePicker, ColorResult } from \"react-color\";\nimport { useStyles } from \"./ColorIcon.css\";\n\nconst COLORS = [\n  \"#f44336\",\n  \"#e91e63\",\n  \"#9c27b0\",\n  \"#673ab7\",\n  \"#3f51b5\",\n  \"#2196f3\",\n  \"#03a9f4\",\n  \"#00bcd4\",\n  \"#009688\",\n  \"#4caf50\",\n  \"#8bc34a\",\n  \"#cddc39\",\n  \"#ffeb3b\",\n  \"#ffc107\",\n  \"#ff9800\",\n  \"#ff5722\",\n  \"#795548\",\n  \"#607d8b\",\n];\n\ntype ColorIconButtonProps = {\n  color: string;\n  onColorChange: (color: any) => void;\n};\n\nexport const ColorIcon = ({ color, onColorChange }: ColorIconButtonProps) => {\n  const classes = useStyles();\n\n  const [\n    colorMenuAnchorEl,\n    setColorMenuAnchorEl,\n  ] = React.useState<null | HTMLButtonElement>(null);\n\n  const colorPopupOpen = Boolean(colorMenuAnchorEl);\n\n  const onOpenColorPicker = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setColorMenuAnchorEl(event.currentTarget);\n  };\n\n  const onCloseColorPicker = () => {\n    setColorMenuAnchorEl(null);\n  };\n\n  const onChange = (color: ColorResult) => {\n    console.info(color);\n    onColorChange(color);\n    onCloseColorPicker();\n  };\n\n  return (\n    <React.Fragment>\n      <IconButton onClick={onOpenColorPicker}>\n        <Avatar style={{ backgroundColor: \"#F3F3F3\" }}>\n          <Label style={{ color: color }} />\n        </Avatar>\n      </IconButton>\n      <Popover\n        id=\"color-menu\"\n        open={colorPopupOpen}\n        anchorEl={colorMenuAnchorEl}\n        onClose={onCloseColorPicker}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <div className={classes.colorPicker}>\n          <CirclePicker colors={COLORS} onChange={onChange} />\n        </div>\n      </Popover>\n    </React.Fragment>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  alert: {\n    width: theme.spacing(64),\n  },\n  appBar: {\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  appBarShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n    width: `calc(100% - ${theme.spacing(32)}px)`,\n  },\n  card: {},\n  classifierSettingsDialogContent: {\n    marginTop: theme.spacing(8),\n  },\n  chip: {\n    height: \"20px\",\n    borderWidth: \"2px\",\n    fontSize: \"0.875rem\",\n    color: \"white\",\n  },\n  colorPicker: {\n    margin: \"16px\",\n  },\n  container: {\n    paddingBottom: theme.spacing(8),\n    paddingTop: theme.spacing(8),\n  },\n  createCategoryDialogContent: {\n    paddingLeft: \"0 !important\",\n  },\n  createCategoryDialogGrid: {\n    margin: theme.spacing(1),\n  },\n  createCategoryDialogItem: {\n    // paddingLeft: \"0 !important\",\n  },\n  drawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  drawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  drawerPaper: {\n    width: theme.spacing(32),\n  },\n  fileInput: {\n    display: \"none\",\n  },\n  gridList: {\n    transform: \"translateZ(0)\",\n  },\n  gridTileBar: {\n    background:\n      \"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)\",\n  },\n  gridTileBarIconButton: {\n    color: \"white\",\n  },\n  imageDialogAppBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  imageDialogContent: {\n    paddingBottom: theme.spacing(12),\n    paddingTop: theme.spacing(12),\n  },\n  imageSelected: {\n    border: \"solid 2px blue\",\n    borderRadius: \"3px\",\n  },\n  imageUnselected: {\n    border: \"none\",\n  },\n  main: {\n    flexGrow: 1,\n    marginLeft: -theme.spacing(32),\n    padding: theme.spacing(3),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  mainShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n  },\n  media: {},\n  progress: {\n    width: \"100%\",\n  },\n  settingsDialogAppBar: {},\n  slider: {\n    padding: theme.spacing(3),\n  },\n  sliderInput: {\n    width: 42,\n  },\n}));\n","import Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ColorIcon } from \"../../ColorIcon\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useStyles } from \"./CreateCategoryDialog.css\";\nimport { ColorResult } from \"react-color\";\nimport { sample } from \"underscore\";\nimport { slice } from \"../../../../../store/slices\";\nimport { v4 } from \"uuid\";\nimport { Category } from \"../../../../../types/Category\";\nimport { categoriesSelector } from \"../../../../../store/selectors\";\n\nconst COLORS = [\n  \"#f44336\",\n  \"#e91e63\",\n  \"#9c27b0\",\n  \"#673ab7\",\n  \"#3f51b5\",\n  \"#2196f3\",\n  \"#03a9f4\",\n  \"#00bcd4\",\n  \"#009688\",\n  \"#4caf50\",\n  \"#8bc34a\",\n  \"#cddc39\",\n  \"#ffeb3b\",\n  \"#ffc107\",\n  \"#ff9800\",\n  \"#ff5722\",\n  \"#795548\",\n  \"#607d8b\",\n];\n\ntype CreateCategoryDialogProps = {\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const CreateCategoryDialog = ({\n  onClose,\n  open,\n}: CreateCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const categories = useSelector(categoriesSelector);\n\n  const [color, setColor] = React.useState<string>(sample(COLORS)!);\n\n  const [name, setName] = useState<string>(\"\");\n\n  const classes = useStyles();\n\n  const onCreate = () => {\n    const category: Category = {\n      color: color,\n      id: v4().toString(),\n      name: name ? name : \"Unnamed\",\n      visible: true,\n    };\n\n    dispatch(\n      slice.actions.setCategories({\n        categories: [...categories, category],\n      })\n    );\n\n    dispatch(\n      slice.actions.setSeletedCategory({\n        selectedCategory: category.id,\n      })\n    );\n\n    onClose();\n\n    setColor(sample(COLORS)!);\n  };\n\n  const onColorChange = (color: ColorResult) => {\n    setColor(color.hex);\n  };\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" onClose={onClose} open={open}>\n      <DialogTitle>Create category</DialogTitle>\n\n      <DialogContent className={classes.createCategoryDialogContent}>\n        <div className={classes.createCategoryDialogGrid}>\n          <Grid container spacing={1}>\n            <Grid item xs={2} className={classes.createCategoryDialogItem}>\n              <ColorIcon color={color} onColorChange={onColorChange} />\n            </Grid>\n            <Grid item xs={10}>\n              <TextField\n                autoFocus\n                fullWidth\n                id=\"name\"\n                label=\"Name\"\n                margin=\"dense\"\n                onChange={onNameChange}\n              />\n            </Grid>\n          </Grid>\n        </div>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onCreate} color=\"primary\">\n          Create\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { useCallback, useState } from \"react\";\n\nexport const useDialog = () => {\n  const [open, setOpen] = useState(false);\n\n  const onClose = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  const onOpen = useCallback(() => {\n    setOpen(true);\n  }, []);\n\n  return { onClose, onOpen, open };\n};\n","import React, { useState } from \"react\";\n\nexport const useMarchingAnts = () => {\n  const [dashOffset, setDashOffset] = useState<number>(0);\n\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setDashOffset(dashOffset + 1);\n\n      if (dashOffset > 32) {\n        setDashOffset(0);\n      }\n    }, 200);\n    return () => clearTimeout(timer);\n  });\n\n  return dashOffset;\n};\n","import * as ImageJS from \"image-js\";\n\nexport abstract class Tool {\n  image: ImageJS.Image;\n\n  constructor(image: ImageJS.Image) {\n    this.image = image;\n  }\n}\n","import * as _ from \"lodash\";\nimport * as ImageJS from \"image-js\";\n\n// export const connectPoints = (\n//   coordinates: Array<Array<number>>,\n//   image: ImageJS.Image\n// ) => {\n//   return _.filter(\n//     _.zip(coordinates.slice(0, coordinates.length - 1), coordinates.slice(1)),\n//     ([current, next]) => {\n//       return !_.isEqual(current, next);\n//     }\n//   ).map(([current, next], index) => {\n//     return _.flatten(drawLine(image, current!, next!));\n//   });\n// };\n\nexport const connectPoints = (\n  coordinates: Array<Array<number>>,\n  image: ImageJS.Image\n) => {\n  let connectedPoints: Array<Array<number>> = [];\n\n  const foo = _.filter(\n    _.zip(coordinates.slice(0, coordinates.length - 1), coordinates.slice(1)),\n    ([current, next]) => {\n      return !_.isEqual(current, next);\n    }\n  );\n  foo.forEach(([current, next]) => {\n    const points = drawLine(image, current!, next!);\n    connectedPoints = _.concat(connectedPoints, points);\n  });\n  return connectedPoints;\n};\n\nconst drawLine = (image: ImageJS.Image, p: Array<number>, q: Array<number>) => {\n  const coords: Array<Array<number>> = [];\n\n  let x: number,\n    y: number,\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    dx: number,\n    dy: number,\n    step: number,\n    i: number;\n\n  x1 = Math.round(p[0]);\n  y1 = Math.round(p[1]);\n  x2 = Math.round(q[0]);\n  y2 = Math.round(q[1]);\n\n  dx = x2 - x1;\n  dy = y2 - y1;\n\n  step = Math.abs(dy);\n\n  if (Math.abs(dx) >= Math.abs(dy)) {\n    step = Math.abs(dx);\n  }\n\n  dx = dx / step;\n  dy = dy / step;\n  x = x1;\n  y = y1;\n  i = 1;\n\n  while (i <= step) {\n    image.setPixelXY(Math.round(x), Math.round(y), [255, 255, 255, 255]);\n    coords.push([Math.round(x), Math.round(y)]);\n    x = x + dx;\n    y = y + dy;\n    i = i + 1;\n  }\n\n  return coords;\n};\n\nconst findFirstWhitePixel = (\n  data: Uint8ClampedArray,\n  height: number,\n  width: number,\n  nchannels: number\n) => {\n  const idx = getIdx(width, nchannels);\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const pixel = data[idx(x, y, 0)];\n      if (pixel === 255) {\n        return { x: x, y: y };\n      }\n    }\n  }\n  return;\n};\n\nexport const mooreNeighborhood = (\n  data: Uint8ClampedArray,\n  height: number,\n  width: number,\n  nchannels: number\n) => {\n  const boundaries: { x: number; y: number }[] = [];\n  const idx = getIdx(width, nchannels);\n\n  let currBoundary: { x: number; y: number };\n  let enteredFrom: { x: number; y: number };\n  let candidate: { x: number; y: number };\n  let pointer: number;\n\n  const clockwise = [\n    [-1, -1],\n    [-1, 0],\n    [-1, 1],\n    [0, 1],\n    [1, 1],\n    [1, 0],\n    [1, -1],\n    [0, -1],\n  ];\n\n  const firstPointCoord = findFirstWhitePixel(data, height, width, nchannels);\n\n  if (!firstPointCoord) return;\n\n  boundaries.push(firstPointCoord);\n\n  currBoundary = firstPointCoord;\n  enteredFrom = { x: firstPointCoord.x - 1, y: firstPointCoord.y };\n\n  pointer = clockwise.findIndex((tuple) => {\n    return (\n      tuple[0] === currBoundary.y - enteredFrom.y &&\n      tuple[1] === currBoundary.x - enteredFrom.x\n    );\n  });\n  //FIXME this should only consider the allowed neighbors (or you'll run into problems getting neighbors from sides and corners)\n  candidate = {\n    x: currBoundary.x + clockwise[pointer + 1][1],\n    y: currBoundary.y + clockwise[pointer + 1][0],\n  };\n\n  while (\n    candidate.x !== firstPointCoord.x ||\n    candidate.y !== firstPointCoord.y\n  ) {\n    if (data[idx(candidate.x, candidate.y, 0)] === 255) {\n      boundaries.push(candidate);\n      enteredFrom = currBoundary;\n      currBoundary = candidate;\n\n      pointer = clockwise.findIndex((tuple) => {\n        return (\n          tuple[0] === currBoundary.y - enteredFrom.y &&\n          tuple[1] === currBoundary.x - enteredFrom.x\n        );\n      });\n      //FIXME this should only consider the allowed neighbors (or you'll run into problems getting neighbors from sides and corners)\n\n      candidate = {\n        x: currBoundary.x + clockwise[pointer + 1][1],\n        y: currBoundary.y + clockwise[pointer + 1][0],\n      };\n    } else {\n      enteredFrom = candidate;\n      pointer = clockwise.findIndex((tuple) => {\n        return (\n          tuple[0] === currBoundary.y - enteredFrom.y &&\n          tuple[1] === currBoundary.x - enteredFrom.x\n        );\n      });\n      //FIXME this should only consider the allowed neighbors (or you'll run into problems getting neighbors from sides and corners)\n\n      candidate = {\n        x: currBoundary.x + clockwise[pointer + 1][1],\n        y: currBoundary.y + clockwise[pointer + 1][0],\n      };\n    }\n  }\n  return boundaries;\n};\n\nexport const getIdx = (width: number, nchannels: number) => {\n  return (x: number, y: number, index: number) => {\n    index = index || 0;\n    return (width * y + x) * nchannels + index;\n  };\n};\n","/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n// (function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1: Array<number>, p2: Array<number>) {\n  var dx = p1[0] - p2[0],\n    dy = p1[1] - p2[1];\n\n  return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p: Array<number>, p1: Array<number>, p2: Array<number>) {\n  var x = p1[0],\n    y = p1[1],\n    dx = p2[0] - x,\n    dy = p2[1] - y;\n\n  if (dx !== 0 || dy !== 0) {\n    var t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\n\n    if (t > 1) {\n      x = p2[0];\n      y = p2[1];\n    } else if (t > 0) {\n      x += dx * t;\n      y += dy * t;\n    }\n  }\n\n  dx = p[0] - x;\n  dy = p[1] - y;\n\n  return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points: Array<Array<number>>, sqTolerance: number) {\n  var prevPoint = points[0];\n  var newPoints = [prevPoint];\n  var point: Array<number> = [];\n\n  for (var i = 1, len = points.length; i < len; i++) {\n    point = points[i];\n\n    if (getSqDist(point, prevPoint) > sqTolerance) {\n      newPoints.push(point);\n      prevPoint = point;\n    }\n  }\n\n  if (prevPoint !== point) newPoints.push(point);\n\n  return newPoints;\n}\n\nfunction simplifyDPStep(\n  points: Array<Array<number>>,\n  first: number,\n  last: number,\n  sqTolerance: number,\n  simplified: Array<Array<number>>\n) {\n  let maxSqDist = sqTolerance;\n  let index: number = 0;\n\n  for (var i = first + 1; i < last; i++) {\n    var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n    if (sqDist > maxSqDist) {\n      index = i;\n      maxSqDist = sqDist;\n    }\n  }\n\n  if (maxSqDist > sqTolerance) {\n    if (index - first > 1)\n      simplifyDPStep(points, first, index, sqTolerance, simplified);\n    simplified.push(points[index]);\n    if (last - index > 1)\n      simplifyDPStep(points, index, last, sqTolerance, simplified);\n  }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(\n  points: Array<Array<number>>,\n  sqTolerance: number\n) {\n  var last = points.length - 1;\n\n  var simplified = [points[0]];\n  simplifyDPStep(points, 0, last, sqTolerance, simplified);\n  simplified.push(points[last]);\n\n  return simplified;\n}\n\n// both algorithms combined for awesome performance\nexport function simplify(\n  points: Array<Array<number>>,\n  tolerance: number,\n  highestQuality: boolean\n) {\n  if (points.length <= 2) return points;\n\n  var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n  points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n  points = simplifyDouglasPeucker(points, sqTolerance);\n\n  return points;\n}\n\n// // export as AMD module / Node module / browser or worker variable\n//     if (typeof define === 'function' && define.amd) define(function() { return simplify; });\n//     else if (typeof module !== 'undefined') {\n//         module.exports = simplify;\n//         module.exports.default = simplify;\n//     } else if (typeof self !== 'undefined') self.simplify = simplify;\n//     else window.simplify = simplify;\n\n// })();\n","// Code from: https://github.com/kamoroso94/polygon-fill-benchmark\n\n// linear interpolation\n// finds x-value from scanline intersecting edge\nexport function lerp(\n  yScan: number,\n  [[x1, y1], [x2, y2]]: Array<Array<number>>\n) {\n  return Math.floor(((yScan - y1) / (y2 - y1)) * (x2 - x1) + x1);\n}\n\n// returns minimum y-value of two points\nexport function getYMin([[, y1], [, y2]]: Array<Array<number>>) {\n  return y1 <= y2 ? y1 : y2;\n}\n\n// returns maximum y-value of two points\nexport function getYMax([[, y1], [, y2]]: Array<Array<number>>) {\n  return y1 > y2 ? y1 : y2;\n}\n\n// returns the x-value of the point with the minimum y-value\nexport function getXofYMin([[x1, y1], [x2, y2]]: Array<Array<number>>) {\n  return y1 <= y2 ? x1 : x2;\n}\n\n// returns the x-value of the point with the maximum y-value\nexport function getXofYMax([[x1, y1], [x2, y2]]: Array<Array<number>>) {\n  return y1 > y2 ? x1 : x2;\n}\n\n// converts list of points to list of non-horizontal edges\nexport function pointsToEdges(points: Array<Array<number>>) {\n  let edges = [];\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i];\n    // ignore horizontal edges\n    if (p1[1] != p2[1]) edges.push([p1, p2]);\n    p1 = p2;\n  }\n  return edges;\n}\n","// Code from: https://github.com/kamoroso94/polygon-fill-benchmark\n\nimport * as ImageJS from \"image-js\";\n\nimport {\n  getXofYMax,\n  getXofYMin,\n  getYMax,\n  getYMin,\n  lerp,\n  pointsToEdges,\n} from \"./util\";\n\n// Scnaline Polygon Fill\nexport function slpf(points: Array<Array<number>>, img: ImageJS.Image) {\n  if (points.length < 3) return;\n\n  // initialize ET and AET\n  const ET: Array<Array<Array<number>>> = pointsToEdges(points).sort(\n    (e1: Array<Array<number>>, e2: Array<Array<number>>) =>\n      getYMin(e2) - getYMin(e1)\n  );\n  const AET: Array<Array<Array<number>>> = [];\n  let yScan = getYMin(ET[ET.length - 1]);\n\n  // repeat until both ET and AET are empty\n  while (ET.length > 0 || AET.length > 0) {\n    // manage AET\n    moveEdges(yScan, ET, AET);\n    removeEdges(yScan, AET);\n    AET.sort((e1, e2) => {\n      const cmp = getXofYMin(e1) - getXofYMin(e2);\n      return cmp == 0 ? getXofYMax(e1) - getXofYMax(e2) : cmp;\n    });\n    // fill spans on scanline\n    const spans = getSpans(yScan, AET);\n    drawSpans(spans, yScan, img);\n    yScan++;\n  }\n}\n\n// move active edges from ET to AET\nfunction moveEdges(\n  yScan: number,\n  ET: Array<Array<Array<number>>>,\n  AET: Array<Array<Array<number>>>\n) {\n  while (ET.length > 0 && yScan === getYMin(ET[ET.length - 1])) {\n    AET.push(ET.pop()!);\n  }\n}\n\n// remove inactive edges from AET\nfunction removeEdges(yScan: number, AET: Array<Array<Array<number>>>) {\n  for (let i = 0; i < AET.length; i++) {\n    if (yScan >= getYMax(AET[i])) {\n      const last = AET.pop();\n      if (i < AET.length && last) {\n        AET[i] = last;\n        i--;\n      }\n    }\n  }\n}\n\n// find spans along scanline\nfunction getSpans(yScan: number, AET: Array<Array<Array<number>>>) {\n  const spans = [];\n  for (const edge of AET) {\n    spans.push(lerp(yScan, edge));\n  }\n  return spans;\n}\n\nfunction drawSpans(spans: Array<number>, yScan: number, img: ImageJS.Image) {\n  for (let i = 0; i < spans.length; i += 2) {\n    fillSpan(spans[i], spans[i + 1], yScan, img);\n  }\n}\n\n// fill pixels within a span\nfunction fillSpan(x1: number, x2: number, y: number, img: ImageJS.Image) {\n  for (let x = x1; x < x2; x++) {\n    img.setPixelXY(x, y, [255, 255, 255, 255]);\n  }\n}\n","/*\n * Run-length encoding\n */\n\nexport const decode = (encoded: Array<number>): Uint8ClampedArray => {\n  let decoded = [];\n\n  let background = true;\n\n  for (let i = 0; i < encoded.length; i++) {\n    for (let j = 0; j < encoded[i]; j++) {\n      decoded.push(background ? 0 : 255);\n    }\n\n    background = !background;\n  }\n\n  return new Uint8ClampedArray(decoded);\n};\n\nexport const encode = (\n  decoded: Uint8Array | Uint8ClampedArray\n): Array<number> => {\n  let lastElement = decoded[0];\n\n  let lastSequenceSize = 1;\n\n  let encoded = [];\n\n  if (decoded[0] === 255) {\n    encoded.push(0);\n  }\n\n  for (let i = 1; i < decoded.length; i++) {\n    if (lastElement !== decoded[i]) {\n      encoded.push(lastSequenceSize);\n\n      lastElement = decoded[i];\n\n      lastSequenceSize = 1;\n    } else {\n      lastSequenceSize += 1;\n    }\n  }\n\n  encoded.push(lastSequenceSize);\n\n  return encoded;\n};\n\nexport const fromString = (s: Array<number>) => {\n  let counts = [];\n  let m = 0;\n  let p = 0;\n  let k;\n  let x;\n  let more;\n\n  while (s[p]) {\n    x = 0;\n    k = 0;\n    more = 1;\n\n    while (more) {\n      let c = s[p] - 48;\n      x = x | ((c & 0x1f) << (5 * k));\n      more = c & 0x20;\n      p += 1;\n      k += 1;\n\n      if (!more && c & 0x10) {\n        x = x | (-1 << (5 * k));\n      }\n    }\n\n    if (m > 2) {\n      x += counts[m - 2];\n    }\n\n    counts[m++] = x;\n  }\n\n  return counts;\n};\n\nexport const toImageData = (\n  decoded: Uint8ClampedArray,\n  width: number,\n  height: number\n) => {\n  let data = [];\n\n  for (let i = 0; i < decoded.length; i++) {\n    data.push(...[decoded[i], decoded[i], decoded[i], 255]);\n  }\n\n  const clamped = new Uint8ClampedArray(data);\n\n  return new ImageData(clamped, width, height);\n};\n","import { Selection } from \"../../../../types/Selection\";\nimport * as ImageJS from \"image-js\";\nimport { Category } from \"../../../../types/Category\";\nimport * as _ from \"lodash\";\nimport { connectPoints } from \"../../../imageHelper\";\nimport { simplify } from \"../../../simplify/simplify\";\nimport { slpf } from \"../../../polygon-fill/slpf\";\nimport * as uuid from \"uuid\";\nimport { decode, encode } from \"../../../rle\";\nimport { isoLines } from \"marchingsquares\";\nimport { Tool } from \"../../Tool\";\n\nexport abstract class AnnotationTool extends Tool {\n  manager: ImageJS.RoiManager;\n  points?: Array<number> = [];\n  annotated: boolean = false;\n  annotating: boolean = false;\n  annotation?: Selection;\n\n  protected _boundingBox?: [number, number, number, number];\n  protected _contour?: Array<number>;\n  protected _mask?: Array<number>;\n\n  constructor(image: ImageJS.Image) {\n    super(image);\n\n    this.manager = image.getRoiManager();\n  }\n\n  /*\n   * Adding to a Operator adds any new areas you select to your existing\n   * Operator.\n   */\n  add(selectedMask: Array<number>): [Array<number>, Array<number>] {\n    if (!this._mask) return [[], []];\n\n    const selectedMaskData = decode(selectedMask);\n    const maskData = decode(this._mask);\n\n    const data = maskData.map((currentValue: number, index: number) => {\n      if (currentValue === 255 || selectedMaskData[index] === 255) {\n        return 255;\n      } else return 0;\n    });\n\n    const mat = _.chunk(data, this.image.width).map((el: Array<number>) => {\n      return Array.from(el);\n    });\n\n    const contours = this.computeContours(mat);\n\n    return [encode(data), _.flatten(contours)];\n  }\n\n  /*\n   * When using the Intersect Operator mode, any currently selected areas you\n   * select over will be kept and any currently selected areas outside your\n   * new Operator will be removed from the Operator.\n   */\n  intersect(selectedMask: Array<number>): [Array<number>, Array<number>] {\n    if (!this._mask) return [[], []];\n\n    const selectedMaskData = decode(selectedMask);\n    const maskData = decode(this._mask);\n\n    const data = maskData.map((currentValue: number, index: number) => {\n      if (currentValue === 255 && selectedMaskData[index] === 255) {\n        return 255;\n      } else return 0;\n    });\n\n    const mat = _.chunk(data, this.image.width).map((el: Array<number>) => {\n      return Array.from(el);\n    });\n    const contours = this.computeContours(mat);\n\n    return [encode(data), _.flatten(contours)];\n  }\n\n  invert(mask: Array<number>, encoded = false): Array<number> {\n    if (encoded) {\n      mask = Array.from(decode(mask));\n    }\n\n    mask.forEach((currentValue: number, index: number) => {\n      if (currentValue === 255) {\n        mask[index] = 0;\n      } else mask[index] = 255;\n    });\n\n    if (encoded) {\n      mask = encode(Uint8Array.from(mask));\n    }\n    return mask;\n  }\n\n  invertContour(contour: Array<number>): Array<number> {\n    //using https://jsbin.com/tevejujafi/3/edit?html,js,output and https://en.wikipedia.org/wiki/Nonzero-rule\n    const frame = [0, 0, 512, 0, 512, 512, 0, 512, 0, 0];\n    const counterClockWiseContours = _.flatten(_.reverse(_.chunk(contour, 2)));\n    return _.concat(frame, counterClockWiseContours);\n  }\n\n  /*\n   * Subtracting from a Operator deselects the areas you draw over, keeping\n   * the rest of your existing Operator.\n   */\n  subtract(selectedMask: Array<number>): [Array<number>, Array<number>] {\n    if (!this._mask) return [[], []];\n\n    const selectedMaskData = decode(selectedMask);\n    const maskData = decode(this._mask);\n\n    const data = maskData.map((currentValue: number, index: number) => {\n      if (currentValue === 255 && selectedMaskData[index] === 255) {\n        return 0;\n      } else return selectedMaskData[index];\n    });\n\n    const mat = _.chunk(data, this.image.width).map((el: Array<number>) => {\n      return Array.from(el);\n    });\n    const contours = this.computeContours(mat);\n\n    return [encode(data), _.flatten(contours)];\n  }\n\n  get boundingBox(): [number, number, number, number] | undefined {\n    return this._boundingBox;\n    // if (!this._contour) return undefined;\n    //\n    // return this.computeBoundingBoxFromContours(this._contour);\n  }\n\n  set boundingBox(\n    updatedBoundingBox: [number, number, number, number] | undefined\n  ) {\n    this._boundingBox = updatedBoundingBox;\n  }\n\n  computeBoundingBoxFromContours(\n    contour: Array<number>\n  ): [number, number, number, number] {\n    const pairs = _.chunk(contour, 2);\n\n    return [\n      Math.round(_.min(_.map(pairs, _.first))!),\n      Math.round(_.min(_.map(pairs, _.last))!),\n      Math.round(_.max(_.map(pairs, _.first))!),\n      Math.round(_.max(_.map(pairs, _.last))!),\n    ];\n  }\n\n  computeContours(data: Array<Array<number>>) {\n    return isoLines(data, 1).sort((a: Array<number>, b: Array<number>) => {\n      return b.length - a.length;\n    })[0];\n  }\n\n  computeMask() {\n    const maskImage = new ImageJS.Image({\n      width: this.image.width,\n      height: this.image.height,\n      bitDepth: 8,\n    });\n\n    const coords = _.chunk(this.points, 2);\n\n    const connectedPoints = connectPoints(coords, maskImage); // get coordinates of connected points and draw boundaries of mask\n    simplify(connectedPoints, 1, true);\n    slpf(connectedPoints, maskImage);\n\n    //@ts-ignore\n    return encode(maskImage.getChannel(0).data);\n  }\n\n  get contour(): Array<number> | undefined {\n    return this._contour;\n  }\n\n  set contour(updatedContours: Array<number> | undefined) {\n    this._contour = updatedContours;\n  }\n\n  get mask(): Array<number> | undefined {\n    return this._mask;\n  }\n\n  set mask(updatedMask: Array<number> | undefined) {\n    this._mask = updatedMask;\n  }\n\n  abstract deselect(): void;\n\n  abstract onMouseDown(position: { x: number; y: number }): void;\n\n  abstract onMouseMove(position: { x: number; y: number }): void;\n\n  abstract onMouseUp(position: { x: number; y: number }): void;\n\n  annotate(category: Category): void {\n    if (!this.boundingBox || !this.contour || !this.mask) return;\n\n    this.annotation = {\n      boundingBox: this.boundingBox,\n      categoryId: category.id,\n      contour: this.contour,\n      id: uuid.v4(),\n      mask: this.mask,\n    };\n  }\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport { makeFloodMap } from \"../../../flood\";\nimport * as ImageJS from \"image-js\";\nimport * as _ from \"lodash\";\nimport { encode } from \"../../../rle\";\n\nexport class ColorAnnotationTool extends AnnotationTool {\n  roiContour?: ImageJS.Image;\n  roiMask?: ImageJS.Image;\n  offset?: { x: number; y: number };\n  overlayData: string = \"\";\n  points: Array<number> = [];\n  initialPosition: { x: number; y: number } = { x: 0, y: 0 };\n  tolerance: number = 1;\n  toleranceMap?: ImageJS.Image;\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.overlayData = \"\";\n\n    this.roiMask = undefined;\n    this.roiContour = undefined;\n\n    this.points = [];\n\n    this.initialPosition = { x: 0, y: 0 };\n\n    this.tolerance = 1;\n    this.toleranceMap = undefined;\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    this.annotated = false;\n    this.annotating = true;\n    this.tolerance = 1;\n    this.initialPosition = position;\n    this.toleranceMap = makeFloodMap({\n      x: Math.floor(position.x),\n      y: Math.floor(position.y),\n      image: this.image!,\n    });\n    this.updateOverlay(position);\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotating) {\n      const diff = Math.ceil(\n        Math.hypot(\n          position.x - this.initialPosition!.x,\n          position.y - this.initialPosition!.y\n        )\n      );\n      if (diff !== this.tolerance) {\n        this.tolerance = diff;\n        this.updateOverlay(this.initialPosition);\n      }\n    }\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (!this.roiContour || !this.roiMask) return;\n\n    const greyData = _.chunk(this.roiContour.getRGBAData(), 4).map((chunk) => {\n      if (chunk[0] === 255) {\n        return 255;\n      } else return 0;\n    });\n    // @ts-ignore\n    const foo = ImageJS.Image.createFrom(this.roiMask, {\n      bitDepth: 8,\n      data: greyData,\n    });\n    // @ts-ignore\n    const maskData = foo.getMatrix().data;\n\n    const bar = maskData.map((el: Array<number>) => {\n      return Array.from(el);\n    });\n\n    const largest: Array<Array<number>> = this.computeContours(bar);\n\n    if (!largest) return;\n\n    // @ts-ignore\n    const offsetX = this.roiMask.position[0];\n    // @ts-ignore\n    const offsetY = this.roiMask.position[1];\n\n    this.points = _.flatten(\n      largest.map((coord) => {\n        return [Math.round(coord[0] + offsetX), Math.round(coord[1] + offsetY)];\n      })\n    );\n\n    this._contour = this.points;\n    this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n    // @ts-ignore\n    this._mask = encode(this.roiMask.data as Uint8Array);\n\n    this.annotated = true;\n    this.annotating = false;\n  }\n\n  private static colorOverlay(\n    mask: ImageJS.Image,\n    position: { x: number; y: number },\n    color: string\n  ) {\n    const r = parseInt(color.slice(1, 3), 16);\n    const g = parseInt(color.slice(3, 5), 16);\n    const b = parseInt(color.slice(5, 7), 16);\n    const fillColor = [r, g, b, 150];\n\n    let overlay = new ImageJS.Image(\n      mask.width,\n      mask.height,\n      new Uint8Array(mask.width * mask.height * 4),\n      { alpha: 1 }\n    );\n\n    // roiPaint doesn't respect alpha, so we'll paint it ourselves.\n    for (let x = 0; x < mask.width; x++) {\n      for (let y = 0; y < mask.height; y++) {\n        if (mask.getBitXY(x, y)) {\n          overlay.setPixelXY(x, y, fillColor);\n        }\n      }\n    }\n\n    // Set the origin point to white, for visibility.\n    overlay.setPixelXY(position.x, position.y, [255, 255, 255, 255]);\n\n    return overlay.toDataURL();\n  }\n\n  private fromFlood = ({\n    x,\n    y,\n    image,\n    tolerance,\n  }: {\n    x: number;\n    y: number;\n    image: ImageJS.Image;\n    tolerance: number;\n  }) => {\n    let overlay = new ImageJS.Image(\n      image.width,\n      image.height,\n      new Uint8ClampedArray(image.width * image.height * 4),\n      { alpha: 1 }\n    );\n    let roi = overlay.getRoiManager();\n\n    // Use the watershed function with a single seed to determine the selected region.\n    // @ts-ignore\n    roi.fromWaterShed({\n      image: image,\n      fillMaxValue: tolerance,\n      points: [[x, y]],\n    });\n    return roi;\n  };\n\n  private updateOverlay(position: { x: number; y: number }) {\n    const roi = this.fromFlood({\n      x: Math.floor(position.x),\n      y: Math.floor(position.y),\n      image: this.toleranceMap!,\n      tolerance: this.tolerance,\n    });\n\n    // @ts-ignore\n    this.roiMask = roi.getMasks()[0];\n    // @ts-ignore\n    this.roiContour = roi.getMasks({ kind: \"contour\" })[0];\n\n    if (!this.roiMask) return;\n\n    // @ts-ignore\n    this.offset = { x: this.roiMask.position[0], y: this.roiMask.position[1] };\n\n    this.overlayData = ColorAnnotationTool.colorOverlay(\n      this.roiMask,\n      position,\n      \"red\"\n    );\n  }\n}\n","import * as ImageJS from \"image-js\";\n\nclass Position {\n  x: number;\n  y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  add(that: Position) {\n    this.x += that.x;\n    this.y += that.y;\n\n    return this;\n  }\n\n  clone() {\n    return new Position(this.x, this.y);\n  }\n\n  in(maximum: Position) {\n    return this.x >= 0 && this.x <= maximum.x && this.y >= 0 && maximum.y;\n  }\n\n  overwrite(that: Position) {\n    this.x = that.x;\n    this.y = that.y;\n\n    return this;\n  }\n\n  subtract(that: Position) {\n    this.x -= that.x;\n    this.y -= that.y;\n\n    return this;\n  }\n}\n\nexport interface FloodImage extends ImageJS.Image {\n  overlay: ImageJS.Image;\n  toleranceMap: ImageJS.Image;\n  target: Position;\n  overlayTolerance: number;\n}\n\n// Generate a tolerance map and associate it with the image itself\nexport const makeFloodMap = ({\n  x,\n  y,\n  image,\n}: {\n  x: number;\n  y: number;\n  image: ImageJS.Image;\n}) => {\n  // if (!image) {\n  //   console.log(\"Error - No image\");\n  //   return;\n  // }\n  // image.target = new Position(x, y);\n  // image.overlayTolerance = -1;\n  // image.overlay = new ImageJS.Image(\n  //   image.width,\n  //   image.height,\n  //   new Uint8ClampedArray(image.width * image.height * 4),\n  //   { alpha: 1 }\n  // );\n\n  const tol: Array<number> = [];\n\n  const color = image.getPixelXY(x, y);\n\n  for (let i = 0; i < image.data.length; i += image.channels) {\n    const red = Math.abs(image.data[i] - color[0]);\n    const green = Math.abs(image.data[i + 1] - color[1]);\n    const blue = Math.abs(image.data[i + 2] - color[2]);\n    tol.push(Math.floor((red + green + blue) / 3));\n  }\n\n  return new ImageJS.Image(image.width, image.height, tol, {\n    alpha: 0,\n    components: 1,\n  });\n};\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport * as _ from \"lodash\";\n\nexport class EllipticalAnnotationTool extends AnnotationTool {\n  center?: { x: number; y: number };\n  origin?: { x: number; y: number };\n  radius?: { x: number; y: number };\n\n  computeBoundingBox(): [number, number, number, number] | undefined {\n    if (!this.center || !this.origin || !this.radius) return undefined;\n\n    return [\n      Math.round(this.origin.x),\n      Math.round(this.origin.y),\n      Math.round(this.center.x + this.radius.x),\n      Math.round(this.center.y + this.radius.y),\n    ];\n  }\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.center = undefined;\n    this.origin = undefined;\n    this.radius = undefined;\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (!this.radius) {\n      this.origin = position;\n\n      this.annotating = true;\n    } else {\n      this.resize(position);\n\n      this.annotated = true;\n\n      this.annotating = false;\n\n      this.points = this.convertToPoints();\n\n      this._contour = this.points;\n\n      this._mask = this.computeMask();\n\n      this._boundingBox = this.computeBoundingBox();\n    }\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    this.resize(position);\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (this.radius) {\n      this.resize(position);\n\n      this.annotated = true;\n\n      this.annotating = false;\n\n      this.points = this.convertToPoints();\n\n      this._contour = this.points;\n\n      this._mask = this.computeMask();\n\n      this._boundingBox = this.computeBoundingBox();\n    }\n  }\n\n  private convertToPoints() {\n    if (!this.radius || !this.origin || !this.center) return;\n\n    const centerX = Math.round(this.center.x);\n    const centerY = Math.round(this.center.y);\n\n    const points: Array<number> = [];\n    const foo: Array<Array<number>> = [];\n    //first quadrant points\n    for (let y = centerY; y < centerY + this.radius.y; y += 0.5) {\n      const x =\n        this.radius.x *\n          Math.sqrt(\n            1 -\n              ((y - centerY) * (y - centerY)) / (this.radius.y * this.radius.y)\n          ) +\n        centerX;\n      points.push(Math.round(x));\n      points.push(Math.round(y));\n      foo.push([Math.round(x), Math.round(y)]);\n    }\n    // const reversedFoo = _.reverse(foo);\n    //second quadrant points\n    _.forEachRight(foo, (position: Array<number>) => {\n      let x = 2 * centerX - position[0];\n      points.push(x);\n      points.push(position[1]);\n    });\n    //third quadrant points\n    _.forEach(foo, (position: Array<number>) => {\n      let x = 2 * centerX - position[0];\n      let y = 2 * centerY - position[1];\n      points.push(x);\n      points.push(y);\n    });\n    //fourth quadant points\n    _.forEachRight(foo, (position: Array<number>) => {\n      let y = 2 * centerY - position[1];\n      points.push(position[0]);\n      points.push(y);\n    });\n\n    return points;\n  }\n\n  private resize(position: { x: number; y: number }) {\n    if (this.origin) {\n      this.center = {\n        x: (position.x - this.origin.x) / 2 + this.origin.x,\n        y: (position.y - this.origin.y) / 2 + this.origin.y,\n      };\n\n      this.radius = {\n        x: Math.abs((position.x - this.origin.x) / 2),\n        y: Math.abs((position.y - this.origin.y) / 2),\n      };\n    }\n  }\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport * as _ from \"lodash\";\n\nexport class LassoAnnotationTool extends AnnotationTool {\n  anchor?: { x: number; y: number };\n  buffer: Array<number> = [];\n  origin?: { x: number; y: number };\n  points: Array<number> = [];\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.annotation = undefined;\n\n    this.anchor = undefined;\n    this.buffer = [];\n    this.origin = undefined;\n    this.points = [];\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (this.connected(position)) {\n      if (this.origin) {\n        this.buffer = [...this.buffer, this.origin.x, this.origin.y];\n      }\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n      this.anchor = undefined;\n      this.origin = undefined;\n    }\n\n    if (this.buffer && this.buffer.length === 0) {\n      this.annotating = true;\n\n      if (!this.origin) {\n        this.origin = position;\n      }\n    }\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (this.anchor) {\n      if (\n        this.buffer[this.buffer.length - 2] !== this.anchor.x ||\n        this.buffer[this.buffer.length - 1] !== this.anchor.y\n      ) {\n        this.buffer.pop();\n        this.buffer.pop();\n      }\n\n      this.buffer = [...this.buffer, position.x, position.y];\n\n      return;\n    }\n\n    if (this.origin) {\n      this.buffer = [...this.buffer, position.x, position.y];\n    }\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (\n      this.connected(position) &&\n      this.origin &&\n      this.buffer &&\n      this.buffer.length > 0\n    ) {\n      this.buffer = [\n        ...this.buffer,\n        position.x,\n        position.y,\n        this.origin.x,\n        this.origin.y,\n      ];\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n      this._contour = this.points;\n\n      this._mask = this.computeMask();\n\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n      this.buffer = [];\n    }\n\n    if (this.anchor) {\n      this.buffer.pop();\n      this.buffer.pop();\n\n      this.buffer = [...this.buffer, position.x, position.y];\n\n      this.anchor = position;\n\n      return;\n    }\n\n    if (this.origin && this.buffer && this.buffer.length > 0) {\n      this.anchor = position;\n      return;\n    }\n  }\n\n  private connected(\n    position: { x: number; y: number },\n    threshold: number = 4\n  ): boolean | undefined {\n    if (!this.origin) return undefined;\n\n    const distance = Math.hypot(\n      position.x - this.origin.x,\n      position.y - this.origin.y\n    );\n\n    return distance < threshold;\n  }\n}\n","/**\n * Based on https://github.com/mourner/tinyqueue\n * Copyright (c) 2017, Vladimir Agafonkin https://github.com/mourner/tinyqueue/blob/master/LICENSE\n *\n * Adapted for PathFinding needs by @anvaka\n * Copyright (c) 2017, Andrei Kashcha\n *\n * Further adapted for Piximi\n */\nimport { PiximiNode } from \"../GraphHelper\";\n\nexport class NodeHeap {\n  public data: Array<any> = [];\n\n  public length: number = 0;\n\n  compare(a: PiximiNode, b: PiximiNode) {\n    return a.fScore - b.fScore;\n  }\n\n  setNodeId(node: PiximiNode, heapIndex: number) {\n    node.heapIndex = heapIndex;\n  }\n\n  push(item: any) {\n    this.data.push(item);\n    this.setNodeId(item, this.length);\n    this.length++;\n    this._up(this.length - 1);\n  }\n\n  pop() {\n    if (this.length === 0) return undefined;\n\n    const top = this.data[0];\n    this.length--;\n\n    if (this.length > 0) {\n      this.data[0] = this.data[this.length];\n      this.setNodeId(this.data[0], 0);\n      this._down(0);\n    }\n    this.data.pop();\n\n    return top;\n  }\n\n  updateItem(pos: number) {\n    this._down(pos);\n    this._up(pos);\n  }\n\n  _up(pos: number) {\n    const data = this.data;\n    const compare = this.compare;\n    const setNodeId = this.setNodeId;\n    const item = data[pos];\n\n    while (pos > 0) {\n      const parent = (pos - 1) >> 1;\n      const current = data[parent];\n      if (compare(item, current) >= 0) break;\n      data[pos] = current;\n\n      setNodeId(current, pos);\n      pos = parent;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  }\n\n  _down(pos: number) {\n    const data = this.data;\n    const compare = this.compare;\n    const halfLength = this.length >> 1;\n    const item = data[pos];\n    const setNodeId = this.setNodeId;\n\n    while (pos < halfLength) {\n      let left = (pos << 1) + 1;\n      const right = left + 1;\n      let best = data[left];\n\n      if (right < this.length && compare(data[right], best) < 0) {\n        left = right;\n        best = data[right];\n      }\n      if (compare(best, item) >= 0) break;\n\n      data[pos] = best;\n      setNodeId(best, pos);\n      pos = left;\n    }\n\n    data[pos] = item;\n    setNodeId(item, pos);\n  }\n}\n","import { NodeHeap } from \"./NodeHeap\";\nimport { fromIdxToCoord, PiximiGraph, PiximiNode } from \"../GraphHelper\";\nimport { Node } from \"ngraph.graph\";\n\n/**\n * Performs a uni-directional A Star search on graph.\n *\n * We will try to minimize f(n) = g(n) + h(n), where\n * g(n) is actual distance from source node to `n`, and\n * h(n) is heuristic distance from `n` to target node.\n */\n\nconst NO_PATH: never[] = [];\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n *\n * @param graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {width} width of the original image\n * @param {factor} factor for scaling between image and graph\n *\n * @returns {Object} A pathfinder with single method `find()`.\n */\nexport function cachedAStarPathSearch(\n  graph: PiximiGraph,\n  width: number,\n  factor: number\n) {\n  // whether traversal should be considered over oriented graph.\n  const oriented = true;\n\n  const heuristic = (fromNode: PiximiNode, toNode: PiximiNode) => {\n    const [x1, y1] = fromIdxToCoord(fromNode.id as number, width);\n    const [x2, y2] = fromIdxToCoord(toNode.id as number, width);\n    if (x1 === x2 || y1 === y2) {\n      return 1;\n    }\n    return 1.41;\n  };\n\n  const distance = (fromNode: Node, toNode: Node) => {\n    return toNode.data;\n  };\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find,\n  };\n\n  function find(fromId: number, toId: number) {\n    const from = graph.getNode(fromId) as PiximiNode;\n    if (!from) return NO_PATH;\n    const to = graph.getNode(toId) as PiximiNode;\n    if (!to) return NO_PATH;\n\n    let cameFrom: any;\n    // Maps nodeId to NodeSearchState.\n\n    const dest = graph.getNode(toId) as PiximiNode;\n    if (dest) {\n      if (dest.fromId === fromId && dest.trace.length > 0) {\n        return dest.trace;\n      }\n    }\n\n    if (graph.fromId !== fromId || graph.openSet.length === 0) {\n      graph.openSet = new NodeHeap();\n      // For the first node, fScore is completely heuristic.\n      from.fScore = heuristic(from, to);\n\n      // The cost of going from start to start is zero.\n      from.distanceToSource = 0;\n      graph.openSet.push(from);\n      from.open = 1;\n      graph.fromId = fromId;\n    }\n\n    while (graph.openSet.length > 0) {\n      cameFrom = graph.openSet.pop();\n\n      if (cameFrom.id === toId) {\n        cameFrom.trace = reconstructPath(graph, cameFrom, width, factor);\n        cameFrom.fromId = fromId;\n        return cameFrom.trace;\n      }\n\n      // no need to visit this node anymore\n      cameFrom.trace = reconstructPath(graph, cameFrom, width, factor);\n      cameFrom.fromId = fromId;\n      cameFrom.closed = true;\n      graph.forEachLinkedNode(cameFrom.id, visitNeighbour, oriented);\n    }\n\n    // If we got here, then there is no path.\n    return NO_PATH;\n\n    function visitNeighbour(otherNode: any) {\n      if (otherNode.fromId !== graph.fromId) {\n        // This is old data, reset all params\n        otherNode.fromId = graph.fromId;\n        otherNode.trace = [];\n        otherNode.parentId = null;\n        otherNode.closed = false;\n        otherNode.open = 0;\n        otherNode.distanceToSource = Number.POSITIVE_INFINITY;\n        otherNode.fScore = Number.POSITIVE_INFINITY;\n        otherNode.heapIndex = -1;\n      }\n\n      if (otherNode.closed) {\n        // Already processed this node.\n        return;\n      }\n      if (otherNode.open === 0) {\n        // Remember this node.\n        graph.openSet.push(otherNode);\n        otherNode.open = 1;\n      }\n\n      const tentativeDistance =\n        cameFrom.distanceToSource + distance(otherNode, cameFrom);\n      if (tentativeDistance >= otherNode.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // bingo! we found shorter path:\n      otherNode.parentId = cameFrom.id;\n      otherNode.distanceToSource = tentativeDistance;\n      otherNode.fScore = tentativeDistance + heuristic(otherNode, to);\n\n      graph.openSet.updateItem(otherNode.heapIndex);\n    }\n  }\n}\n\nfunction reconstructPath(\n  graph: PiximiGraph,\n  searchNode: PiximiNode | null,\n  width: number,\n  factor: number = 1\n) {\n  if (!searchNode) return;\n\n  const [x, y] = fromIdxToCoord(searchNode.id as number, width);\n  const newCoord = [x / factor, y / factor];\n  let coords = [];\n  const fromId = graph.fromId;\n  if (searchNode!.parentId !== null) {\n    const parentNode = graph.getNode(searchNode!.parentId) as PiximiNode;\n    if (typeof parentNode !== \"undefined\" && parentNode.fromId === fromId) {\n      // Fetch a trace from the last coordinate\n      coords.push(...parentNode.trace);\n      if (coords.length > 1) {\n        const oldDirection = pathDirection(\n          coords[coords.length - 2],\n          coords[coords.length - 1]\n        );\n        const newDirection = pathDirection(coords[coords.length - 1], newCoord);\n        if (oldDirection === newDirection) {\n          coords.pop();\n        }\n      }\n    }\n  }\n  coords.push(newCoord);\n  return coords;\n}\n\nexport const pathDirection = (from: Array<number>, to: Array<number>) => {\n  // Generate a number representing the relative direction of the coordinates.\n  // Assuming TopLeft of an image is 0,0\n  const dx = to[0] - from[0];\n  const dy = to[1] - from[1];\n  if (dx === 0) {\n    if (dy < 0) {\n      return 0; // Up\n    }\n    if (dy > 0) {\n      return 4; // Down\n    }\n  }\n  if (dy === 0) {\n    if (dx > 0) {\n      return 2; // Right\n    }\n    if (dx < 0) {\n      return 6; // Left\n    }\n  }\n  if (dx > 0) {\n    if (dy < 0) {\n      return 1; // Up+Right\n    }\n    if (dy > 0) {\n      return 3; // Down+Right\n    }\n  }\n  if (dx < 0) {\n    if (dy < 0) {\n      return 7; // Up+Left\n    }\n    if (dy > 0) {\n      return 5; // Down+Left\n    }\n  }\n  console.log(\n    \"Invalid direction, this should never appear so check the code\",\n    dx,\n    dy\n  );\n};\n","import createGraph, { Graph, Node } from \"ngraph.graph\";\nimport { getIdx } from \"./imageHelper\";\nimport { DataArray } from \"image-js\";\n\nimport { cachedAStarPathSearch } from \"./pathfinder/PathFinder\";\nimport { NodeHeap } from \"./pathfinder/NodeHeap\";\n\nexport interface PiximiGraph extends Graph {\n  fromId: number;\n  openSet: NodeHeap;\n}\n\nexport interface PiximiNode extends Node {\n  fromId: number;\n  trace: Array<Array<number>>;\n\n  parentId: number | null;\n  closed: boolean;\n  open: number;\n  distanceToSource: number;\n  fScore: number;\n  heapIndex: number;\n}\n\nexport const validNeighbours = (\n  x: number,\n  y: number,\n  height: number,\n  width: number\n) => {\n  const xoffsets = [0];\n  const yoffsets = [0];\n  const output: { x: number; y: number }[] = [];\n  //David will know what to write here\n  if (x > 0) {\n    xoffsets.push(-1);\n  }\n  if (x < width - 1) {\n    xoffsets.push(1);\n  }\n  if (y > 0) {\n    yoffsets.push(-1);\n  }\n  if (y < height - 1) {\n    yoffsets.push(1);\n  }\n  for (let xoffset of xoffsets) {\n    for (let yoffset of yoffsets) {\n      if (!(xoffset === 0 && yoffset === 0)) {\n        output.push({ x: x + xoffset, y: y + yoffset });\n      }\n    }\n  }\n  return output;\n};\n\nexport const fromIdxToCoord = (idx: number, width: number) => {\n  const row = Math.floor(idx / width);\n  const col = idx - row * width;\n  return [col, row];\n};\n\nexport const makeGraph = (\n  edges: Uint8ClampedArray | DataArray,\n  height: number,\n  width: number\n) => {\n  let graph: any = createGraph();\n  graph.fromId = -1;\n  graph.openSet = new NodeHeap();\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const startIdx = getIdx(width, 1)(x, y, 0);\n      // TODO : Go back to inferring max from actual image data\n      // const cap = Math.max.apply(Math, edges.data);\n      const cap = 255;\n      const dist = cap - edges[startIdx];\n\n      graph.addNode(startIdx, dist);\n\n      const pixels = validNeighbours(x, y, height, width);\n\n      for (let pixel of pixels) {\n        const idx = getIdx(width, 1)(pixel.x, pixel.y, 0);\n        graph.addLink(startIdx, idx);\n      }\n    }\n  }\n  return graph as PiximiGraph;\n};\n\nexport const createPathFinder = (\n  graph: PiximiGraph,\n  width: number,\n  factor: number\n) => {\n  return cachedAStarPathSearch(graph, width, factor);\n};\n\nexport const convertPathToCoords = (\n  foundPath: any,\n  width: number,\n  factor: number = 1\n) => {\n  const pathCoords = [];\n  for (let node of foundPath) {\n    const id = node.id as number;\n    const [x, y] = fromIdxToCoord(id, width);\n    pathCoords.push([x / factor, y / factor]);\n  }\n  return pathCoords;\n};\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport { createPathFinder, makeGraph, PiximiGraph } from \"../../../GraphHelper\";\nimport { getIdx } from \"../../../imageHelper\";\nimport * as ImageJS from \"image-js\";\nimport * as _ from \"lodash\";\n\nexport class MagneticAnnotationTool extends AnnotationTool {\n  anchor?: { x: number; y: number };\n  buffer: Array<number> = [];\n  factor: number;\n  graph?: PiximiGraph;\n  origin?: { x: number; y: number };\n  path: Array<number> = [];\n  pathfinder?: { find: (fromId: number, toId: number) => any };\n  points: Array<number> = [];\n  previous: Array<number> = [];\n  response?: ImageJS.Image;\n\n  constructor(image: ImageJS.Image, factor: number = 0.5) {\n    super(image);\n\n    this.factor = factor;\n\n    this.filter();\n\n    if (!this.image || !this.response) return;\n\n    this.graph = makeGraph(\n      this.response.data,\n      this.response.height,\n      this.response.width\n    );\n\n    this.pathfinder = createPathFinder(\n      this.graph,\n      this.image.width * factor,\n      factor\n    );\n  }\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.annotation = undefined;\n\n    this.anchor = undefined;\n    this.buffer = [];\n    this.graph = undefined;\n    this.origin = undefined;\n    this.points = [];\n    this.previous = [];\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (this.connected(position)) {\n      if (this.origin) {\n        this.buffer = [...this.buffer, this.origin.x, this.origin.y];\n      }\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n    }\n\n    if (this.buffer && this.buffer.length === 0) {\n      this.annotating = true;\n\n      if (!this.origin) {\n        this.origin = position;\n      }\n    }\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (!this.image || !this.pathfinder || this.annotated || !this.annotating)\n      return;\n\n    if (this.anchor) {\n      const source = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(this.anchor.x * this.factor),\n        Math.floor(this.anchor.y * this.factor),\n        0\n      );\n\n      const destination = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(position.x * this.factor),\n        Math.floor(position.y * this.factor),\n        0\n      );\n\n      this.path = _.flatten(this.pathfinder.find(source, destination));\n\n      if (\n        this.buffer[this.buffer.length - 2] !== this.anchor.x ||\n        this.buffer[this.buffer.length - 1] !== this.anchor.y\n      ) {\n        this.buffer.pop();\n        this.buffer.pop();\n      }\n\n      this.buffer = [\n        ...this.previous,\n        this.anchor.x,\n        this.anchor.y,\n        ...this.path,\n      ];\n\n      return;\n    }\n\n    if (this.origin) {\n      const source = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(this.origin.x * this.factor),\n        Math.floor(this.origin.y * this.factor),\n        0\n      );\n\n      const destination = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(position.x * this.factor),\n        Math.floor(position.y * this.factor),\n        0\n      );\n\n      this.path = _.flatten(this.pathfinder.find(source, destination));\n\n      this.buffer.pop();\n      this.buffer.pop();\n\n      this.buffer = [this.origin.x, this.origin.y, ...this.path];\n    }\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (\n      this.connected(position) &&\n      this.origin &&\n      this.buffer &&\n      this.buffer.length > 0\n    ) {\n      this.buffer = [\n        ...this.buffer,\n        position.x,\n        position.y,\n        this.origin.x,\n        this.origin.y,\n      ];\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n      this.buffer = [];\n\n      return;\n    }\n\n    if (this.anchor && this.image) {\n      const source = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(this.anchor.x * this.factor),\n        Math.floor(this.anchor.y * this.factor),\n        0\n      );\n\n      const destination = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(position.x * this.factor),\n        Math.floor(position.y * this.factor),\n        0\n      );\n\n      if (!this.pathfinder) return;\n\n      this.path = _.flatten(this.pathfinder.find(source, destination));\n\n      this.buffer.pop();\n      this.buffer.pop();\n\n      this.buffer = [...this.previous, ...this.path];\n\n      this.previous = [...this.previous, ...this.path];\n\n      this.anchor = position;\n\n      return;\n    }\n\n    if (this.origin && this.buffer.length > 0) {\n      if (!this.image || !this.origin || !this.pathfinder) return;\n\n      this.anchor = position;\n\n      const source = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(this.origin.x * this.factor),\n        Math.floor(this.origin.y * this.factor),\n        0\n      );\n\n      const destination = getIdx(this.image.width * this.factor, 1)(\n        Math.floor(position.x * this.factor),\n        Math.floor(position.y * this.factor),\n        0\n      );\n\n      this.path = _.flatten(this.pathfinder.find(source, destination));\n\n      this.buffer = [this.origin.x, this.origin.y, ...this.path];\n\n      this.previous = [\n        ...this.previous,\n        this.origin.x,\n        this.origin.y,\n        ...this.path,\n      ];\n\n      return;\n    }\n  }\n\n  private connected(\n    position: { x: number; y: number },\n    threshold: number = 4\n  ): boolean | undefined {\n    if (!this.origin) return undefined;\n\n    const distance = Math.hypot(\n      position.x - this.origin.x,\n      position.y - this.origin.y\n    );\n\n    return distance < threshold;\n  }\n\n  private filter() {\n    if (!this.image) return;\n\n    const options = { factor: this.factor };\n\n    this.response = this.image.resize(options).grey().sobelFilter();\n  }\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\n\nexport class RectangularAnnotationTool extends AnnotationTool {\n  origin?: { x: number; y: number };\n\n  width?: number;\n  height?: number;\n\n  computeBoundingBox(): [number, number, number, number] | undefined {\n    if (!this.origin || !this.width || !this.height) return undefined;\n\n    return [\n      Math.round(this.origin.x),\n      Math.round(this.origin.y),\n      Math.round(this.origin.x + this.width),\n      Math.round(this.origin.y + this.height),\n    ];\n  }\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.origin = undefined;\n\n    this.width = undefined;\n    this.height = undefined;\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (!this.width) {\n      this.origin = position;\n\n      this.annotating = true;\n    } else {\n      this.resize(position);\n\n      this.points = this.convertToPoints();\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBox();\n\n      this.annotated = true;\n      this.annotating = false;\n    }\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    this.resize(position);\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (this.width) {\n      this.resize(position);\n      this.points = this.convertToPoints();\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBox();\n\n      this.annotated = true;\n      this.annotating = false;\n    }\n  }\n\n  private convertToPoints() {\n    if (!this.width || !this.height || !this.origin) return;\n\n    const points: Array<number> = [];\n\n    const origin = { x: this.origin.x, y: this.origin.y };\n    let width = this.width;\n    let height = this.height;\n\n    //negative height and width may happen if the rectangle was drawn from right to left\n    if (this.width < 0) {\n      width = Math.abs(this.width);\n      origin.x = this.origin.x - width;\n    }\n    if (this.height < 0) {\n      height = Math.abs(this.height);\n      origin.y = this.origin.y - height;\n    }\n\n    // four edges of the rectangle\n    for (let x = 0; x < width; x++) {\n      points.push(Math.round(x + origin.x));\n      points.push(Math.round(origin.y));\n    }\n    for (let y = 0; y < height; y++) {\n      points.push(Math.round(origin.x + width - 1));\n      points.push(Math.round(y + origin.y));\n    }\n    for (let x = width - 1; x >= 0; x--) {\n      points.push(Math.round(x + origin.x));\n      points.push(Math.round(origin.y + height - 1));\n    }\n    for (let y = height - 1; y >= 0; y--) {\n      points.push(Math.round(origin.x));\n      points.push(Math.round(y + origin.y));\n    }\n\n    return points;\n  }\n\n  private resize(position: { x: number; y: number }) {\n    if (this.origin) {\n      this.width = position.x - this.origin.x;\n      this.height = position.y - this.origin.y;\n    }\n  }\n}\n","import { RectangularAnnotationTool } from \"../RectangularAnnotationTool\";\nimport * as ImageJS from \"image-js\";\nimport * as tensorflow from \"@tensorflow/tfjs\";\nimport * as _ from \"lodash\";\nimport { encode } from \"../../../rle\";\n\nexport class ObjectAnnotationTool extends RectangularAnnotationTool {\n  graph?: tensorflow.LayersModel;\n  prediction?: ImageJS.Image;\n  points: Array<number> = [];\n  // @ts-ignore\n  roi?: ImageJS.Roi;\n  offset?: { x: number; y: number };\n  output?: ImageJS.Image;\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.prediction = undefined;\n    this.points = [];\n    this.roi = undefined;\n    this.offset = undefined;\n    this.output = undefined;\n\n    this.origin = undefined;\n    this.width = undefined;\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    super.onMouseUp(position);\n\n    this.predict();\n  }\n\n  static async compile(image: ImageJS.Image) {\n    const instance = new ObjectAnnotationTool(image);\n\n    const pathname =\n      \"https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json\";\n\n    instance.graph = await tensorflow.loadLayersModel(pathname);\n\n    const optimizer = tensorflow.train.adam();\n\n    instance.graph.compile({\n      optimizer: optimizer,\n      loss: \"categoricalCrossentropy\",\n      metrics: [\"accuracy\"],\n    });\n\n    return instance;\n  }\n\n  private async predict() {\n    if (!this.image || !this.origin || !this.width || !this.height) return;\n\n    const width = Math.floor(this.width);\n    const height = Math.floor(this.height);\n\n    const crop = this.image.crop({\n      x: this.origin.x,\n      y: this.origin.y,\n      width: width,\n      height: height,\n    });\n\n    const prediction = tensorflow.tidy(() => {\n      if (crop) {\n        const cropped: tensorflow.Tensor3D = tensorflow.browser.fromPixels(\n          crop.getCanvas()\n        );\n\n        const size: [number, number] = [128, 128];\n        const resized = tensorflow.image.resizeBilinear(cropped, size);\n        const standardized = resized.div(tensorflow.scalar(255));\n        const batch = standardized.expandDims(0);\n\n        if (this.graph) {\n          const prediction = this.graph.predict(\n            batch\n          ) as tensorflow.Tensor<tensorflow.Rank>;\n\n          return prediction\n            .squeeze([0])\n            .tile([1, 1, 3])\n            .sub(0.3)\n            .sign()\n            .relu()\n            .resizeBilinear([height, width])\n            .pad([\n              [this.origin!.y, this.image.height - (this.origin!.y + height)],\n              [this.origin!.x, this.image.width - (this.origin!.x + width)],\n              [0, 0],\n            ]);\n        }\n      }\n    });\n\n    if (prediction) {\n      tensorflow.browser\n        .toPixels(prediction as tensorflow.Tensor3D)\n        .then(async (clamped) => {\n          this.output = new ImageJS.Image({\n            width: this.image.width,\n            height: this.image.height,\n            data: clamped,\n          });\n\n          // @ts-ignore\n          const data = this.output.grey().getMatrix().data;\n          const bar = data.map((el: Array<number>) => {\n            return Array.from(el);\n          });\n\n          const largest = this.computeContours(bar);\n\n          const foo: Array<number> = _.flatten(largest);\n          this.points = foo.map((el: number) => {\n            return Math.round(el);\n          });\n\n          // @ts-ignore\n          this._mask = encode(this.output.getChannel(0).data);\n          this._contour = this.points;\n          this._boundingBox = this.computeBoundingBoxFromContours(\n            this._contour\n          );\n        });\n    }\n  }\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport * as ImageJS from \"image-js\";\nimport * as _ from \"lodash\";\nimport { connectPoints } from \"../../../imageHelper\";\nimport { encode } from \"../../../rle\";\nimport { isoLines } from \"marchingsquares\";\n\nexport class PenAnnotationTool extends AnnotationTool {\n  brushSize: number = 8;\n  circlesData: Uint8ClampedArray | Uint8Array | undefined = undefined;\n  buffer: Array<number> = [];\n  outline: Array<number> = [];\n  points: Array<number> = [];\n\n  computeBoundingBox(): [number, number, number, number] | undefined {\n    if (!this.outline) return undefined;\n\n    const pairs = _.chunk(this.outline, 2);\n\n    return [\n      Math.round(_.min(_.map(pairs, _.first))!),\n      Math.round(_.min(_.map(pairs, _.last))!),\n      Math.round(_.max(_.map(pairs, _.first))!),\n      Math.round(_.max(_.map(pairs, _.last))!),\n    ];\n  }\n\n  computeCircleData(): Uint8Array | Uint8ClampedArray | undefined {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.image.width;\n    canvas.height = this.image.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    if (!ctx) return undefined;\n\n    const connected = connectPoints(\n      _.chunk(this.points, 2),\n      new ImageJS.Image(this.image.width, this.image.height)\n    );\n    connected.forEach((position) => {\n      ctx.beginPath();\n      ctx.arc(\n        Math.floor(position[0]),\n        Math.floor(position[1]),\n        this.brushSize / 2,\n        0,\n        Math.PI * 2,\n        true\n      );\n      ctx.fill();\n    });\n\n    const rgbMask = ImageJS.Image.fromCanvas(canvas);\n    // @ts-ignore\n    this.circlesData = this.thresholdMask(rgbMask.getChannel(3)).data;\n  }\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.circlesData = undefined;\n    this.buffer = [];\n    this.outline = [];\n    this.points = [];\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    this.annotating = true;\n\n    this.buffer = [...this.buffer, position.x, position.y];\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    this.buffer = [...this.buffer, position.x, position.y];\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    this.annotated = true;\n\n    this.annotating = false;\n\n    this.points = this.buffer;\n\n    this.computeCircleData();\n\n    if (!this.circlesData) return [];\n\n    this._mask = encode(this.circlesData);\n\n    if (!this.circlesData) return;\n\n    const bar = _.map(\n      _.chunk(this.circlesData, this.image.width),\n      (el: Array<number>) => {\n        return Array.from(el);\n      }\n    );\n\n    const largest = this.computeContours(bar);\n\n    this.outline = _.flatten(largest);\n\n    this._contour = this.outline;\n\n    this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n  }\n\n  static async setup(image: ImageJS.Image, brushSize: number) {\n    const operator = new PenAnnotationTool(image);\n\n    operator.brushSize = brushSize;\n\n    return operator;\n  }\n\n  private thresholdMask = (mask: ImageJS.Image) => {\n    for (let x = 0; x < mask.width; x++) {\n      for (let y = 0; y < mask.height; y++) {\n        if (mask.getPixelXY(x, y)[0] > 1) {\n          mask.setPixelXY(x, y, [255]);\n        }\n      }\n    }\n    return mask;\n  };\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport * as _ from \"lodash\";\n\nexport class PolygonalAnnotationTool extends AnnotationTool {\n  anchor?: { x: number; y: number };\n  buffer: Array<number> = [];\n  origin?: { x: number; y: number };\n  points: Array<number> = [];\n\n  deselect() {\n    this.annotated = false;\n    this.annotating = false;\n\n    this.annotation = undefined;\n\n    this.anchor = undefined;\n    this.buffer = [];\n    this.origin = undefined;\n    this.points = [];\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (this.connected(position)) {\n      if (this.origin) {\n        this.buffer = [...this.buffer, this.origin.x, this.origin.y];\n      }\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n      this.anchor = undefined;\n      this.origin = undefined;\n    }\n\n    if (this.buffer && this.buffer.length === 0) {\n      this.annotating = true;\n\n      if (!this.origin) {\n        this.origin = position;\n      }\n    }\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (this.anchor) {\n      if (\n        this.buffer[this.buffer.length - 2] !== this.anchor.x ||\n        this.buffer[this.buffer.length - 1] !== this.anchor.y\n      ) {\n        this.buffer.pop();\n        this.buffer.pop();\n      }\n\n      this.buffer = [...this.buffer, position.x, position.y];\n\n      return;\n    }\n\n    if (this.origin) {\n      this.buffer.pop();\n      this.buffer.pop();\n\n      this.buffer = [this.origin.x, this.origin.y, position.x, position.y];\n    }\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (\n      this.connected(position) &&\n      this.origin &&\n      this.buffer &&\n      this.buffer.length > 0\n    ) {\n      this.buffer = [\n        ...this.buffer,\n        position.x,\n        position.y,\n        this.origin.x,\n        this.origin.y,\n      ];\n\n      this.annotated = true;\n      this.annotating = false;\n\n      this.points = this.buffer;\n\n      this._contour = this.points;\n      this._mask = this.computeMask();\n      this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n      this.buffer = [];\n\n      this.anchor = undefined;\n      this.origin = undefined;\n\n      return;\n    }\n\n    if (this.anchor) {\n      this.buffer.pop();\n      this.buffer.pop();\n\n      this.buffer = [...this.buffer, position.x, position.y];\n\n      this.anchor = position;\n\n      return;\n    }\n\n    if (this.origin && this.buffer.length > 0) {\n      this.anchor = position;\n\n      return;\n    }\n  }\n\n  private connected(\n    position: { x: number; y: number },\n    threshold: number = 4\n  ): boolean | undefined {\n    if (!this.origin) return undefined;\n\n    const distance = Math.hypot(\n      position.x - this.origin.x,\n      position.y - this.origin.y\n    );\n\n    return distance < threshold;\n  }\n}\n","import { AnnotationTool } from \"../AnnotationTool\";\nimport { slic } from \"../../../slic\";\nimport * as ImageJS from \"image-js\";\nimport * as _ from \"lodash\";\nimport { encode } from \"../../../rle\";\n\nexport class QuickAnnotationTool extends AnnotationTool {\n  currentData?: Int32Array;\n  colorMasks?: Array<string>;\n  currentSuperpixel?: number;\n  superpixels?: Int32Array;\n  currentMask?: ImageJS.Image;\n  map?: Uint8Array | Uint8ClampedArray;\n  masks?: { [key: number]: Array<Int32Array | ImageJS.Image> };\n\n  computeObjectSelectionMask(): Array<number> | undefined {\n    if (!this.currentMask) return;\n\n    const greyData = this.currentMask.grey();\n\n    const binaryMask = new ImageJS.Image(\n      this.currentMask.width,\n      this.currentMask.height,\n      {\n        alpha: 0,\n        bitDepth: 1,\n        components: 1,\n      }\n    );\n\n    for (let x = 0; x < binaryMask.width; x++) {\n      for (let y = 0; y < binaryMask.height; y++) {\n        if (greyData.getPixelXY(x, y)[0] > 0) {\n          binaryMask.setBitXY(x, y);\n        }\n      }\n    }\n\n    return encode(binaryMask.data as Uint8Array);\n  }\n\n  filter(): {\n    count: number;\n    map: Uint8Array | Uint8ClampedArray;\n    superpixels: Int32Array;\n  } {\n    const data = this.image.getRGBAData();\n\n    const { count, map, superpixels } = slic(\n      data,\n      this.image.width,\n      this.image.height,\n      40\n    );\n\n    return { count, map, superpixels };\n  }\n\n  deselect() {}\n\n  onMouseDown(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (!this.superpixels || !this.masks) return;\n\n    const pixel =\n      Math.round(position.x) + Math.round(position.y) * this.image.width;\n\n    this.currentSuperpixel = this.superpixels[pixel];\n\n    const mask = this.masks[this.currentSuperpixel];\n\n    this.currentMask = mask[2] as ImageJS.Image;\n    this.currentData = mask[1] as Int32Array;\n\n    this.annotating = true;\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.annotated) return;\n\n    if (!this.superpixels || !this.masks) return;\n\n    const pixel =\n      Math.round(position.x) + Math.round(position.y) * this.image.width;\n    const superpixel = this.superpixels[pixel];\n\n    if (superpixel === this.currentSuperpixel) return; // don't draw superpixel mask if already on that superpixel\n\n    this.currentSuperpixel = superpixel;\n\n    const mask = this.masks[superpixel];\n\n    this.currentMask = mask[2] as ImageJS.Image;\n\n    if (!this.annotating) return;\n\n    if (!this.currentData) return;\n\n    const colorData = mask[1] as Int32Array;\n\n    this.currentData = this.addImages(colorData, this.currentData);\n    this.currentMask = new ImageJS.Image(\n      this.image.width,\n      this.image.height,\n      this.currentData\n    );\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.annotated || !this.annotating) return;\n\n    if (!this.currentMask) return;\n\n    const greyData = this.currentMask.grey();\n\n    // @ts-ignore\n    const greyMatrix = greyData.getMatrix().data;\n    const bar = greyMatrix.map((el: Array<number>) => {\n      return Array.from(el);\n    });\n    const largest: Array<Array<number>> = this.computeContours(bar);\n\n    this.points = _.flatten(\n      largest.map((coord) => {\n        return [Math.round(coord[0]), Math.round(coord[1])];\n      })\n    );\n\n    this._contour = this.points;\n    this._mask = this.computeObjectSelectionMask();\n    this._boundingBox = this.computeBoundingBoxFromContours(this._contour);\n\n    this.annotated = true;\n    this.annotating = false;\n  }\n\n  private static colorSuperpixelMap(mask: ImageJS.Image, color: string) {\n    const fillColor = [255, 0, 0, 150];\n\n    const foo: Array<Array<number>> = [];\n    for (let y = 0; y < mask.height; y++) {\n      for (let x = 0; x < mask.width; x++) {\n        if (mask.getPixelXY(x, y)[0] === 255) {\n          foo.push(fillColor);\n        } else {\n          foo.push([0, 0, 0, 0]);\n        }\n      }\n    }\n\n    let overlay = new ImageJS.Image(\n      mask.width,\n      mask.height,\n      new Uint8Array(mask.width * mask.height * 4),\n      { alpha: 1 }\n    );\n    // roiPaint doesn't respect alpha, so we'll paint it ourselves.\n    for (let x = 0; x < mask.width; x++) {\n      for (let y = 0; y < mask.height; y++) {\n        if (mask.getPixelXY(x, y)[0] === 255) {\n          overlay.setPixelXY(x, y, fillColor);\n        } else {\n          overlay.setPixelXY(x, y, [0, 0, 0, 0]);\n        }\n      }\n    }\n\n    return [Int32Array.from(_.flatten(foo)), overlay];\n  }\n\n  private addImages(foo: Int32Array, bar: Int32Array) {\n    return foo.map((el, i) => {\n      if ((i + 1) % 4 === 0) {\n        // opacity should not be added\n        return Math.max(el, bar[i]);\n      } else {\n        return Math.min(el + bar[i], 255); //FIXME this is going to be wrong for mixed colors (not just R, G or B)\n      }\n    });\n  }\n\n  static setup(image: ImageJS.Image) {\n    const instance = new QuickAnnotationTool(image);\n\n    const { count, map, superpixels } = instance.filter();\n\n    instance.map = map;\n\n    instance.superpixels = superpixels;\n\n    const unique = _.uniq(superpixels);\n\n    const masks: { [key: number]: Array<Int32Array | ImageJS.Image> } = {};\n\n    _.forEach(unique, (superpixel) => {\n      const binaryData = superpixels.map((pixel: number) => {\n        if (pixel === superpixel) {\n          return 255;\n        } else {\n          return 0;\n        }\n      });\n\n      const binaryImage = new ImageJS.Image(\n        image.width,\n        image.height,\n        binaryData,\n        { components: 1, alpha: 0 }\n      );\n\n      const [colorData, colorMask] = QuickAnnotationTool.colorSuperpixelMap(\n        binaryImage,\n        \"green\"\n      );\n\n      masks[superpixel] = [binaryData, colorData, colorMask];\n    });\n\n    instance.masks = masks;\n\n    return instance;\n  }\n}\n","export const slic = (\n  data: Uint8Array | Uint8ClampedArray,\n  width: number,\n  height: number,\n  regionSize: number = 40,\n  minRegionSize?: number\n) => {\n  if (!minRegionSize) {\n    minRegionSize = (regionSize * regionSize) / 4;\n  }\n\n  const imWidth = width;\n  const imHeight = height;\n  const numRegionsX = parseInt(String(imWidth / regionSize), 10);\n  const numRegionsY = parseInt(String(imHeight / regionSize), 10);\n  const numRegions = parseInt(String(numRegionsX * numRegionsY), 10);\n  const numPixels = parseInt(String(imWidth * imHeight), 10);\n  const masses = new Array(numPixels);\n  const currentCenters = new Float32Array((2 + 3) * numRegions);\n  const newCenters = new Float32Array((2 + 3) * numRegions);\n  const parameters = new Float32Array(2 * numRegions);\n  const mcMap = new Float32Array(numPixels);\n  const msMap = new Float32Array(numPixels);\n  const distanceMap = new Float32Array(numPixels);\n\n  /*\n   * RGB to XYZ\n   */\n  const xyz = new Float32Array(3 * imWidth * imHeight);\n\n  const gamma = 2.2;\n\n  for (let i = 0; i < imWidth * imHeight; i++) {\n    const r = Math.pow(parseFloat(String(data[4 * i])) * 0.00392156862, gamma);\n\n    const g = Math.pow(\n      parseFloat(String(data[4 * i + 1])) * 0.00392156862,\n      gamma\n    );\n\n    const b = Math.pow(\n      parseFloat(String(data[4 * i + 2])) * 0.00392156862,\n      gamma\n    );\n\n    xyz[i] = r * 0.488718 + g * 0.31068 + b * 0.200602;\n    xyz[i + imWidth * imHeight] = r * 0.176204 + g * 0.812985 + b * 0.0108109;\n    xyz[i + 2 * imWidth * imHeight] = g * 0.0102048 + b * 0.989795;\n  }\n\n  /*\n   * XYZ to Lab\n   */\n  const xw = 1.0 / 3.0;\n  const yw = 1.0 / 3.0;\n  const Yw = 1.0;\n  const Xw = xw / yw;\n  const Zw = ((1 - xw - yw) / yw) * Yw;\n  const ix = 1.0 / Xw;\n  const iy = 1.0 / Yw;\n  const iz = 1.0 / Zw;\n  const lab = new Float32Array(3 * imWidth * imHeight);\n\n  for (let i = 0; i < imWidth * imHeight; i++) {\n    const fx =\n      xyz[i] * ix > 0.00856\n        ? Math.pow(xyz[i] * ix, 0.33333333)\n        : 7.78706891568 * xyz[i] * ix + 0.1379310336;\n\n    const fy =\n      xyz[imWidth * imHeight + i] * iy > 0.00856\n        ? Math.pow(xyz[imWidth * imHeight + i] * iy, 0.33333333)\n        : 7.78706891568 * xyz[imWidth * imHeight + i] * iy + 0.1379310336;\n\n    const fz =\n      xyz[2 * imWidth * imHeight + i] * iz > 0.00856\n        ? Math.pow(xyz[2 * imWidth * imHeight + i] * iz, 0.33333333)\n        : 7.78706891568 * xyz[2 * imWidth * imHeight + i] * iz + 0.1379310336;\n\n    lab[i] = 116.0 * fy - 16.0;\n    lab[i + imWidth * imHeight] = 500.0 * (fx - fy);\n    lab[i + 2 * imWidth * imHeight] = 200.0 * (fy - fz);\n  }\n\n  /*\n   * Compute gradient\n   */\n  const gradient = new Float32Array(numPixels);\n\n  for (let k = 0; k < 3; k++) {\n    for (let y = 1; y < imHeight - 1; y++) {\n      for (let x = 1; x < imWidth - 1; x++) {\n        const a = lab[k * imWidth * imHeight + y * imWidth + x - 1];\n        const b = lab[k * imWidth * imHeight + y * imWidth + x + 1];\n        const c = lab[k * imWidth * imHeight + (y + 1) * imWidth + x];\n        const d = lab[k * imWidth * imHeight + (y - 1) * imWidth + x];\n\n        gradient[y * imWidth + x] =\n          gradient[y * imWidth + x] + (a - b) * (a - b) + (c - d) * (c - d);\n      }\n    }\n  }\n\n  /*\n   * Initialize k-means centroids\n   */\n  let i = 0;\n  let j = 0;\n\n  for (let v = 0; v < numRegionsY; v++) {\n    for (let u = 0; u < numRegionsX; u++) {\n      let centerx = 0;\n      let centery = 0;\n      let minEdgeValue = Infinity;\n\n      let x = parseInt(String(Math.round(regionSize * (u + 0.5))), 10);\n      let y = parseInt(String(Math.round(regionSize * (v + 0.5))), 10);\n\n      x = Math.max(Math.min(x, imWidth - 1), 0);\n      y = Math.max(Math.min(y, imHeight - 1), 0);\n\n      for (\n        let yp = Math.max(0, y - 1);\n        yp <= Math.min(imHeight - 1, y + 1);\n        yp++\n      ) {\n        for (\n          let xp = Math.max(0, x - 1);\n          xp <= Math.min(imWidth - 1, x + 1);\n          xp++\n        ) {\n          const thisEdgeValue = gradient[yp * imWidth + xp];\n\n          if (thisEdgeValue < minEdgeValue) {\n            minEdgeValue = thisEdgeValue;\n            centerx = xp;\n            centery = yp;\n          }\n        }\n      }\n\n      currentCenters[i++] = parseFloat(String(centerx));\n      currentCenters[i++] = parseFloat(String(centery));\n\n      currentCenters[i++] = lab[centery * imWidth + centerx];\n      currentCenters[i++] =\n        lab[imWidth * imHeight + centery * imWidth + centerx];\n      currentCenters[i++] =\n        lab[2 * imWidth * imHeight + centery * imWidth + centerx];\n\n      parameters[j++] = 10 * 10;\n      parameters[j++] = regionSize * regionSize;\n    }\n  }\n\n  const iterations = 10;\n\n  const segmentation = new Int32Array(numPixels);\n\n  for (let iteration = 0; iteration < iterations; ++iteration) {\n    /*\n     * Label\n     */\n    for (let i1 = 0; i1 < distanceMap.length; ++i1) {\n      distanceMap[i1] = Infinity;\n    }\n\n    for (let region = 0; region < numRegionsX * numRegionsY; ++region) {\n      const cx = Math.round(currentCenters[region * 5]);\n      const cy = Math.round(currentCenters[region * 5 + 1]);\n\n      for (\n        let y2 = Math.max(0, cy - regionSize);\n        y2 < Math.min(imHeight, cy + regionSize);\n        ++y2\n      ) {\n        for (\n          let x2 = Math.max(0, cx - regionSize);\n          x2 < Math.min(imWidth, cx + regionSize);\n          ++x2\n        ) {\n          const spatial = (x2 - cx) * (x2 - cx) + (y2 - cy) * (y2 - cy);\n          const dR = lab[y2 * imWidth + x2] - currentCenters[5 * region + 2];\n          const dG =\n            lab[imWidth * imHeight + y2 * imWidth + x2] -\n            currentCenters[5 * region + 3];\n          const dB =\n            lab[2 * imWidth * imHeight + y2 * imWidth + x2] -\n            currentCenters[5 * region + 4];\n          const appearance = dR * dR + dG * dG + dB * dB;\n\n          const distance = Math.sqrt(\n            appearance / parameters[region * 2] +\n              spatial / parameters[region * 2 + 1]\n          );\n\n          if (distance < distanceMap[y2 * imWidth + x2]) {\n            distanceMap[y2 * imWidth + x2] = distance;\n            segmentation[y2 * imWidth + x2] = region;\n          }\n        }\n      }\n    }\n\n    for (let y2 = 0; y2 < imHeight; ++y2) {\n      for (let x2 = 0; x2 < imWidth; ++x2) {\n        if (\n          parameters[segmentation[y2 * imWidth + x2] * 2] <\n          mcMap[y2 * imWidth + x2]\n        ) {\n          parameters[segmentation[y2 * imWidth + x2] * 2] =\n            mcMap[y2 * imWidth + x2];\n        }\n\n        if (\n          parameters[segmentation[y2 * imWidth + x2] * 2 + 1] <\n          msMap[y2 * imWidth + x2]\n        ) {\n          parameters[segmentation[y2 * imWidth + x2] * 2 + 1] =\n            msMap[y2 * imWidth + x2];\n        }\n      }\n    }\n\n    /*\n     * Update parameters\n     */\n    const mc = new Float32Array(parameters.length / 2);\n    const ms = new Float32Array(parameters.length / 2);\n\n    for (let i1 = 0; i1 < segmentation.length; i1++) {\n      const region = segmentation[i1];\n\n      if (mc[region] < mcMap[region]) {\n        mc[region] = mcMap[region];\n\n        parameters[region * 2] = mcMap[region];\n      }\n\n      if (ms[region] < msMap[region]) {\n        ms[region] = msMap[region];\n\n        parameters[region * 2 + 1] = msMap[region];\n      }\n    }\n\n    for (let i = 0; i < masses.length; ++i) {\n      masses[i] = 0;\n    }\n\n    for (let i = 0; i < newCenters.length; ++i) {\n      newCenters[i] = 0;\n    }\n\n    /*\n     * Compute centroids\n     */\n    let region;\n\n    for (let y1 = 0; y1 < imHeight; y1++) {\n      for (let x1 = 0; x1 < imWidth; x1++) {\n        region = segmentation[x1 + y1 * imWidth];\n\n        masses[region]++;\n\n        newCenters[region * 5] += x1;\n        newCenters[region * 5 + 1] += y1;\n        newCenters[region * 5 + 2] += lab[y1 * imWidth + x1];\n        newCenters[region * 5 + 3] +=\n          lab[imWidth * imHeight + y1 * imWidth + x1];\n        newCenters[region * 5 + 4] +=\n          lab[2 * imWidth * imHeight + y1 * imWidth + x1];\n      }\n    }\n\n    for (region = 0; region < numRegions; region++) {\n      const iMass = 1.0 / Math.max(masses[region], 1e-8);\n\n      newCenters[region * 5] = newCenters[region * 5] * iMass;\n      newCenters[region * 5 + 1] = newCenters[region * 5 + 1] * iMass;\n      newCenters[region * 5 + 2] = newCenters[region * 5 + 2] * iMass;\n      newCenters[region * 5 + 3] = newCenters[region * 5 + 3] * iMass;\n      newCenters[region * 5 + 4] = newCenters[region * 5 + 4] * iMass;\n    }\n\n    /*\n     * Compute residual error\n     */\n    let error = 0.0;\n\n    for (let index = 0; index < currentCenters.length; ++index) {\n      const d = currentCenters[index] - newCenters[index];\n\n      error += Math.sqrt(d * d);\n    }\n\n    if (error < 1e-5) {\n      break;\n    }\n\n    for (let i = 0; i < currentCenters.length; ++i) {\n      currentCenters[i] = newCenters[i];\n    }\n  }\n\n  /*\n   * Remove small objects\n   */\n  const cleaned = new Int32Array(numPixels);\n  const segment = new Int32Array(numPixels);\n\n  const dx = [1, -1, 0, 0];\n  const dy = [0, 0, 1, -1];\n\n  let segmentSize;\n  let label;\n  let cleanedLabel;\n  let numExpanded;\n  let x1;\n  let y1;\n  let xp;\n  let yp;\n  let neighbor;\n\n  for (let pixel = 0; pixel < numPixels; pixel++) {\n    if (cleaned[pixel]) continue;\n\n    label = segmentation[pixel];\n    numExpanded = 0;\n    segmentSize = 0;\n    segment[segmentSize++] = pixel;\n\n    cleanedLabel = label + 1;\n    cleaned[pixel] = label + 1;\n    x1 = pixel % imWidth;\n    y1 = Math.floor(pixel / imWidth);\n\n    for (let direction = 0; direction < 4; direction++) {\n      xp = x1 + dx[direction];\n      yp = y1 + dy[direction];\n      neighbor = xp + yp * imWidth;\n\n      if (\n        0 <= xp &&\n        xp < imWidth &&\n        0 <= yp &&\n        yp < imHeight &&\n        cleaned[neighbor]\n      ) {\n        cleanedLabel = cleaned[neighbor];\n      }\n    }\n\n    while (numExpanded < segmentSize) {\n      const open = segment[numExpanded++];\n\n      x1 = open % imWidth;\n      y1 = Math.floor(open / imWidth);\n\n      for (let direction = 0; direction < 4; ++direction) {\n        xp = x1 + dx[direction];\n        yp = y1 + dy[direction];\n        neighbor = xp + yp * imWidth;\n\n        if (\n          0 <= xp &&\n          xp < imWidth &&\n          0 <= yp &&\n          yp < imHeight &&\n          cleaned[neighbor] === 0 &&\n          segmentation[neighbor] === label\n        ) {\n          cleaned[neighbor] = label + 1;\n          segment[segmentSize++] = neighbor;\n        }\n      }\n    }\n\n    if (segmentSize < minRegionSize) {\n      while (segmentSize > 0) {\n        cleaned[segment[--segmentSize]] = cleanedLabel;\n      }\n    }\n  }\n\n  for (let pixel = 0; pixel < numPixels; ++pixel) {\n    --cleaned[pixel];\n  }\n\n  for (let index = 0; index < numPixels; ++index) {\n    segmentation[index] = cleaned[index];\n  }\n\n  return {\n    count: 0,\n    map: data,\n    superpixels: segmentation,\n  };\n};\n","import ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React from \"react\";\nimport { CreateCategoryDialog } from \"../CreateCategoryDialog\";\nimport { useDialog } from \"../../../../../hooks\";\n\nexport const CreateCategoryListItem = () => {\n  const { onClose, onOpen, open } = useDialog();\n\n  return (\n    <React.Fragment>\n      <ListItem button onClick={onOpen}>\n        <ListItemIcon>\n          <AddIcon />\n        </ListItemIcon>\n\n        <ListItemText primary=\"Create category\" />\n      </ListItem>\n\n      <CreateCategoryDialog onClose={onClose} open={open} />\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport LabelIcon from \"@material-ui/icons/Label\";\nimport LabelOutlinedIcon from \"@material-ui/icons/LabelOutlined\";\nimport { Category } from \"../../../../types/Category\";\nimport { useDispatch } from \"react-redux\";\nimport { slice } from \"../../../../store/slices\";\n\ntype CategoryListItemCheckboxProps = {\n  category: Category;\n};\n\nexport const CategoryListItemCheckbox = ({\n  category,\n}: CategoryListItemCheckboxProps) => {\n  const dispatch = useDispatch();\n\n  const onCheckboxClick = () => {\n    dispatch(\n      slice.actions.setCategoryVisibility({\n        category: category,\n        visible: !category.visible,\n      })\n    );\n  };\n\n  return (\n    <ListItemIcon>\n      <Checkbox\n        checked={category.visible}\n        checkedIcon={<LabelIcon style={{ color: category.color }} />}\n        disableRipple\n        edge=\"start\"\n        icon={<LabelOutlinedIcon style={{ color: category.color }} />}\n        onClick={onCheckboxClick}\n        tabIndex={-1}\n      />\n    </ListItemIcon>\n  );\n};\n","import React from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Category } from \"../../../../../types/Category\";\n\ntype HideOrShowCategoryMenuItemProps = {\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>\n  ) => void;\n};\n\nexport const HideOrShowCategoryMenuItem = ({\n  category,\n  onCloseCategoryMenu,\n}: HideOrShowCategoryMenuItemProps) => {\n  const onClick = (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    onCloseCategoryMenu(event);\n\n    const payload = { id: category.id, visible: !category.visible };\n\n    // TODO: dispatch hide or show category action\n  };\n\n  return (\n    <MenuItem onClick={onClick}>\n      <Typography variant=\"inherit\">\n        {category.visible ? \"Hide\" : \"Show\"} category\n      </Typography>\n    </MenuItem>\n  );\n};\n","import React from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Category } from \"../../../../../types/Category\";\n\ntype HideOtherCategoriesMenuItemProps = {\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => void;\n};\n\nexport const HideOtherCategoriesMenuItem = ({\n  category,\n  onCloseCategoryMenu,\n}: HideOtherCategoriesMenuItemProps) => {\n  const onClick = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    onCloseCategoryMenu(event);\n\n    // TODO: dispatch hide category action\n  };\n\n  return (\n    <MenuItem onClick={onClick}>\n      <Typography variant=\"inherit\">Hide other categories</Typography>\n    </MenuItem>\n  );\n};\n","import React from \"react\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Category } from \"../../../../../types/Category\";\nimport { HideOrShowCategoryMenuItem } from \"../HideOrShowCategoryMenuItem\";\nimport { HideOtherCategoriesMenuItem } from \"../HideOtherCategoriesMenuItem\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Typography from \"@material-ui/core/Typography\";\n\ntype CategoryMenuProps = {\n  anchorElCategoryMenu: any;\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => void;\n  onOpenCategoryMenu: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  openCategoryMenu: boolean;\n  onOpenDeleteCategoryDialog: () => void;\n  onOpenEditCategoryDialog: () => void;\n};\n\nexport const CategoryMenu = ({\n  anchorElCategoryMenu,\n  category,\n  onCloseCategoryMenu,\n  openCategoryMenu,\n  onOpenDeleteCategoryDialog,\n  onOpenEditCategoryDialog,\n}: CategoryMenuProps) => {\n  const onOpenDeleteCategoryDialogClick = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    onOpenDeleteCategoryDialog();\n    onCloseCategoryMenu(event);\n  };\n\n  const onOpenEditCategoryDialogClick = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    onOpenEditCategoryDialog();\n    onCloseCategoryMenu(event);\n  };\n\n  return (\n    <Menu\n      anchorEl={anchorElCategoryMenu}\n      anchorOrigin={{ horizontal: \"center\", vertical: \"bottom\" }}\n      getContentAnchorEl={null}\n      onClose={onCloseCategoryMenu}\n      open={openCategoryMenu}\n      transformOrigin={{ horizontal: \"center\", vertical: \"top\" }}\n    >\n      <MenuList dense variant=\"menu\">\n        <HideOtherCategoriesMenuItem\n          category={category}\n          onCloseCategoryMenu={onCloseCategoryMenu}\n        />\n\n        <HideOrShowCategoryMenuItem\n          category={category}\n          onCloseCategoryMenu={onCloseCategoryMenu}\n        />\n\n        {category.id !== \"00000000-0000-0000-0000-000000000000\" && (\n          <div>\n            <Divider />\n\n            <MenuItem onClick={onOpenEditCategoryDialogClick}>\n              <Typography variant=\"inherit\">Edit category</Typography>\n            </MenuItem>\n\n            <MenuItem onClick={onOpenDeleteCategoryDialogClick}>\n              <Typography variant=\"inherit\">Delete category</Typography>\n            </MenuItem>\n          </div>\n        )}\n      </MenuList>\n    </Menu>\n  );\n};\n","import React from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Category } from \"../../../../types/Category\";\nimport { Selection } from \"../../../../types/Selection\";\nimport { slice } from \"../../../../store/slices\";\nimport {\n  imageInstancesSelector,\n  selectedCategroySelector,\n} from \"../../../../store/selectors\";\n\ntype DeleteCategoryDialogProps = {\n  category: Category;\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const DeleteCategoryDialog = ({\n  category,\n  onClose,\n  open,\n}: DeleteCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const activeCategory = useSelector(selectedCategroySelector);\n\n  const selections = useSelector(imageInstancesSelector);\n\n  const onDelete = () => {\n    //change activeCategory if we are about to delete it\n    if (activeCategory.id === category.id) {\n      dispatch(\n        slice.actions.setSeletedCategory({\n          selectedCategory: \"00000000-0000-0000-0000-000000000000\",\n        })\n      );\n    }\n\n    dispatch(slice.actions.deleteCategory({ category: category }));\n\n    const instances = selections?.map((instance: Selection) => {\n      if (instance.categoryId === category.id) {\n        return {\n          ...instance,\n          categoryId: \"00000000-0000-0000-0000-000000000000\",\n        };\n      } else {\n        return instance;\n      }\n    });\n\n    dispatch(\n      slice.actions.setImageInstances({\n        instances: instances as Array<Selection>,\n      })\n    );\n\n    onClose();\n  };\n\n  return (\n    <Dialog fullWidth onClose={onClose} open={open}>\n      <DialogTitle>Delete \"{category.name}\" category?</DialogTitle>\n\n      <DialogContent>\n        Images categorized as \"{category.name}\" will not be deleted.\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onDelete} color=\"primary\">\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  alert: {\n    width: theme.spacing(64),\n  },\n  appBar: {\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  appBarShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create([\"margin\", \"width\"], {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n    width: `calc(100% - ${theme.spacing(32)}px)`,\n  },\n  card: {},\n  classifierSettingsDialogContent: {\n    marginTop: theme.spacing(8),\n  },\n  chip: {\n    height: \"20px\",\n    borderWidth: \"2px\",\n    fontSize: \"0.875rem\",\n    color: \"white\",\n  },\n  colorPicker: {\n    margin: \"16px\",\n  },\n  container: {\n    paddingBottom: theme.spacing(8),\n    paddingTop: theme.spacing(8),\n  },\n  createCategoryDialogContent: {\n    paddingLeft: \"0 !important\",\n  },\n  createCategoryDialogGrid: {\n    margin: theme.spacing(1),\n  },\n  createCategoryDialogItem: {\n    // paddingLeft: \"0 !important\",\n  },\n  drawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  drawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  drawerPaper: {\n    width: theme.spacing(32),\n  },\n  fileInput: {\n    display: \"none\",\n  },\n  gridList: {\n    transform: \"translateZ(0)\",\n  },\n  gridTileBar: {\n    background:\n      \"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)\",\n  },\n  gridTileBarIconButton: {\n    color: \"white\",\n  },\n  imageDialogAppBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  imageDialogContent: {\n    paddingBottom: theme.spacing(12),\n    paddingTop: theme.spacing(12),\n  },\n  imageSelected: {\n    border: \"solid 2px blue\",\n    borderRadius: \"3px\",\n  },\n  imageUnselected: {\n    border: \"none\",\n  },\n  main: {\n    flexGrow: 1,\n    marginLeft: -theme.spacing(32),\n    padding: theme.spacing(3),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n  mainShift: {\n    marginLeft: theme.spacing(32),\n    transition: theme.transitions.create(\"margin\", {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n  },\n  media: {},\n  progress: {\n    width: \"100%\",\n  },\n  settingsDialogAppBar: {},\n  slider: {\n    padding: theme.spacing(3),\n  },\n  sliderInput: {\n    width: 42,\n  },\n}));\n","import Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport React, { ChangeEvent, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { ColorIcon } from \"../ColorIcon\";\nimport { useStyles } from \"./EditCategoryDialog.css\";\nimport { Category } from \"../../../../types/Category\";\nimport { slice } from \"../../../../store/slices\";\nimport { categoriesSelector } from \"../../../../store/selectors\";\n\ntype EditCategoryDialogProps = {\n  category: Category;\n  onCloseDialog: () => void;\n  openDialog: boolean;\n};\n\nexport const EditCategoryDialog = ({\n  category,\n  onCloseDialog,\n  openDialog,\n}: EditCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const classes = useStyles();\n\n  const [color, setColor] = useState<string>(category.color);\n\n  const onColorChange = (color: any) => {\n    setColor(color.hex);\n  };\n\n  const [name, setName] = useState<string>(category.name);\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  const categories = useSelector(categoriesSelector);\n\n  const onEdit = () => {\n    const updatedCategories = categories?.map((v: Category) => {\n      if (v.id === category.id) {\n        return {\n          ...category,\n          color: color,\n          name: name,\n        };\n      } else {\n        return v;\n      }\n    });\n    dispatch(slice.actions.setCategories({ categories: updatedCategories }));\n\n    onCloseDialog();\n  };\n\n  return (\n    <Dialog fullWidth onClose={onCloseDialog} open={openDialog}>\n      <DialogTitle>Edit category</DialogTitle>\n\n      <DialogContent>\n        <div>\n          <Grid container spacing={1}>\n            <Grid item xs={2} className={classes.createCategoryDialogItem}>\n              <ColorIcon color={color} onColorChange={onColorChange} />\n            </Grid>\n            <Grid item xs={10}>\n              <TextField\n                autoFocus\n                fullWidth\n                id=\"name\"\n                label=\"Name\"\n                margin=\"dense\"\n                onChange={onNameChange}\n                value={name}\n              />\n            </Grid>\n          </Grid>\n        </div>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCloseDialog} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onEdit} color=\"primary\">\n          Update\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import Drawer from \"@material-ui/core/Drawer\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport React from \"react\";\nimport { Category } from \"../../../../types/Category\";\nimport {\n  createdCategoriesSelector,\n  unknownCategroySelector,\n} from \"../../../../store/selectors\";\nimport { useSelector } from \"react-redux\";\nimport { useStyles } from \"./Categories.css\";\nimport { CollapsibleList } from \"../CollapsibleList\";\nimport { CreateCategoryListItem } from \"../CreateCategoryListItem\";\nimport { CategoryListItemCheckbox } from \"../CategoryListItemCheckbox\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\";\nimport { CategoryMenu } from \"../CategoryMenu\";\nimport { DeleteCategoryDialog } from \"../DeleteCategoryDialog\";\nimport { EditCategoryDialog } from \"../EditCategoryDialog\";\nimport { useDialog } from \"../../../../hooks\";\n\ntype CategoriesProps = {\n  activeCategory: Category;\n  onCategoryClick: (\n    event: React.MouseEvent<HTMLDivElement>,\n    category: Category\n  ) => void;\n};\n\nexport const Categories = ({\n  activeCategory,\n  onCategoryClick,\n}: CategoriesProps) => {\n  const classes = useStyles();\n\n  const categories: Array<Category> = useSelector(createdCategoriesSelector);\n\n  const unknownCategory: Category = useSelector(unknownCategroySelector);\n\n  const {\n    onClose: onCloseDeleteCategoryDialog,\n    onOpen: onOpenDeleteCategoryDialog,\n    open: openDeleteCategoryDialog,\n  } = useDialog();\n\n  const {\n    onClose: onCloseEditCategoryDialog,\n    onOpen: onOpenEditCategoryDialog,\n    open: openEditCategoryDialog,\n  } = useDialog();\n\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const onCategoryMenuOpen = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onCategoryMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <Drawer\n      anchor=\"left\"\n      className={classes.applicationDrawer}\n      classes={{ paper: classes.applicationDrawerPaper }}\n      open\n      variant=\"persistent\"\n    >\n      <div className={classes.applicationDrawerHeader} />\n\n      <CollapsibleList primary=\"Categories\">\n        {categories.map((category: Category) => {\n          return (\n            <div key={category.id}>\n              <ListItem\n                button\n                dense\n                id={category.id}\n                onClick={(event) => onCategoryClick(event, category)}\n                selected={category.id === activeCategory.id}\n              >\n                <CategoryListItemCheckbox category={category} />\n\n                <ListItemText\n                  id={category.id}\n                  primary={category.name}\n                  primaryTypographyProps={{ noWrap: true }}\n                />\n\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" onClick={onCategoryMenuOpen}>\n                    <MoreHorizIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <CategoryMenu\n                anchorElCategoryMenu={anchorEl}\n                category={category}\n                onCloseCategoryMenu={onCategoryMenuClose}\n                onOpenCategoryMenu={onCategoryMenuOpen}\n                onOpenDeleteCategoryDialog={onOpenDeleteCategoryDialog}\n                onOpenEditCategoryDialog={onOpenEditCategoryDialog}\n                openCategoryMenu={Boolean(anchorEl)}\n              />\n\n              <DeleteCategoryDialog\n                category={category}\n                onClose={onCloseDeleteCategoryDialog}\n                open={openDeleteCategoryDialog}\n              />\n\n              <EditCategoryDialog\n                category={category}\n                onCloseDialog={onCloseEditCategoryDialog}\n                openDialog={openEditCategoryDialog}\n              />\n            </div>\n          );\n        })}\n\n        <ListItem\n          button\n          dense\n          id={unknownCategory.id}\n          onClick={(event) => onCategoryClick(event, unknownCategory)}\n          selected={unknownCategory.id === activeCategory.id}\n        >\n          <CategoryListItemCheckbox category={unknownCategory} />\n\n          <ListItemText\n            id={unknownCategory.id}\n            primary={unknownCategory.name}\n            primaryTypographyProps={{ noWrap: true }}\n          />\n        </ListItem>\n\n        <CreateCategoryListItem />\n      </CollapsibleList>\n    </Drawer>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst settingsWidth = 240;\nconst operationsWidth = 56;\n\nexport const useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  root: {\n    display: \"flex\",\n  },\n  content: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n    width: \"100%\",\n  },\n  options: {\n    width: settingsWidth,\n    flexShrink: 0,\n  },\n  settingsPaper: {\n    width: settingsWidth,\n    right: operationsWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n  },\n  settingsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  operations: {\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n    width: operationsWidth,\n  },\n  operationsPaper: {\n    width: operationsWidth,\n  },\n  operationsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  logo: {\n    flexGrow: 1,\n  },\n  applicationDrawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  applicationDrawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  applicationDrawerPaper: {\n    zIndex: 0,\n    width: theme.spacing(32),\n  },\n}));\n","import { createMuiTheme } from \"@material-ui/core/styles\";\n\nexport const theme = createMuiTheme({\n  overrides: {\n    MuiDrawer: {\n      paperAnchorDockedLeft: {\n        borderRight: \"1px solid rgba(16, 16, 16)\",\n      },\n      paperAnchorDockedRight: {\n        borderLeft: \"1px solid rgba(16, 16, 16)\",\n      },\n    },\n    MuiListItem: {\n      root: {\n        \"&$selected\": {\n          backgroundColor: \"rgba(60, 61, 62)\",\n        },\n      },\n    },\n    MuiSlider: {\n      rail: {\n        color: \"rgba(73, 73, 73)\",\n      },\n      thumb: {\n        color: \"rgba(201, 201, 201)\",\n      },\n      track: {\n        color: \"rgba(159, 159, 159)\",\n      },\n    },\n  },\n  palette: {\n    background: {\n      paper: \"rgba(40, 40, 40)\",\n      default: \"rgba(50, 50, 50)\",\n    },\n    divider: \"rgba(72, 72, 72)\",\n    text: {\n      primary: \"rgba(190, 190, 190)\",\n    },\n    type: \"dark\",\n  },\n});\n","import Divider from \"@material-ui/core/Divider\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport React from \"react\";\nimport { useStyles } from \"./OperationOptions.css\";\nimport { IconButton } from \"@material-ui/core\";\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\";\nimport { theme } from \"../../ImageViewer/theme\";\n\ntype OperationOptionsProps = {\n  handleCollapse: (b: boolean) => void;\n  name: string;\n  settings: React.ReactNode;\n};\n\nexport const OperationOptions = ({\n  handleCollapse,\n  name,\n  settings,\n}: OperationOptionsProps) => {\n  const classes = useStyles();\n\n  return (\n    <Drawer\n      anchor=\"right\"\n      className={classes.options}\n      classes={{ paper: classes.settingsPaper }}\n      variant=\"permanent\"\n    >\n      <div className={classes.settingsToolbar} />\n      <List>\n        <ListItem dense>\n          <ListItemText primary={name} />\n          <IconButton\n            onClick={() => {\n              handleCollapse(false);\n            }}\n          >\n            <ArrowForwardIcon\n              fontSize=\"small\"\n              style={{ fill: theme.palette.text.primary }}\n            />\n          </IconButton>\n        </ListItem>\n      </List>\n\n      <Divider />\n\n      {settings}\n    </Drawer>\n  );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24h-24Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M15 21h-11c-.552 0-1-.448-1-1v-11c0-.552.448-1 1-1h11c.552 0 1 .448 1 1v11c0 .552-.448 1-1 1Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M21 5v-1c0-.552-.448-1-1-1h-1\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M21 15v1c0 .552-.448 1-1 1h-1\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M7 5v-1c0-.552.448-1 1-1h1\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M13 3h2\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  stroke: \"#323232\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5,\n  d: \"M21 11v-2 0 0Z\"\n}));\n\nfunction SvgInvertSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgInvertSelection);\nexport default __webpack_public_path__ + \"static/media/InvertSelection.7649974a.svg\";\nexport { ForwardRef as ReactComponent };","import Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Radio from \"@material-ui/core/Radio\";\nimport React from \"react\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport { ReactComponent as InvertSelectionIcon } from \"../../../icons/InvertSelection.svg\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  invertModeSelector,\n  selectionModeSelector,\n} from \"../../../../store/selectors\";\nimport { slice } from \"../../../../store/slices\";\nimport { SelectionMode } from \"../../../../types/SelectionMode\";\n\nexport const SelectionOptions = () => {\n  const dispatch = useDispatch();\n\n  const selectionMode = useSelector(selectionModeSelector);\n\n  const invertMode = useSelector(invertModeSelector);\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const payload = {\n      selectionMode: parseInt((event.target as HTMLInputElement).value),\n    };\n\n    dispatch(slice.actions.setSelectionMode(payload));\n  };\n\n  const onInvertClick = () => {\n    dispatch(slice.actions.setInvertMode({ invertMode: !invertMode }));\n  };\n\n  return (\n    <React.Fragment>\n      <RadioGroup\n        aria-label=\"selection mode\"\n        name=\"selection-mode\"\n        onChange={onChange}\n        value={selectionMode}\n      >\n        <List>\n          <ListItem dense>\n            <ListItemIcon>\n              <Radio\n                disableRipple\n                edge=\"start\"\n                tabIndex={-1}\n                value={SelectionMode.New}\n              />\n            </ListItemIcon>\n\n            <ListItemText primary=\"New\" secondary=\"Create a new selection.\" />\n          </ListItem>\n\n          <ListItem dense>\n            <ListItemIcon>\n              <Radio\n                disableRipple\n                edge=\"start\"\n                tabIndex={-1}\n                value={SelectionMode.Add}\n              />\n            </ListItemIcon>\n\n            <ListItemText\n              primary=\"Add\"\n              secondary=\"Add area to the existing selection.\"\n            />\n          </ListItem>\n\n          <ListItem dense>\n            <ListItemIcon>\n              <Radio\n                disableRipple\n                edge=\"start\"\n                tabIndex={-1}\n                value={SelectionMode.Subtract}\n              />\n            </ListItemIcon>\n\n            <ListItemText\n              primary=\"Subtract\"\n              secondary=\"Subtract area from the existing selection.\"\n            />\n          </ListItem>\n\n          <ListItem dense>\n            <ListItemIcon>\n              <Radio\n                disableRipple\n                edge=\"start\"\n                tabIndex={-1}\n                value={SelectionMode.Intersect}\n              />\n            </ListItemIcon>\n\n            <ListItemText\n              primary=\"Intersect\"\n              secondary=\"Constrain the boundary of the new selection to the existing selection.\"\n            />\n          </ListItem>\n        </List>\n      </RadioGroup>\n\n      <Divider />\n\n      <List>\n        <ListItem button onClick={onInvertClick} dense>\n          <ListItemIcon>\n            <SvgIcon>\n              <InvertSelectionIcon />\n            </SvgIcon>\n          </ListItemIcon>\n\n          <ListItemText primary=\"Invert selection\" />\n        </ListItem>\n      </List>\n    </React.Fragment>\n  );\n};\n","import ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport React from \"react\";\nimport SvgIcon from \"@material-ui/core/SvgIcon\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\ntype ImageViewerProps = {\n  children: React.ReactNode;\n  name: string;\n  onClick: () => void;\n  selected: boolean;\n};\n\nexport const Operation = ({\n  children,\n  name,\n  onClick,\n  selected,\n}: ImageViewerProps) => {\n  return (\n    <Tooltip aria-label={name} title={name}>\n      <ListItem button onClick={onClick} selected={selected}>\n        <ListItemIcon>\n          <SvgIcon fontSize=\"small\">{children}</SvgIcon>\n        </ListItemIcon>\n      </ListItem>\n    </Tooltip>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst operationsWidth = 56;\n\nexport const useStyles = makeStyles((theme) => ({\n  drawer: {\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n    width: operationsWidth,\n  },\n  paper: {\n    width: operationsWidth,\n  },\n  toolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n}));\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Color-adjustment\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Path\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.25100003,21.5020001 C4.80400002,21.5020001 2.00000001,18.6980001 2.00000001,15.2510001 C2.00000001,11.804 4.80400002,9.00000004 8.25100003,9.00000004 C11.698,9.00000004 14.5020001,11.804 14.5020001,15.2510001 C14.5020001,18.6980001 11.698,21.5020001 8.25100003,21.5020001 Z\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.7490001,21.5020001 C12.3020001,21.5020001 9.49800004,18.6980001 9.49800004,15.2510001 C9.49800004,11.804 12.3020001,9.00000004 15.7490001,9.00000004 C19.1960001,9.00000004 22.0000001,11.804 22.0000001,15.2510001 C22.0000001,18.6980001 19.1960001,21.5020001 15.7490001,21.5020001 Z\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.0100001,15.0000001 C8.56300004,15.0000001 5.75900002,12.1960001 5.75900002,8.74900004 C5.75900002,5.30200002 8.56300004,2.49800001 12.0100001,2.49800001 C15.4570001,2.49800001 18.2610001,5.30200002 18.2610001,8.74900004 C18.2610001,12.1960001 15.4570001,15.0000001 12.0100001,15.0000001 Z\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n})));\n\nfunction SvgColorAdjustment(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Color adjustment\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgColorAdjustment);\nexport default __webpack_public_path__ + \"static/media/ColorAdjustment.b6d05bdf.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Color-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  transform: \"translate(2.000000, 2.000000)\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.25800002,14.4180001 L1.51600001,10.676 C0.689000003,9.84900004 0.689000003,8.50900004 1.51600001,7.68200003 L7.15000003,2.04800001 L13.8860001,8.78400004 L8.25200003,14.4180001 C7.42500003,15.2440001 6.08400003,15.2440001 5.25800002,14.4180001 Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.8830001,11.774 C16.8830001,11.774 14.7660001,14.0710001 14.7660001,15.4790001 C14.7660001,16.6430001 15.7190001,17.5960001 16.8830001,17.5960001 C18.0470001,17.5960001 19.0000001,16.6430001 19.0000001,15.4780001 C19.0000001,14.0710001 16.8830001,11.774 16.8830001,11.774 L16.8830001,11.774 Z\"\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 7.15000003,\n  y1: 2.05000001,\n  x2: 6.06000003,\n  y2: 0.940000004\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 13.8900001,\n  y1: 8.78000004,\n  x2: 0.930000004,\n  y2: 8.78000004\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 1.42000001,\n  y1: 19.4400001,\n  x2: 10,\n  y2: 19.4400001\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgColorSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Color selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgColorSelection);\nexport default __webpack_public_path__ + \"static/media/ColorSelection.7f12326e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Elliptical-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.3640001,5.63604002 C21.8787201,9.15076004 21.8787201,14.8492401 18.3640001,18.3639401 C14.8492801,21.8786601 9.15080004,21.8786601 5.63610002,18.3639401 C2.12138001,14.8492201 2.12138001,9.15074004 5.63610002,5.63604002 C9.15082004,2.12132001 14.8493001,2.12132001 18.3640001,5.63604002\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgEllipticalSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Elliptical selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEllipticalSelection);\nexport default __webpack_public_path__ + \"static/media/EllipticalSelection.18552cf6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Hand\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.005000, -0.005000)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.01 0 24.01 24.01 0 24.01\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  transform: \"translate(3.005000, 3.005000)\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0.876688223,7.82337055 C1.82416266,7.02907695 3.20659866,7.09971911 4.07146412,7.98533063 L5.53482321,9.47915396 L5.53482321,3.45217126 C5.53482321,1.10030408 7.78886826,-0.560648269 9.97210561,0.183678925 L14.6976765,1.79294189 C16.0750548,2.26159234 17.0039844,3.57967175 17.0039844,5.06143422 L17.0039844,12.1222047 C17.0039844,15.4044809 14.3992726,18.0664844 11.1876378,18.0664844 L8.44636831,18.0664844 C6.61379765,18.0664844 4.88912444,17.1843188 3.78991922,15.6853265 L0.478816396,11.165951 C-0.284895203,10.1218254 -0.109561856,8.64867779 0.876688223,7.82337055 L0.876688223,7.82337055 Z\"\n}))));\n\nfunction SvgHand(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Hand\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHand);\nexport default __webpack_public_path__ + \"static/media/Hand.57521d91.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Lasso-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  id: \"Path\",\n  stroke: \"#BABABA\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.9200215,5.20050274 C22.7422808,7.79423331 22.7422808,11.9995035 18.9200215,14.593244 C15.0977622,17.1869746 8.90062147,17.1869746 5.07841219,14.593244 C1.25615292,11.9995135 1.25615292,7.79424331 5.07841219,5.20050274 C8.90067146,2.60677217 15.0978122,2.60677217 18.9200215,5.20050274\",\n  strokeWidth: 1.49992515,\n  transform: \"translate(11.999217, 9.896873) rotate(-14.928464) translate(-11.999217, -9.896873) \"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.7110001,16.3150001 C9.54400004,17.4260001 4.30200002,16.4030001 4.30200002,12.9560001\",\n  strokeWidth: 1.5\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.048,14.1050001 C10.048,16.3230001 8.89900004,19.8510001 4.30200002,21.0000001\",\n  strokeWidth: 1.5\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.30200002,12.9560001 C4.30200002,9.50900004 10.048,9.50900004 10.048,14.1050001\",\n  strokeWidth: 1.5\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgLassoSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Lasso selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLassoSelection);\nexport default __webpack_public_path__ + \"static/media/LassoSelection.c53651de.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Magnetic-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(2.995000, 2.995000)\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"line\", {\n  x1: 15.1525604,\n  y1: 13.35081,\n  x2: 11.8391804,\n  y2: 10.0364296,\n  id: \"Path\"\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 7.97357042,\n  y1: 6.17081958,\n  x2: 4.65919,\n  y2: 2.85743958,\n  id: \"Path\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.75389542,0.324384583 L10.505625,2.07611417 C10.9368635,2.50774241 10.9368635,3.20713676 10.505625,3.638765 L5.487535,8.65585458 C4.41981785,9.72359699 4.41981785,11.4547226 5.487535,12.522465 C6.55527738,13.5901821 8.28640301,13.5901821 9.35414542,12.522465 L14.371235,7.504375 C14.8028633,7.07313649 15.5022576,7.07313649 15.9338858,7.504375 L17.6856154,9.25610458 C17.8936381,9.46269483 18.0106252,9.74375249 18.0106252,10.0369298 C18.0106252,10.3301071 17.8936381,10.6111648 17.6856154,10.817755 L12.6675254,15.835845 C9.76959655,18.7328702 5.07208391,18.7328702 2.174155,15.835845 C-0.722870151,12.9379161 -0.722870151,8.24040345 2.174155,5.34247458 L7.192245,0.324384583 C7.39883524,0.116361933 7.6798929,-0.000625150988 7.97307021,-0.000625150988 C8.26624751,-0.000625150988 8.54730517,0.116361933 8.75389542,0.324384583 Z\",\n  id: \"Path\"\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"-0.005 -0.005 24.005 -0.005 24.005 24.005 -0.005 24.005\"\n}));\n\nfunction SvgMagneticSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Magnetic selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMagneticSelection);\nexport default __webpack_public_path__ + \"static/media/MagneticSelection.eaf31360.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Object-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(2.000000, 3.000000)\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.1970001,12.9320001 L16.1970001,12.9320001 L18.1730001,14.9080001 C18.6090001,15.3440001 18.6090001,16.0520001 18.1730001,16.4880001 L16.9870001,17.6740001 C16.5510001,18.1100001 15.8430001,18.1100001 15.4070001,17.6740001 L13.4310001,15.6980001 L11.9420001,17.1870001 C11.6480001,17.4810001 11.1480001,17.3630001 11.0170001,16.9690001 L8.14500004,8.35200005 C7.99900004,7.91500005 8.41500004,7.50000004 8.85200005,7.64500004 L17.4690001,10.5170001 C17.8630001,10.6480001 17.9810001,11.1480001 17.6870001,11.4420001 L16.1970001,12.9320001\"\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 2.78000002,\n  y1: 7.93000005,\n  x2: 0.50000001,\n  y2: 7.93000005\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 4.44000003,\n  y1: 3.94000003,\n  x2: 2.82000002,\n  y2: 2.32000002\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 4.40000003,\n  y1: 11.9600001,\n  x2: 2.78000002,\n  y2: 13.5800001\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 8.43000004,\n  y1: 2.28000002,\n  x2: 8.43000004,\n  y2: 1.25000099e-8\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 12.4600001,\n  y1: 3.90000003,\n  x2: 14.0800001,\n  y2: 2.28000002\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgObjectSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Object selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgObjectSelection);\nexport default __webpack_public_path__ + \"static/media/ObjectSelection.64bf20e5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Pen-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  transform: \"translate(3.000000, 3.000000)\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.3500001,1.196 L6.31300003,8.22800003 C5.44200002,8.99000004 5.39800002,10.329 6.21600003,11.147 L7.36500003,12.2960001 C8.18300003,13.1140001 9.52300004,13.0690001 10.284,12.1990001 L17.3160001,4.16200002 C18.0450001,3.33000001 18.0030001,2.07500001 17.2210001,1.29200001 C16.4380001,0.509000002 15.1830001,0.468000002 14.3500001,1.196 Z\"\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 7.87000003,\n  y1: 6.87000003,\n  x2: 11.65,\n  y2: 10.65\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0.599000002,17.3230001 L4.30200002,17.3230001 C7.28700003,17.3230001 8.78200004,13.7140001 6.67100003,11.603 C5.11900002,10.051 2.48300001,10.622 1.71300001,12.6770001 L0.191000001,16.7350001 C0.0850000004,17.0200001 0.295000001,17.3230001 0.599000002,17.3230001 Z\"\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgPenSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Pen selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPenSelection);\nexport default __webpack_public_path__ + \"static/media/PenSelection.ce15dd27.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Polygonal-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.922,3.63000002 L3.68100002,8.89100004 C3.03800001,9.35800004 2.77000001,10.185 3.01500001,10.941 L5.78100002,19.4540001 C6.02600003,20.2090001 6.73000003,20.7210001 7.52500003,20.7210001 L16.4760001,20.7210001 C17.2700001,20.7210001 17.9740001,20.2100001 18.2200001,19.4540001 L20.9860001,10.941 C21.2310001,10.186 20.9630001,9.35800004 20.3200001,8.89100004 L13.0780001,3.63000002 C12.4350001,3.16300001 11.565,3.16300001 10.922,3.63000002 L10.922,3.63000002 Z\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgPolygonalSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Polygonal selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPolygonalSelection);\nexport default __webpack_public_path__ + \"static/media/PolygonalSelection.a42ec225.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Quick-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(3.000000, 3.000000)\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"2.54200002 13.2190001 0.225000013 15.5370001 1.58200002 17.1480001 4.22900003 17.1480001 5.36900003 16.0500001\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.00300005,14.8300001 L7.29600004,15.5370001 C6.51500004,16.3180001 5.24900003,16.3180001 4.46800003,15.5370001 L3.05400003,14.1230001 C2.27300002,13.3420001 2.27300002,12.0760001 3.05400003,11.2950001 L3.76100003,10.5880001\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.9940001,3.60700003 L14.9830001,0.596000015 C14.2380001,-0.148999988 13.0440001,-0.187999988 12.2520001,0.505000015 L3.95500003,7.76500004 C3.08400003,8.52700005 3.04000003,9.86600005 3.85800003,10.6840001 L7.90600005,14.7320001 C8.72400005,15.5500001 10.0640001,15.5050001 10.8250001,14.6350001 L18.0850001,6.33800004 C18.7780001,5.54600004 18.7380001,4.35200003 17.9940001,3.60700003 Z\"\n})), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgQuickSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Quick selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgQuickSelection);\nexport default __webpack_public_path__ + \"static/media/QuickSelection.92a60ac4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Rectangular-selection\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Group\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.4170001,20.25 L5.58300002,20.25 C4.57000002,20.25 3.75000002,19.4290001 3.75000002,18.4170001 L3.75000002,5.58300002 C3.75000002,4.57000002 4.57100002,3.75000002 5.58300002,3.75000002 L18.4160001,3.75000002 C19.4290001,3.75000002 20.249001,4.57100002 20.249001,5.58300002 L20.249001,18.4160001 C20.25,19.4290001 19.4290001,20.25 18.4170001,20.25 Z\",\n  id: \"Path\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  id: \"Path\",\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n})));\n\nfunction SvgRectangularSelection(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Rectangular selection\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRectangularSelection);\nexport default __webpack_public_path__ + \"static/media/RectangularSelection.3cca93c1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Zoom\",\n  stroke: \"none\",\n  strokeWidth: 1,\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Path\",\n  transform: \"translate(-0.000000, -0.000000)\"\n}, /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1931001,5.58187002 C16.5249201,7.91369003 16.5249201,11.69432 14.1931001,14.0261401 C11.86128,16.3579601 8.08065003,16.3579601 5.74883002,14.0261401 C3.41701001,11.69432 3.41701001,7.91369003 5.74883002,5.58187002 C8.08065003,3.25005001 11.86128,3.25005001 14.1931001,5.58187002\",\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}), /*#__PURE__*/React.createElement(\"line\", {\n  x1: 14.1500001,\n  y1: 14.0600001,\n  x2: 20.0000001,\n  y2: 19.9900001,\n  stroke: \"#BABABA\",\n  strokeWidth: 1.5,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n})));\n\nfunction SvgZoom(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"Zoom\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgZoom);\nexport default __webpack_public_path__ + \"static/media/Zoom.58f47de7.svg\";\nexport { ForwardRef as ReactComponent };","import Divider from \"@material-ui/core/Divider\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport List from \"@material-ui/core/List\";\nimport React from \"react\";\nimport { ToolType as OperationType } from \"../../../../types/ToolType\";\nimport { Operation } from \"../Operation\";\nimport { useStyles } from \"./Operations.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toolTypeSelector } from \"../../../../store/selectors\";\nimport { slice } from \"../../../../store/slices\";\nimport {\n  ColorAdjustmentIcon,\n  ColorSelectionIcon,\n  EllipticalSelectionIcon,\n  HandIcon,\n  LassoSelectionIcon,\n  MagneticSelectionIcon,\n  ObjectSelectionIcon,\n  PolygonalSelectionIcon,\n  QuickSelectionIcon,\n  RectangularSelectionIcon,\n  ZoomIcon,\n} from \"../../../icons\";\nimport { useTranslation } from \"react-i18next\";\n\ntype OperationsProps = {\n  handleCollapse: (b: boolean) => void;\n};\n\nexport const Operations = ({ handleCollapse }: OperationsProps) => {\n  const classes = useStyles();\n\n  const dispatch = useDispatch();\n\n  const activeOperation = useSelector(toolTypeSelector);\n\n  const { t, i18n } = useTranslation();\n\n  return (\n    <Drawer\n      anchor=\"right\"\n      className={classes.drawer}\n      classes={{ paper: classes.paper }}\n      variant=\"permanent\"\n    >\n      <div className={classes.toolbar} />\n\n      <Divider />\n\n      <List>\n        <Operation\n          name={t(\"Color adjustment\")}\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.ColorAdjustment,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.ColorAdjustment}\n        >\n          <ColorAdjustmentIcon />\n        </Operation>\n\n        <Divider />\n\n        <Operation\n          name=\"Rectangular selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.RectangularSelection,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.RectangularSelection}\n        >\n          <RectangularSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Elliptical selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.EllipticalAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.EllipticalAnnotation}\n        >\n          <EllipticalSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Pen selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.PenAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.PenAnnotation}\n        >\n          <LassoSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Lasso selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.LassoAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.LassoAnnotation}\n        >\n          <LassoSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Polygonal selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.PolygonalAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.PolygonalAnnotation}\n        >\n          <PolygonalSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Magnetic selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.MagneticAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.MagneticAnnotation}\n        >\n          <MagneticSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Color selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.ColorAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.ColorAnnotation}\n        >\n          <ColorSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Quick selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.QuickAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.QuickAnnotation}\n        >\n          <QuickSelectionIcon />\n        </Operation>\n\n        <Operation\n          name=\"Object selection\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.ObjectAnnotation,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.ObjectAnnotation}\n        >\n          <ObjectSelectionIcon />\n        </Operation>\n\n        <Divider />\n\n        <Operation\n          name=\"Zoom\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.Zoom,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.Zoom}\n        >\n          <ZoomIcon />\n        </Operation>\n\n        <Operation\n          name=\"Hand\"\n          onClick={() => {\n            dispatch(\n              slice.actions.setOperation({\n                operation: OperationType.Hand,\n              })\n            );\n            handleCollapse(true);\n          }}\n          selected={activeOperation === OperationType.Hand}\n        >\n          <HandIcon />\n        </Operation>\n      </List>\n    </Drawer>\n  );\n};\n","import Radio from \"@material-ui/core/Radio\";\nimport React from \"react\";\nimport { RadioGroup } from \"@material-ui/core\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Button from \"@material-ui/core/Button\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ZoomMode } from \"../../../../types/ZoomMode\";\nimport { slice } from \"../../../../store/slices\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { zoomSettingsSelector } from \"../../../../store/selectors\";\n\ntype ZoomOptionsProps = {\n  handleRevert: () => void;\n};\n\nexport const ZoomOptions = ({ handleRevert }: ZoomOptionsProps) => {\n  const dispatch = useDispatch();\n\n  const zoomSettings = useSelector(zoomSettingsSelector);\n\n  const onZoomModeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt((event.target as HTMLInputElement).value);\n\n    dispatch(\n      slice.actions.setZoomMode({\n        zoomMode: value as ZoomMode,\n      })\n    );\n  };\n\n  const onCenterChange = () => {\n    dispatch(\n      slice.actions.setZoomAutomaticCentering({\n        zoomAutomaticCentering: !zoomSettings.zoomAutomaticCentering,\n      })\n    );\n  };\n\n  return (\n    <List>\n      <ListItem dense>\n        <ListItemText primary={\"Mode\"} secondary={\"Select the zoom mode.\"} />\n\n        <RadioGroup\n          defaultValue={ZoomMode.In}\n          name=\"zoom-mode\"\n          onChange={onZoomModeChange}\n          value={zoomSettings.zoomMode}\n        >\n          <FormControlLabel\n            control={<Radio tabIndex={-1} />}\n            label=\"Zoom In\"\n            value={ZoomMode.In}\n          />\n\n          <FormControlLabel\n            control={<Radio tabIndex={-1} />}\n            label=\"Zoom out\"\n            value={ZoomMode.Out}\n          />\n        </RadioGroup>\n      </ListItem>\n\n      <ListItem>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={zoomSettings.zoomAutomaticCentering}\n              onChange={onCenterChange}\n              name=\"center\"\n            />\n          }\n          label=\"Center image automatically\"\n        />\n      </ListItem>\n\n      <ListItem>\n        <Button onClick={handleRevert} variant=\"contained\">\n          Actual Size\n        </Button>\n      </ListItem>\n    </List>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst toolOptionsDrawerWidth = 240;\n\nexport const useStyles = makeStyles((theme) => ({\n  content: {\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n    width: \"100%\",\n  },\n  stage: {\n    margin: \"8px\",\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n  },\n  parent: {\n    cursor: \"crosshair\",\n    // width: `calc(100% - ${toolOptionsDrawerWidth}px)`\n  },\n}));\n","import { EllipticalAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype EllipticalSelectionProps = {\n  operator: EllipticalAnnotationTool;\n  scale: number;\n};\n\nexport const EllipticalSelection = ({\n  operator,\n  scale,\n}: EllipticalSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  if (!operator.center || !operator.radius) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Ellipse\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        radiusX={operator.radius.x}\n        radiusY={operator.radius.y}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n        x={operator.center.x}\n        y={operator.center.y}\n      />\n\n      <ReactKonva.Ellipse\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        radiusX={operator.radius.x}\n        radiusY={operator.radius.y}\n        stroke=\"white\"\n        strokeWidth={1 / scale}\n        x={operator.center.x}\n        y={operator.center.y}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { LassoAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype LassoSelectionProps = {\n  operator: LassoAnnotationTool;\n  scale: number;\n};\n\nexport const LassoSelection = ({ operator, scale }: LassoSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  return (\n    <ReactKonva.Group>\n      {operator.origin && (\n        <ReactKonva.Circle\n          fill=\"white\"\n          radius={3 / scale}\n          stroke=\"black\"\n          strokeWidth={1 / scale}\n          x={operator.origin.x}\n          y={operator.origin.y}\n        />\n      )}\n\n      {operator.anchor && (\n        <ReactKonva.Circle\n          fill=\"black\"\n          radius={3 / scale}\n          stroke=\"white\"\n          strokeWidth={1 / scale}\n          x={operator.anchor.x}\n          y={operator.anchor.y}\n        />\n      )}\n\n      <ReactKonva.Line\n        points={operator.buffer}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n      />\n\n      <ReactKonva.Line\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        stroke=\"white\"\n        points={operator.buffer}\n        strokeWidth={1 / scale}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { MagneticAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype MagneticSelectionProps = {\n  operator: MagneticAnnotationTool;\n  scale: number;\n};\n\nexport const MagneticSelection = ({\n  operator,\n  scale,\n}: MagneticSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  if (!operator.origin) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Circle\n        fill=\"white\"\n        radius={3 / scale}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n        x={operator.origin.x}\n        y={operator.origin.y}\n      />\n\n      {operator.anchor && (\n        <ReactKonva.Circle\n          fill=\"black\"\n          radius={3 / scale}\n          stroke=\"white\"\n          strokeWidth={1 / scale}\n          x={operator.anchor.x}\n          y={operator.anchor.y}\n        />\n      )}\n\n      <ReactKonva.Line\n        points={operator.buffer}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n      />\n\n      <ReactKonva.Line\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        stroke=\"white\"\n        points={operator.buffer}\n        strokeWidth={1 / scale}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import { ObjectAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype ObjectSelectionProps = {\n  operator: ObjectAnnotationTool;\n  scale: number;\n};\n\nexport const ObjectSelection = ({ operator, scale }: ObjectSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  if (!operator.origin || !operator.width || !operator.height) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Rect\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        height={operator.height}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n        width={operator.width}\n        x={operator.origin.x}\n        y={operator.origin.y}\n      />\n\n      <ReactKonva.Rect\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        height={operator.height}\n        stroke=\"white\"\n        strokeWidth={1 / scale}\n        width={operator.width}\n        x={operator.origin.x}\n        y={operator.origin.y}\n      />\n\n      <ReactKonva.Line\n        stroke=\"white\"\n        points={operator.points}\n        strokeWidth={1 / scale}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { PolygonalAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype PolygonalSelectionProps = {\n  operator: PolygonalAnnotationTool;\n  scale: number;\n};\n\nexport const PolygonalSelection = ({\n  operator,\n  scale,\n}: PolygonalSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  return (\n    <ReactKonva.Group>\n      {operator.origin && (\n        <ReactKonva.Circle\n          fill=\"white\"\n          radius={3 / scale}\n          stroke=\"black\"\n          strokeWidth={1 / scale}\n          x={operator.origin.x}\n          y={operator.origin.y}\n        />\n      )}\n\n      {operator.anchor && (\n        <ReactKonva.Circle\n          fill=\"black\"\n          radius={3 / scale}\n          stroke=\"white\"\n          strokeWidth={1 / scale}\n          x={operator.anchor.x}\n          y={operator.anchor.y}\n        />\n      )}\n\n      <ReactKonva.Line\n        points={operator.buffer}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n      />\n\n      <ReactKonva.Line\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        stroke=\"white\"\n        points={operator.buffer}\n        strokeWidth={1 / scale}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import { RectangularAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\n\ntype RectangularSelectionProps = {\n  operator: RectangularAnnotationTool;\n  scale: number;\n};\n\nexport const RectangularSelection = ({\n  operator,\n  scale,\n}: RectangularSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  if (!operator.origin || !operator.width || !operator.height) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Rect\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        height={operator.height}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n        width={operator.width}\n        x={operator.origin.x}\n        y={operator.origin.y}\n      />\n\n      <ReactKonva.Rect\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        height={operator.height}\n        stroke=\"white\"\n        strokeWidth={1 / scale}\n        width={operator.width}\n        x={operator.origin.x}\n        y={operator.origin.y}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import { ColorAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport * as ReactKonva from \"react-konva\";\nimport React, { useEffect, useState } from \"react\";\n\ntype ColorSelectionProps = {\n  operator: ColorAnnotationTool;\n};\n\nexport const ColorSelection = ({ operator }: ColorSelectionProps) => {\n  const [image, setImage] = useState<HTMLImageElement>();\n\n  useEffect(() => {\n    const image = new Image();\n    image.src = operator.overlayData;\n    setImage(image);\n  }, [operator.overlayData]);\n\n  if (!operator.overlayData || !operator.offset) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Image\n        image={image}\n        x={operator.offset.x}\n        y={operator.offset.y}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import { QuickAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport * as ReactKonva from \"react-konva\";\nimport React, { useEffect, useState } from \"react\";\n\ntype QuickSelectionProps = {\n  operator: QuickAnnotationTool;\n};\n\nexport const QuickSelection = ({ operator }: QuickSelectionProps) => {\n  const [image, setImage] = useState<HTMLImageElement>();\n\n  useEffect(() => {\n    if (!operator.currentMask) return;\n\n    const image = new Image();\n    image.src = operator.currentMask.toDataURL();\n    setImage(image);\n  }, [operator.currentMask]);\n\n  if (!operator.currentMask) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Image image={image} />\n    </ReactKonva.Group>\n  );\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { PenAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool/PenAnnotationTool\";\n\ntype PenSelectionProps = {\n  operator: PenAnnotationTool;\n  scale: number;\n};\n\nexport const PenSelection = ({ operator, scale }: PenSelectionProps) => {\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Line\n        points={operator.buffer}\n        stroke=\"red\"\n        strokeWidth={operator.brushSize}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { useMarchingAnts } from \"../../../../../../hooks\";\nimport { ZoomTool } from \"../../../../../../image/Tool/ZoomTool\";\n\ntype ZoomSelectionProps = {\n  operator: ZoomTool;\n  scale: number;\n};\n\nexport const ZoomSelection = ({ operator, scale }: ZoomSelectionProps) => {\n  const dashOffset = useMarchingAnts();\n\n  if (!operator.minimum || !operator.maximum || !operator.zooming) return null;\n\n  return (\n    <ReactKonva.Group>\n      <ReactKonva.Rect\n        dash={[4, 2]}\n        dashOffset={-dashOffset}\n        height={operator.maximum.y - operator.minimum.y}\n        stroke=\"black\"\n        strokeWidth={1}\n        width={operator.maximum.x - operator.minimum.x}\n        x={operator.minimum.x}\n        y={operator.minimum.y}\n      />\n\n      <ReactKonva.Rect\n        dash={[4, 2]}\n        dashOffset={-dashOffset}\n        height={operator.maximum.y - operator.minimum.y}\n        stroke=\"white\"\n        strokeWidth={1}\n        width={operator.maximum.x - operator.minimum.x}\n        x={operator.minimum.x}\n        y={operator.minimum.y}\n      />\n    </ReactKonva.Group>\n  );\n};\n","import React from \"react\";\nimport {\n  ColorAnnotationTool,\n  EllipticalAnnotationTool,\n  LassoAnnotationTool,\n  MagneticAnnotationTool,\n  ObjectAnnotationTool,\n  PolygonalAnnotationTool,\n  QuickAnnotationTool,\n  RectangularAnnotationTool,\n  AnnotationTool,\n} from \"../../../../../../image/Tool/AnnotationTool\";\nimport { EllipticalSelection } from \"../EllipticalSelection\";\nimport { ToolType } from \"../../../../../../types/ToolType\";\nimport { LassoSelection } from \"../LassoSelection\";\nimport { MagneticSelection } from \"../MagneticSelection\";\nimport { ObjectSelection } from \"../ObjectSelection\";\nimport { PolygonalSelection } from \"../PolygonalSelection\";\nimport { RectangularSelection } from \"../RectangularSelection\";\nimport { ColorSelection } from \"../ColorSelection/ColorSelection\";\nimport { QuickSelection } from \"../QuickSelection/QuickSelection\";\nimport { PenSelection } from \"../PenSelection\";\n\nimport { ZoomTool } from \"../../../../../../image/Tool/ZoomTool\";\nimport { PenAnnotationTool } from \"../../../../../../image/Tool/AnnotationTool\";\nimport { ZoomSelection } from \"../ZoomSelection\";\n\ntype SelectionProps = {\n  operation?: ToolType;\n  operator?: AnnotationTool | ZoomTool;\n  scale: number;\n};\n\nexport const Selection = ({ operation, operator, scale }: SelectionProps) => {\n  if (!operation || !operator) return <React.Fragment />;\n\n  switch (operation) {\n    case ToolType.ColorAnnotation:\n      return <ColorSelection operator={operator as ColorAnnotationTool} />;\n    case ToolType.EllipticalAnnotation:\n      return (\n        <EllipticalSelection\n          operator={operator as EllipticalAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.LassoAnnotation:\n      return (\n        <LassoSelection\n          operator={operator as LassoAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.MagneticAnnotation:\n      return (\n        <MagneticSelection\n          operator={operator as MagneticAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.ObjectAnnotation:\n      return (\n        <ObjectSelection\n          operator={operator as ObjectAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.PenAnnotation:\n      return (\n        <PenSelection operator={operator as PenAnnotationTool} scale={scale} />\n      );\n    case ToolType.PolygonalAnnotation:\n      return (\n        <PolygonalSelection\n          operator={operator as PolygonalAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.RectangularSelection:\n      return (\n        <RectangularSelection\n          operator={operator as RectangularAnnotationTool}\n          scale={scale}\n        />\n      );\n    case ToolType.Zoom:\n      return <ZoomSelection operator={operator as ZoomTool} scale={scale} />;\n    case ToolType.QuickAnnotation:\n      return <QuickSelection operator={operator as QuickAnnotationTool} />;\n    default:\n      return <React.Fragment />;\n  }\n};\n","import { useEffect, useState } from \"react\";\n\nexport function useKeyPress(targetKey: string) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }: { key: string }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }: { key: string }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener(\"keydown\", downHandler);\n    window.addEventListener(\"keyup\", upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n      window.removeEventListener(\"keyup\", upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n","import { State } from \"../../types/State\";\n\nexport const penSelectionBrushSizeSelector = ({ state }: { state: State }) => {\n  return state.penSelectionBrushSize;\n};\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport { useMarchingAnts } from \"../../../../../hooks\";\n\ntype SelectedContourProps = {\n  points: Array<number>;\n  scale: number;\n};\n\nexport const SelectedContour = ({ points, scale }: SelectedContourProps) => {\n  const dashOffset = useMarchingAnts();\n\n  return (\n    <React.Fragment>\n      <ReactKonva.Line\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        points={points}\n        stroke=\"black\"\n        strokeWidth={1 / scale}\n      />\n\n      <ReactKonva.Line\n        dash={[4 / scale, 2 / scale]}\n        dashOffset={-dashOffset}\n        points={points}\n        stroke=\"white\"\n        strokeWidth={1 / scale}\n      />\n    </React.Fragment>\n  );\n};\n","import { Tool } from \"../Tool\";\nimport { ZoomMode } from \"../../../types/ZoomMode\";\nimport * as _ from \"lodash\";\nimport numeral from \"numeral\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\nexport class ZoomTool extends Tool {\n  /**\n   * Automatically center the image.\n   */\n  center: boolean = false;\n\n  minimum?: { x: number; y: number };\n  maximum?: { x: number; y: number };\n\n  mode: ZoomMode = ZoomMode.In;\n\n  scale: number = 1.0;\n\n  x: number = 0;\n  y: number = 0;\n\n  zooming: boolean = false;\n\n  selected = false;\n\n  private scales: Array<number> = [0.25, 0.75, 1.0, 2.0, 4.0, 8.0, 16.0, 32.0];\n\n  get percentile(): string {\n    return numeral(this.scale).format(\"0%\");\n  }\n\n  get percentiles(): Array<string> {\n    return _.map(this.scales, (scale: number) => {\n      return numeral(scale).format(\"0%\");\n    });\n  }\n\n  /**\n   * Zoom to fit the image to the application window.\n   */\n  fit() {}\n\n  /**\n   * Zoom the image to its actual size.\n   */\n  reset() {\n    this.scale = 1.0;\n\n    this.x = 0;\n    this.y = 0;\n\n    this.selected = false;\n    this.zooming = false;\n  }\n\n  onMouseDown(position: { x: number; y: number }) {\n    this.minimum = position;\n\n    this.zooming = true;\n\n    this.selected = false;\n  }\n\n  onMouseMove(position: { x: number; y: number }) {\n    if (this.selected || !this.zooming || !this.minimum) return;\n\n    this.maximum = position;\n  }\n\n  onMouseUp(position: { x: number; y: number }) {\n    if (this.selected || !this.zooming || !this.minimum || !this.maximum)\n      return;\n\n    if (this.mode === ZoomMode.In) {\n      this.maximum = position;\n\n      this.scale = Math.abs(\n        this.image.width / (this.maximum.x - this.minimum.x)\n      );\n\n      const x =\n        this.minimum.x > this.maximum.x ? this.maximum.x : this.minimum.x;\n      const y =\n        this.minimum.y > this.maximum.y ? this.maximum.y : this.minimum.y;\n\n      this.x = -1 * x * this.scale;\n      this.y = -1 * y * this.scale;\n    }\n\n    this.selected = true;\n    this.maximum = undefined;\n    this.zooming = false;\n  }\n\n  onClick = (event: KonvaEventObject<MouseEvent>) => {\n    if (event.evt.button !== 0) return;\n\n    const stage = event.target.getStage();\n\n    if (!stage) return;\n\n    const position = stage.getPointerPosition();\n\n    if (!position) return;\n\n    if (this.mode === ZoomMode.In) {\n      if (this.scale === 32.0) return;\n\n      const index = _.findIndex(this.scales, (scale) => {\n        return this.scale < scale;\n      });\n\n      if (!index) return;\n\n      this.scale = this.scales[index];\n    } else {\n      if (this.scale === 0.25) return;\n\n      const index = _.findIndex(this.scales, (scale) => {\n        return this.scale <= scale;\n      });\n\n      if (!index) return;\n\n      this.scale = this.scales[index - 1];\n    }\n\n    this.x = position.x - position.x * this.scale;\n    this.y = position.y - position.y * this.scale;\n\n    this.selected = true;\n  };\n\n  onWheel = (event: KonvaEventObject<WheelEvent>) => {\n    const newScale = event.evt.deltaY > 0 ? this.scale * 1.1 : this.scale / 1.1;\n\n    if (newScale > 125 || newScale < 0.05) return;\n\n    const stage = event.target.getStage();\n\n    if (!stage) return;\n\n    const position = stage.getPointerPosition();\n\n    if (!position) return;\n\n    const origin = {\n      x: position.x / this.scale - stage.x() / this.scale,\n      y: position.y / this.scale - stage.y() / this.scale,\n    };\n\n    this.x = -(origin.x - position.x / newScale) * newScale;\n    this.y = -(origin.y - position.y / newScale) * newScale;\n\n    this.scale = newScale;\n  };\n}\n","import * as ReactKonva from \"react-konva\";\nimport React from \"react\";\nimport useImage from \"use-image\";\nimport Konva from \"konva\";\n\ntype ImageProps = {\n  src: string;\n};\n\nexport const Image = React.forwardRef<Konva.Image, ImageProps>(\n  ({ src }, ref) => {\n    const [image] = useImage(src, \"Anonymous\");\n\n    return (\n      <ReactKonva.Image\n        ref={ref}\n        image={image}\n        position={{ x: 0, y: 0 }}\n        width={512}\n        height={512}\n      />\n    );\n  }\n);\n","import { State } from \"../../types/State\";\n\nexport const visibleCategoriesSelector = ({ state }: { state: State }) => {\n  return state.categories\n    .filter((category) => category.visible)\n    .map((category) => {\n      return category.id;\n    });\n};\n","import { combineReducers } from \"redux\";\nimport { slice } from \"../slices\";\n\nconst reducers = {\n  state: slice.reducer,\n};\n\nexport const reducer = combineReducers(reducers);\n","import {\n  configureStore,\n  EnhancedStore,\n  Middleware,\n  StoreEnhancer,\n} from \"@reduxjs/toolkit\";\nimport logger from \"redux-logger\";\nimport { reducer } from \"../reducer\";\nimport * as Sentry from \"@sentry/react\";\n\nconst sentryReduxEnhancer = Sentry.createReduxEnhancer({});\n\nconst enhancers: StoreEnhancer[] = [sentryReduxEnhancer];\n\nconst middleware: Middleware[] = [logger];\n\nconst preloadedState = {};\n\nconst options = {\n  devTools: true,\n  enhancers: enhancers,\n  middleware: middleware,\n  preloadedState: preloadedState,\n  reducer: reducer,\n};\n\nexport const store: EnhancedStore = configureStore(options);\n","import React, { useEffect, useRef } from \"react\";\nimport { Category } from \"../../../../../../types/Category\";\nimport * as ReactKonva from \"react-konva\";\nimport * as _ from \"lodash\";\nimport { Selection } from \"../../../../../../types/Selection\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { categoriesSelector } from \"../../../../../../store/selectors\";\nimport Konva from \"konva\";\nimport { AnnotationTool } from \"../../../../../../image/Tool\";\nimport {\n  setSelectedAnnotationNode,\n  setSelectedAnnotation,\n  setSeletedCategory,\n} from \"../../../../../../store\";\n\ntype AnnotationShapeProps = {\n  annotation: Selection;\n  annotationTool?: AnnotationTool;\n};\n\nexport const AnnotationShape = ({\n  annotation,\n  annotationTool,\n}: AnnotationShapeProps) => {\n  const ref = useRef<Konva.Line | null>(null);\n\n  useEffect(() => {\n    ref.current = new Konva.Line();\n  }, []);\n\n  const dispatch = useDispatch();\n\n  const categories = useSelector(categoriesSelector);\n\n  const fill = _.find(\n    categories,\n    (category: Category) => category.id === annotation.categoryId\n  )?.color;\n\n  const onContextMenu = (event: Konva.KonvaEventObject<MouseEvent>) => {\n    event.evt.preventDefault();\n\n    if (!annotationTool) return;\n\n    if (annotationTool.annotating) return;\n\n    annotationTool.deselect();\n\n    if (!ref || !ref.current) return;\n\n    dispatch(\n      setSeletedCategory({\n        selectedCategory: annotation.categoryId,\n      })\n    );\n\n    dispatch(\n      setSelectedAnnotation({\n        selectedAnnotation: annotation.id,\n      })\n    );\n\n    dispatch(\n      setSelectedAnnotationNode({\n        selectedAnnotationNode: ref.current._id,\n      })\n    );\n  };\n\n  return (\n    <ReactKonva.Line\n      closed\n      fill={fill}\n      id={annotation.id}\n      onContextMenu={onContextMenu}\n      opacity={0.5}\n      points={annotation.contour}\n      ref={ref}\n      strokeWidth={1}\n    />\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Selection } from \"../../../../../../types/Selection\";\nimport { useSelector } from \"react-redux\";\nimport { visibleCategoriesSelector } from \"../../../../../../store/selectors/visibleCategoriesSelector\";\nimport { AnnotationShape } from \"../AnnotationShape\";\nimport { imageInstancesSelector } from \"../../../../../../store/selectors\";\nimport { AnnotationTool } from \"../../../../../../image/Tool\";\n\ntype AnnotationShapesProps = {\n  annotationTool?: AnnotationTool;\n};\n\nexport const AnnotationShapes = ({ annotationTool }: AnnotationShapesProps) => {\n  const annotations = useSelector(imageInstancesSelector);\n\n  const visibleCategories = useSelector(visibleCategoriesSelector);\n\n  const [visibleAnnotations, setVisibleAnnotations] = useState<\n    Array<Selection>\n  >([]);\n\n  useEffect(() => {\n    if (!annotations) return;\n\n    setVisibleAnnotations(\n      annotations.filter((annotation: Selection) =>\n        visibleCategories.includes(annotation.categoryId)\n      )\n    );\n  }, [annotations, visibleCategories]);\n\n  return (\n    <React.Fragment>\n      {visibleAnnotations.map((annotation: Selection) => (\n        <AnnotationShape\n          annotation={annotation}\n          key={annotation.id}\n          annotationTool={annotationTool}\n        />\n      ))}\n    </React.Fragment>\n  );\n};\n","import { State } from \"../../types/State\";\n\nexport const selectedAnnotationSelector = ({\n  state,\n}: {\n  state: State;\n}): string | undefined => {\n  return state.selectedAnnotation;\n};\n","import * as ReactKonva from \"react-konva\";\nimport * as _ from \"lodash\";\nimport Konva from \"konva\";\nimport React, { useEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport { ToolType } from \"../../../../../types/ToolType\";\nimport {\n  categoriesSelector,\n  imageInstancesSelector,\n  invertModeSelector,\n  toolTypeSelector,\n  selectionModeSelector,\n  zoomSettingsSelector,\n} from \"../../../../../store/selectors\";\nimport {\n  Provider,\n  ReactReduxContext,\n  useDispatch,\n  useSelector,\n} from \"react-redux\";\nimport { useStyles } from \"../../Content/Content.css\";\nimport { Selection } from \"../Selection\";\nimport { Category } from \"../../../../../types/Category\";\nimport { slice } from \"../../../../../store/slices\";\nimport { useKeyPress } from \"../../../../../hooks/useKeyPress\";\nimport { useAnnotationOperator } from \"../../../../../hooks\";\nimport { Selection as SelectionType } from \"../../../../../types/Selection\";\nimport { visibleCategoriesSelector } from \"../../../../../store/selectors/visibleCategoriesSelector\";\nimport { penSelectionBrushSizeSelector } from \"../../../../../store/selectors/penSelectionBrushSizeSelector\";\nimport { SelectionMode } from \"../../../../../types/SelectionMode\";\nimport { SelectedContour } from \"../SelectedContour\";\nimport { useZoomOperator } from \"../../../../../hooks/useZoomOperator\";\nimport { KonvaEventObject } from \"konva/types/Node\";\nimport { Image } from \"../Image\";\nimport { AnnotationShapes } from \"../AnnotationShapes\";\nimport { selectedAnnotationSelector } from \"../../../../../store/selectors/selectedAnnotationSelector\";\n\ntype StageProps = {\n  category: Category;\n  height?: number;\n  src: string;\n  width?: number;\n};\n\nexport const Stage = ({ category, height, src, width }: StageProps) => {\n  const imageRef = useRef<Konva.Image>(null);\n  const stageRef = useRef<Konva.Stage>(null);\n\n  const transformerRef = useRef<Konva.Transformer | null>(null);\n  const selectionLineRef = useRef<Konva.Line | null>(null);\n  const selectingRef = useRef<Konva.Line | null>(null);\n\n  const selectionInstanceRef = useRef<SelectionType | null>(null);\n\n  const classes = useStyles();\n\n  const tool = useSelector(toolTypeSelector);\n\n  const penSelectionBrushSize = useSelector(penSelectionBrushSizeSelector);\n\n  const selectionMode = useSelector(selectionModeSelector);\n\n  const invertMode = useSelector(invertModeSelector);\n\n  const [annotationOperator] = useAnnotationOperator(src);\n\n  const [selectionId, setSelectionId] = useState<string>();\n  const [selected, setSelected] = useState<boolean>(false);\n  const [selecting, setSelecting] = useState<boolean>(false);\n\n  const [, update] = useReducer((x) => x + 1, 0);\n\n  const dispatch = useDispatch();\n\n  const instances = useSelector(imageInstancesSelector);\n\n  const zoomSettings = useSelector(zoomSettingsSelector);\n\n  const enterPress = useKeyPress(\"Enter\");\n  const escapePress = useKeyPress(\"Escape\");\n  const deletePress = useKeyPress(\"Delete\");\n  const backspacePress = useKeyPress(\"Backspace\");\n\n  const { zoomOperator, onZoomClick, onZoomWheel } = useZoomOperator(\n    tool,\n    src,\n    zoomSettings\n  );\n\n  const onClick = (event: KonvaEventObject<MouseEvent>) => {\n    switch (tool) {\n      case ToolType.Zoom:\n        onZoomClick(event);\n    }\n  };\n\n  const onWheel = (event: KonvaEventObject<WheelEvent>) => {\n    switch (tool) {\n      case ToolType.Zoom:\n        onZoomWheel(event);\n    }\n  };\n\n  useEffect(() => {\n    if (tool === ToolType.Zoom) return;\n\n    if (!selectionId || !annotationOperator) return;\n\n    if (!instances) return;\n\n    const selectedInstance: SelectionType = instances.filter(\n      (instance: SelectionType) => {\n        return instance.id === selectionId;\n      }\n    )[0];\n\n    if (\n      !selectedInstance ||\n      !selectedInstance.mask ||\n      !selectedInstance.contour\n    )\n      return;\n\n    const invertedMask = annotationOperator.invert(selectedInstance.mask, true);\n\n    const invertedContour = annotationOperator.invertContour(\n      selectedInstance.contour\n    );\n\n    const invertedBoundingBox = annotationOperator.computeBoundingBoxFromContours(\n      invertedContour\n    );\n\n    const instance = instances.filter((instance: SelectionType) => {\n      return instance.id === selectionId;\n    })[0];\n\n    if (!selectionInstanceRef || !selectionInstanceRef.current) return;\n\n    selectionInstanceRef.current = {\n      ...instance,\n      boundingBox: invertedBoundingBox,\n      contour: invertedContour,\n      mask: invertedMask,\n    };\n\n    annotationOperator.mask = invertedMask;\n    annotationOperator.boundingBox = invertedBoundingBox;\n    annotationOperator.contour = invertedContour;\n\n    setSelected(true);\n  }, [invertMode]);\n\n  useEffect(() => {\n    if (tool === ToolType.Zoom) return;\n\n    if (selectionMode === SelectionMode.New) return; // \"New\" mode\n\n    setSelecting(false);\n\n    if (!selected || !annotationOperator || !selectionId || !instances) return;\n\n    let combinedMask, combinedContour;\n\n    const selectedInstance = selectionInstanceRef.current;\n\n    if (!selectedInstance) return;\n\n    if (selectionMode === SelectionMode.Add) {\n      [combinedMask, combinedContour] = annotationOperator.add(\n        selectedInstance.mask\n      );\n    } else if (selectionMode === SelectionMode.Subtract) {\n      [combinedMask, combinedContour] = annotationOperator.subtract(\n        selectedInstance.mask\n      );\n    } else if (selectionMode === SelectionMode.Intersect) {\n      [combinedMask, combinedContour] = annotationOperator.intersect(\n        selectedInstance.mask\n      );\n    }\n\n    annotationOperator.mask = combinedMask;\n    annotationOperator.contour = combinedContour;\n\n    if (!combinedContour) return;\n    annotationOperator.boundingBox = annotationOperator.computeBoundingBoxFromContours(\n      combinedContour\n    );\n  }, [selectionMode, selected]);\n\n  useEffect(() => {\n    if (tool === ToolType.Zoom) return;\n\n    if (selectionMode === SelectionMode.New) return;\n\n    if (!selecting) return;\n\n    if (!selectionId) return;\n\n    transformerRef.current?.detach();\n\n    //remove the existing Operator since it's essentially been replaced\n    dispatch(\n      slice.actions.deleteImageInstance({\n        id: selectionId,\n      })\n    );\n  }, [selecting]);\n\n  useEffect(() => {\n    if (!selectionId) return;\n\n    if (!selectionInstanceRef || !selectionInstanceRef.current) return;\n\n    const others = instances?.filter(\n      (instance: SelectionType) => instance.id !== selectionId\n    );\n\n    const updated: SelectionType = {\n      ...instances?.filter(\n        (instance: SelectionType) => instance.id === selectionId\n      )[0],\n      categoryId: category.id,\n    } as SelectionType;\n\n    dispatch(\n      slice.actions.setImageInstances({\n        instances: [...(others as Array<SelectionType>), updated],\n      })\n    );\n\n    selectionInstanceRef.current = updated;\n  }, [category]);\n\n  useEffect(() => {\n    if (!annotationOperator) return;\n\n    if (annotationOperator.annotated) setSelected(annotationOperator.annotated);\n\n    if (selectionMode === SelectionMode.New) return;\n\n    if (annotationOperator.annotating)\n      setSelecting(annotationOperator.annotating);\n  });\n\n  useEffect(() => {\n    if (tool !== ToolType.PenAnnotation) return;\n\n    // @ts-ignore\n    annotationOperator.brushSize = penSelectionBrushSize;\n  }, [penSelectionBrushSize]);\n\n  useEffect(() => {\n    if (!annotationOperator || !annotationOperator.contour) return;\n\n    if (!stageRef || !stageRef.current) return;\n\n    const transform = stageRef.current.getAbsoluteTransform().copy();\n\n    const scaledContour: Array<number> = _.flatten(\n      _.chunk(annotationOperator.contour, 2).map((el: Array<number>) => {\n        const transformed = transform.point({ x: el[0], y: el[1] });\n        return [transformed.x, transformed.y];\n      })\n    );\n\n    selectingRef.current = new Konva.Line<Konva.LineConfig>({\n      points: scaledContour,\n    });\n  }, [annotationOperator?.contour, selected]);\n\n  useEffect(() => {\n    if (!selected) return;\n\n    if (!transformerRef || !transformerRef.current) return;\n\n    if (!selectingRef || !selectingRef.current) return;\n\n    if (!annotationOperator || !annotationOperator.contour) return;\n\n    transformerRef.current.nodes([selectingRef.current]);\n\n    const layer = transformerRef.current.getLayer();\n\n    if (!layer) return;\n\n    layer.batchDraw();\n\n    if (!annotationOperator) return;\n\n    annotationOperator.annotate(category);\n\n    if (!annotationOperator.annotation) return;\n    selectionInstanceRef.current = annotationOperator.annotation;\n  }, [selected]);\n\n  const selectedAnnotation = useSelector(selectedAnnotationSelector);\n\n  /*\n   * Connect Konva.Transformer to selected annotation Konva.Node\n   */\n  useEffect(() => {\n    if (!stageRef || !stageRef.current) return;\n\n    if (!selectedAnnotation) return;\n\n    const node = stageRef.current.findOne(`#${selectedAnnotation}`);\n\n    if (!transformerRef || !transformerRef.current) return;\n\n    transformerRef.current.nodes([node]);\n  }, [selectedAnnotation]);\n\n  const getRelativePointerPosition = (position: { x: number; y: number }) => {\n    if (!stageRef || !stageRef.current) return;\n\n    const transform = stageRef.current.getAbsoluteTransform().copy();\n\n    transform.invert();\n\n    return transform.point(position);\n  };\n\n  //FIXME not using useMemo() because could not pass event argument to it\n  const onMouseDown = (event: Konva.KonvaEventObject<MouseEvent>) => {\n    if (event.evt.button === 0) {\n      // left click only\n      if (!annotationOperator || !stageRef || !stageRef.current) return;\n\n      const position = stageRef.current.getPointerPosition();\n\n      if (!position) return;\n\n      const relative = getRelativePointerPosition(position);\n\n      if (!relative) return;\n\n      if (tool === ToolType.Zoom) {\n        zoomOperator?.onMouseDown(relative);\n      } else {\n        annotationOperator.onMouseDown(relative);\n      }\n\n      update();\n    }\n  };\n\n  const onMouseMove = useMemo(() => {\n    const func = () => {\n      if (!annotationOperator || !stageRef || !stageRef.current) return;\n\n      const position = stageRef.current.getPointerPosition();\n\n      if (!position) return;\n\n      const relative = getRelativePointerPosition(position);\n\n      if (!relative) return;\n\n      if (tool === ToolType.Zoom) {\n        zoomOperator?.onMouseMove(relative);\n      } else {\n        annotationOperator.onMouseMove(relative);\n      }\n\n      update();\n    };\n\n    const throttled = _.throttle(func, 5);\n\n    return () => throttled();\n  }, [annotationOperator, tool, zoomOperator]);\n\n  const onMouseUp = useMemo(() => {\n    const func = () => {\n      if (!annotationOperator || !stageRef || !stageRef.current) return;\n\n      const position = stageRef.current.getPointerPosition();\n\n      if (!position) return;\n\n      const relative = getRelativePointerPosition(position);\n\n      if (!relative) return;\n\n      if (tool === ToolType.Zoom) {\n        zoomOperator?.onMouseUp(relative);\n      } else {\n        annotationOperator.onMouseUp(relative);\n      }\n\n      update();\n    };\n\n    const throttled = _.throttle(func, 10);\n\n    return () => throttled();\n  }, [annotationOperator, tool, zoomOperator]);\n\n  useEffect(() => {\n    if (!enterPress) return;\n\n    if (!instances || !annotationOperator) return;\n\n    if (!selectionInstanceRef || !selectionInstanceRef.current) return;\n\n    if (selectionId === selectionInstanceRef.current.id) {\n      dispatch(\n        slice.actions.replaceImageInstance({\n          id: selectionInstanceRef.current.id,\n          instance: selectionInstanceRef.current,\n        })\n      );\n    } else {\n      dispatch(\n        slice.actions.setImageInstances({\n          instances: [...instances, selectionInstanceRef.current],\n        })\n      );\n    }\n\n    annotationOperator.deselect();\n\n    transformerRef.current?.detach();\n    transformerRef.current?.getLayer()?.batchDraw();\n\n    setSelected(false);\n\n    selectingRef.current = null;\n\n    selectionInstanceRef.current = null;\n  }, [enterPress]);\n\n  useEffect(() => {\n    if (!selected) return;\n\n    if (!escapePress) return;\n\n    if (!annotationOperator) return;\n\n    annotationOperator.deselect();\n\n    transformerRef.current?.detach();\n  }, [escapePress]);\n\n  useEffect(() => {\n    if (selectionId) {\n      if (backspacePress || escapePress || deletePress) {\n        dispatch(\n          slice.actions.deleteImageInstance({\n            id: selectionId,\n          })\n        );\n\n        transformerRef.current?.detach();\n\n        selectionInstanceRef.current = null;\n      }\n    }\n  }, [backspacePress, deletePress, escapePress]);\n\n  useEffect(() => {\n    if (!stageRef || !stageRef.current) return;\n    const content = document.querySelector(\n      \".konvajs-content\"\n    ) as HTMLDivElement;\n    if (!content) return;\n    content.style.marginLeft = \"auto\";\n    content.style.marginRight = \"auto\";\n  }, [stageRef.current]);\n\n  return (\n    <ReactReduxContext.Consumer>\n      {({ store }) => (\n        <ReactKonva.Stage\n          className={classes.stage}\n          globalCompositeOperation=\"destination-over\"\n          height={512}\n          onClick={onClick}\n          onWheel={onWheel}\n          ref={stageRef}\n          scale={{\n            x: zoomOperator ? zoomOperator.scale : 1,\n            y: zoomOperator ? zoomOperator.scale : 1,\n          }}\n          width={512}\n          x={zoomOperator ? zoomOperator.x : 0}\n          y={zoomOperator ? zoomOperator.y : 0}\n        >\n          <Provider store={store}>\n            <ReactKonva.Layer\n              onMouseDown={(event) => onMouseDown(event)}\n              onMouseMove={onMouseMove}\n              onMouseUp={onMouseUp}\n            >\n              <Image ref={imageRef} src={src} />\n\n              {!selected && tool !== ToolType.Zoom && (\n                <Selection\n                  operation={tool}\n                  operator={annotationOperator}\n                  scale={zoomOperator ? zoomOperator.scale : 1}\n                />\n              )}\n\n              {!selected && tool === ToolType.Zoom && (\n                <Selection\n                  operation={tool}\n                  operator={zoomOperator}\n                  scale={zoomOperator ? zoomOperator.scale : 1}\n                />\n              )}\n\n              {selected && annotationOperator && annotationOperator.contour && (\n                <SelectedContour\n                  points={annotationOperator.contour}\n                  scale={zoomOperator ? zoomOperator.scale : 1}\n                />\n              )}\n\n              {selectionMode !== SelectionMode.New &&\n                annotationOperator &&\n                annotationOperator.annotating &&\n                !annotationOperator.annotated &&\n                selectionInstanceRef &&\n                selectionInstanceRef.current && (\n                  <SelectedContour\n                    points={selectionInstanceRef.current.contour}\n                    scale={zoomOperator ? zoomOperator.scale : 1}\n                  />\n                )}\n\n              <AnnotationShapes annotationTool={annotationOperator} />\n\n              <ReactKonva.Transformer ref={transformerRef} />\n            </ReactKonva.Layer>\n          </Provider>\n        </ReactKonva.Stage>\n      )}\n    </ReactReduxContext.Consumer>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport * as ImageJS from \"image-js\";\nimport { ToolType } from \"../../types/ToolType\";\nimport {\n  ColorAnnotationTool,\n  EllipticalAnnotationTool,\n  LassoAnnotationTool,\n  MagneticAnnotationTool,\n  ObjectAnnotationTool,\n  PenAnnotationTool,\n  PolygonalAnnotationTool,\n  QuickAnnotationTool,\n  RectangularAnnotationTool,\n  AnnotationTool,\n} from \"../../image/Tool\";\nimport { useSelector } from \"react-redux\";\nimport { toolTypeSelector } from \"../../store/selectors\";\n\nexport const useAnnotationOperator = (src: string) => {\n  const operation = useSelector(toolTypeSelector);\n\n  const [operator, setOperator] = useState<AnnotationTool>();\n\n  useEffect(() => {\n    ImageJS.Image.load(src).then((image: ImageJS.Image) => {\n      switch (operation) {\n        case ToolType.ColorAnnotation:\n          setOperator(new ColorAnnotationTool(image));\n\n          return;\n        case ToolType.EllipticalAnnotation:\n          setOperator(new EllipticalAnnotationTool(image));\n\n          return;\n        case ToolType.LassoAnnotation:\n          setOperator(new LassoAnnotationTool(image));\n\n          return;\n        case ToolType.MagneticAnnotation:\n          setOperator(new MagneticAnnotationTool(image));\n\n          return;\n        case ToolType.ObjectAnnotation:\n          ObjectAnnotationTool.compile(image).then(\n            (operator: ObjectAnnotationTool) => {\n              setOperator(operator);\n            }\n          );\n\n          return;\n        case ToolType.PenAnnotation:\n          PenAnnotationTool.setup(image, 8).then(\n            (operator: PenAnnotationTool) => {\n              setOperator(operator);\n            }\n          );\n\n          return;\n        case ToolType.PolygonalAnnotation:\n          setOperator(new PolygonalAnnotationTool(image));\n\n          return;\n        case ToolType.QuickAnnotation:\n          const quickSelectionOperator = QuickAnnotationTool.setup(image);\n          setOperator(quickSelectionOperator);\n\n          return;\n        case ToolType.RectangularSelection:\n          setOperator(new RectangularAnnotationTool(image));\n\n          return;\n      }\n    });\n  }, [operation, src]);\n\n  return [operator];\n};\n","import { useEffect, useReducer, useRef, useState } from \"react\";\nimport { ToolType } from \"../../types/ToolType\";\nimport { ZoomTool } from \"../../image/Tool/ZoomTool\";\nimport { ZoomSettings } from \"../../types/ZoomSettings\";\nimport * as ImageJS from \"image-js\";\nimport { KonvaEventObject } from \"konva/types/Node\";\n\nexport const useZoomOperator = (\n  operation: ToolType,\n  src: string,\n  zoomSettings: ZoomSettings\n) => {\n  const [operator, setOperator] = useState<ZoomTool>();\n  const [, update] = useReducer((x) => x + 1, 0);\n\n  const onZoomClick = (event: KonvaEventObject<MouseEvent>) => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (!operator) return;\n\n    operator.onClick(event);\n\n    update();\n  };\n\n  const onZoomWheel = (event: KonvaEventObject<WheelEvent>) => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (!operator) return;\n\n    operator.onWheel(event);\n\n    update();\n  };\n\n  useEffect(() => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (operator) return;\n\n    ImageJS.Image.load(src).then((image: ImageJS.Image) => {\n      setOperator(new ZoomTool(image));\n    });\n  }, [operation, src]);\n\n  useEffect(() => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (!operator) return;\n\n    // @ts-ignore\n    operator.mode = zoomSettings.zoomMode;\n  }, [zoomSettings.zoomMode]);\n\n  useEffect(() => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (!operator) return;\n\n    operator.reset();\n\n    update();\n  }, [zoomSettings.zoomReset]);\n\n  useEffect(() => {\n    if (operation !== ToolType.Zoom) return;\n\n    if (!operator) return;\n    // @ts-ignore\n    operator.center = zoomSettings.zoomAutomaticCentering;\n  }, [zoomSettings.zoomAutomaticCentering]);\n\n  return {\n    zoomOperator: operator,\n    onZoomClick: onZoomClick,\n    onZoomWheel: onZoomWheel,\n  };\n};\n","import React, { useRef } from \"react\";\nimport { Stage } from \"../Stage\";\nimport { imageSelector } from \"../../../../store/selectors\";\nimport { useSelector } from \"react-redux\";\nimport { useStyles } from \"./Content.css\";\nimport { Category } from \"../../../../types/Category\";\nimport { useBoundingClientRect } from \"../../../../hooks/useBoundingClientRect\";\n\ntype ContentProps = {\n  category: Category;\n};\n\nexport const Content = ({ category }: ContentProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n\n  const boundingClientRect = useBoundingClientRect(ref);\n\n  const image = useSelector(imageSelector);\n\n  const classes = useStyles();\n\n  return (\n    <main className={classes.content} ref={ref}>\n      <div className={classes.toolbar} />\n\n      <div className={classes.parent}>\n        <Stage\n          category={category}\n          height={boundingClientRect?.height}\n          src={image!.src}\n          width={boundingClientRect?.width}\n        />\n      </div>\n    </main>\n  );\n};\n","import useResizeObserver from \"@react-hook/resize-observer\";\nimport React, { useLayoutEffect, useState } from \"react\";\n\nexport const useBoundingClientRect = (target: React.RefObject<HTMLElement>) => {\n  const [boundingClientRect, setBoundingClientRect] = useState<DOMRect>();\n\n  useLayoutEffect(() => {\n    if (!target || !target.current) return;\n\n    setBoundingClientRect(target.current.getBoundingClientRect());\n  }, [target]);\n\n  useResizeObserver(target, (entry: ResizeObserverEntry) => {\n    setBoundingClientRect(entry.contentRect as DOMRect);\n  });\n\n  return boundingClientRect;\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst settingsWidth = 240;\nconst operationsWidth = 56;\n\nexport const useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  root: {\n    display: \"flex\",\n  },\n  content: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(3),\n    width: \"100%\",\n  },\n  settings: {\n    width: settingsWidth,\n    flexShrink: 0,\n  },\n  settingsPaper: {\n    width: settingsWidth,\n    right: operationsWidth,\n  },\n  toolbar: {\n    ...theme.mixins.toolbar,\n  },\n  settingsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  operations: {\n    flexShrink: 0,\n    whiteSpace: \"nowrap\",\n    width: operationsWidth,\n  },\n  operationsPaper: {\n    width: operationsWidth,\n  },\n  operationsToolbar: {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n  },\n  logo: {\n    flexGrow: 1,\n  },\n  applicationDrawer: {\n    flexShrink: 0,\n    width: theme.spacing(32),\n  },\n  applicationDrawerHeader: {\n    ...theme.mixins.toolbar,\n    alignItems: \"center\",\n    display: \"flex\",\n    paddingLeft: theme.spacing(3),\n  },\n  applicationDrawerPaper: {\n    zIndex: 0,\n    width: theme.spacing(32),\n  },\n}));\n","import React from \"react\";\nimport { SelectionOptions } from \"../SelectionOptions\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { slice } from \"../../../../store/slices\";\nimport { penSelectionBrushSizeSelector } from \"../../../../store/selectors/penSelectionBrushSizeSelector\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\n\nexport const PenSelectionOptions = () => {\n  const dispatch = useDispatch();\n\n  const penSelectionBrushSizeBrushSize = useSelector(\n    penSelectionBrushSizeSelector\n  );\n\n  const onChange = (event: any, changed: number | number[]) => {\n    const payload = { penSelectionBrushSize: changed as number };\n\n    dispatch(slice.actions.setPenSelectionBrushSize(payload));\n  };\n\n  return (\n    <React.Fragment>\n      <SelectionOptions />\n\n      <Divider />\n\n      <List>\n        <ListItem dense>\n          <ListItemText\n            primary={\"Brush size\"}\n            secondary={\n              <Slider\n                aria-labelledby=\"pen-selection-brush-size\"\n                onChange={onChange}\n                value={penSelectionBrushSizeBrushSize}\n              />\n            }\n          />\n        </ListItem>\n      </List>\n    </React.Fragment>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Category } from \"../../../types/Category\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { Image } from \"../../../types/Image\";\nimport { ToolType } from \"../../../types/ToolType\";\nimport {\n  imageSelector,\n  toolTypeSelector,\n  selectedCategroySelector,\n  unknownCategroySelector,\n  zoomSettingsSelector,\n} from \"../../../store/selectors\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ImageViewerAppBar } from \"../ImageViewerAppBar\";\nimport { Categories } from \"../Categories\";\nimport { OperationOptions } from \"../OperationOptions\";\nimport { SelectionOptions } from \"../OperationOptions/SelectionOptions\";\nimport { Operations } from \"../Operations\";\nimport { ZoomOptions } from \"../OperationOptions/ZoomOptions\";\nimport { slice } from \"../../../store/slices\";\nimport { Content } from \"../Content\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { useStyles } from \"./ImageViewer.css\";\nimport { PenSelectionOptions } from \"../OperationOptions/PenSelectionOptions\";\nimport {\n  ColorAdjustmentIcon,\n  ColorSelectionIcon,\n  EllipticalSelectionIcon,\n  HandIcon,\n  LassoSelectionIcon,\n  MagneticSelectionIcon,\n  ObjectSelectionIcon,\n  PenSelectionIcon,\n  PolygonalSelectionIcon,\n  QuickSelectionIcon,\n  RectangularSelectionIcon,\n  ZoomIcon,\n} from \"../../icons\";\nimport { theme } from \"./theme\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport { useTranslation } from \"react-i18next\";\n\ntype ImageViewerProps = {\n  image?: Image;\n};\n\nexport const ImageViewer = (props: ImageViewerProps) => {\n  const dispatch = useDispatch();\n\n  const zoomSettings = useSelector(zoomSettingsSelector);\n\n  const handleZoomReset = () => {\n    dispatch(\n      slice.actions.setZoomReset({ zoomReset: !zoomSettings.zoomReset })\n    );\n  };\n\n  const { t, i18n } = useTranslation();\n\n  const operations = [\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <ColorAdjustmentIcon />,\n      method: ToolType.ColorAdjustment,\n      name: t(\"Color adjustment\"),\n      options: <React.Fragment />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <RectangularSelectionIcon />,\n      method: ToolType.RectangularSelection,\n      name: \"Rectangular selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <EllipticalSelectionIcon />,\n      method: ToolType.EllipticalAnnotation,\n      name: \"Elliptical selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <PenSelectionIcon />,\n      method: ToolType.PenAnnotation,\n      name: \"Pen selection\",\n      options: <PenSelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <LassoSelectionIcon />,\n      method: ToolType.LassoAnnotation,\n      name: \"Lasso selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <PolygonalSelectionIcon />,\n      method: ToolType.PolygonalAnnotation,\n      name: \"Polygonal selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <MagneticSelectionIcon />,\n      method: ToolType.MagneticAnnotation,\n      name: \"Magnetic selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <ColorSelectionIcon />,\n      method: ToolType.ColorAnnotation,\n      name: \"Color selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <QuickSelectionIcon />,\n      method: ToolType.QuickAnnotation,\n      name: \"Quick selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <ObjectSelectionIcon />,\n      method: ToolType.ObjectAnnotation,\n      name: \"Object selection\",\n      options: <SelectionOptions />,\n    },\n    {\n      description: \"Nam a facilisis velit, sit amet interdum ante. In sodales.\",\n      icon: <HandIcon />,\n      method: ToolType.Hand,\n      name: \"Hand\",\n      options: <React.Fragment />,\n    },\n    {\n      description: \"Description of zoom here.\",\n      icon: <ZoomIcon />,\n      method: ToolType.Zoom,\n      name: \"Zoom\",\n      options: <ZoomOptions handleRevert={handleZoomReset} />,\n    },\n  ];\n\n  useEffect(() => {\n    if (props.image) {\n      dispatch(slice.actions.setImage({ image: props.image }));\n    }\n  }, [dispatch, props.image]);\n\n  const image = useSelector(imageSelector);\n\n  const activeOperation = useSelector(toolTypeSelector);\n\n  const classes = useStyles();\n\n  const unknownCategory = useSelector(unknownCategroySelector);\n\n  const activeCategory = useSelector(selectedCategroySelector);\n\n  const onCategoryClick = (\n    event: React.MouseEvent<HTMLDivElement>,\n    category: Category\n  ) => {\n    dispatch(\n      slice.actions.setSeletedCategory({\n        selectedCategory: category.id,\n      })\n    );\n  };\n\n  const [collapsed, setCollapsed] = React.useState(false);\n\n  const handleCollapse = (isCollapsed: boolean) => {\n    setCollapsed(isCollapsed);\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.root}>\n        <CssBaseline />\n\n        <ImageViewerAppBar />\n\n        <Categories\n          activeCategory={activeCategory}\n          onCategoryClick={onCategoryClick}\n        />\n\n        {image && <Content category={activeCategory} />}\n\n        <Collapse in={collapsed} timeout=\"auto\" unmountOnExit>\n          <OperationOptions\n            handleCollapse={handleCollapse}\n            name={\n              operations[\n                operations.findIndex(\n                  (operation) => operation.method === activeOperation\n                )\n              ].name\n            }\n            settings={\n              operations[\n                operations.findIndex(\n                  (operation) => operation.method === activeOperation\n                )\n              ].options\n            }\n          />\n        </Collapse>\n\n        <Operations handleCollapse={handleCollapse} />\n      </div>\n    </ThemeProvider>\n  );\n};\n","import i18n, { InitOptions } from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { de, en, fi, hi, hu, se, gr } from \"./translations\";\n\nconst resources = {\n  de: de,\n  en: en,\n  fi: fi,\n  hi: hi,\n  hu: hu,\n  se: se,\n  gr: gr,\n};\n\nconst options: InitOptions = {\n  resources,\n  interpolation: { escapeValue: false },\n  keySeparator: false,\n  lng: \"en\",\n};\n\ni18n\n  .use(initReactI18next)\n  .init(options)\n  .then(() => {});\n\nexport default i18n;\n","// prettier-ignore\nconst de = {\n    translation: {\n        'Cancel': 'Abbrechen',\n        'Categories': 'Kategorien',\n        'Create category': 'Neue Kategorie',\n        'Create new classifier': 'Neuer Classifier',\n        'Delete category': 'Lösche Kategorie',\n        'Delete images': 'Lösche Bilder',\n        'Description': 'Beschreibung',\n        'Edit': 'Edit',\n        'Edit category': 'Bearbeite Kategorie',\n        'Help': 'Hilfe',\n        'Hide other categories': 'Blende andere Kategorien aus',\n        'Hide sidebar': 'Blende Sidebar aus',\n        'Import images': 'Bilder hinzufügen',\n        'Logo': 'Logo',\n        'Model': 'Modell',\n        'Open classifier': 'Öffne Classifier',\n        'Open example classifier': 'Öffne Beispiel Classifier',\n        'Open weights': 'Öffne Gewichte',\n        'Open': 'Öffnen',\n        'Run classifier': 'Starte Classfier',\n        'Save annotations and predictions': 'Speicher Labels und Predictions',\n        'Save classifier': 'Speicher Classifier',\n        'Save weights': 'Speicher Gewichte',\n        'Save': 'Speichern',\n        'Search images': 'Durchsuche Bilder',\n        'Send feedback': 'Sende Feedback',\n        'Settings': 'Einstellungen',\n        'Show sidebar': 'Blende Sidebar ein',\n        'Unknown': 'Unbekannt'\n    }\n};\n\nexport default de;\n","const en = {\n  translation: {\n    Cancel: \"Cancel\",\n    Categories: \"Categories\",\n    \"Create category\": \"Create category\",\n    \"Create new classifier\": \"Create new classifier\",\n    \"Delete category\": \"Delete category\",\n    \"Delete images\": \"Delete images\",\n    Description: \"Description\",\n    Edit: \"Edit\",\n    \"Edit category\": \"Edit category\",\n    Help: \"Help\",\n    \"Hide other categories\": \"Hide other categories\",\n    \"Hide sidebar\": \"Hide sidebar\",\n    \"Import images\": \"Import images\",\n    Logo: \"Logo\",\n    Model: \"Model\",\n    \"Open classifier\": \"Open classifier\",\n    \"Open example classifier\": \"Open example classifier\",\n    \"Open weights\": \"Open weights\",\n    Open: \"Open\",\n    \"Run classifier\": \"Run classifier\",\n    \"Save annotations and predictions\": \"Save annotations and predictions\",\n    \"Save classifier\": \"Save classifier\",\n    \"Save weights\": \"Save weights\",\n    Save: \"Save\",\n    \"Search images\": \"Search images\",\n    \"Send feedback\": \"Send feedback\",\n    Settings: \"Settings\",\n    \"Show sidebar\": \"Show sidebar\",\n    Unknown: \"Unknown\",\n  },\n};\n\nexport default en;\n","// prettier-ignore\nconst fi = {\n    translation: {\n        'Cancel': 'Peruuta',\n        'Categories': 'Kategoriat',\n        'Create category': 'Luo kategoria',\n        'Create new classifier': 'Luo uusi luokittelija',\n        'Delete category': 'Poista kategoria',\n        'Delete images': 'Poista kuvat',\n        'Description': 'Kuvaus',\n        'Edit': 'Edit',\n        'Edit category': 'Muokkaa kategoriaa',\n        'Help': 'Apua',\n        'Hide other categories': 'Piilota muut kategoriat',\n        'Hide sidebar': 'Piilota sivupalkki',\n        'Import images': 'Tuo kuvat',\n        'Logo': 'Logo',\n        'Model': 'Malli',\n        'Open classifier': 'Avaa luokittelija',\n        'Open example classifier': 'Avaa esimerkkiluokittelija',\n        'Open weights': 'Avaa painot',\n        'Open': 'Avaa',\n        'Run classifier': 'Suorita luokittelija',\n        'Save annotations and predictions': 'Tallenna annotaatiot ja luokittelun tulos',\n        'Save classifier': 'Tallenna luokittelija',\n        'Save weights': 'Tallenna painot',\n        'Save': 'Tallenna',\n        'Search images': 'Etsi kuvia',\n        'Send feedback': 'Lähetä palautetta',\n        'Settings': 'Asetukset',\n        'Show sidebar': 'Näytä sivupalkki',\n        'Unknown': 'Tuntematon'\n    }\n};\n\nexport default fi;\n","// prettier-ignore\nconst hi = {\n    translation: {\n        'Cancel': 'रद्द करें',\n        'Categories': 'सारे वर्ग',\n        'Create category': 'वर्ग बनाएँ',\n        'Create new classifier': 'नया वर्गीकर्त्ता बनाएं', // वर्गीकर्त्ता = classifier but is rarely used; consider transliterating instead\n        'Delete category': 'वर्ग हटाएँ',\n        'Delete images': 'चित्रों को हटाएँ',\n        'Description': 'विवरण',\n        'Edit category': 'वर्ग का बदलाव करें',\n        'Help': 'सहायता',\n        'Hide other categories': 'बाकि वर्गों को छिपाएं',\n        'Hide sidebar': 'साइडबार छिपाएं',\n        'Import images': 'चित्रों को आयात करें',\n        'Logo': 'लोगो', // transliterated (Logo) but that's ok because it is a loanword\n        'Model': 'मॉडल', // transliterated (Model) but should figure out an appropriate abstraction and translate that\n        'Open classifier': 'वर्गीकर्त्ता खोलें',\n        'Open example classifier': 'उदाहरण का वर्गीकर्त्ता खोलें',\n        'Open weights': 'वेइट्स खोलें',\n        'Open': 'खोलें',\n        'Run classifier': 'वर्गीकर्त्ता को चलाएं',\n        'Save annotations and predictions': 'टिप्पणी तथा अनुमान सहेजें', // व्याख्या is an alternative to टिप्पणी\n        'Save classifier': 'वर्गीकर्त्ता सहेजें',\n        'Save weights': 'वेइट्स सहेजें',\n        'Save': 'सहेजें',\n        'Search images': 'चित्र खोजें',\n        'Send feedback': 'प्रतिक्रिया भेजें',\n        'Settings': 'सेटिंग्स',\n        'Show sidebar': 'साइडबार दिखाएं',\n        'Unknown': 'अज्ञात' // should be used as an adjective before a noun\n    }\n};\n\nexport default hi;\n","// prettier-ignore\nconst hu = {\n    translation: {\n        'Cancel': 'Mégse',\n        'Categories': 'Osztályok',\n        'Create category': 'Új osztály létrehozása',\n        'Create new classifier': 'Új osztályozó létrehozása',\n        'Delete category': 'Osztály törlése',\n        'Delete images': 'Képek törlése',\n        'Description': 'Leírás',\n        'Edit': 'Edit',\n        'Edit category': 'Kategória szerkesztése',\n        'Help': 'Súgó',\n        'Hide other categories': 'Többi osztály elrejtése',\n        'Hide sidebar': 'Oldalsáv elrejtése',\n        'Import images': 'Képek importálása',\n        'Logo': 'Logó',\n        'Model': 'Modell',\n        'Open classifier': 'Osztályozó betöltése',\n        'Open example classifier': 'Példa osztályozó betöltése',\n        'Open weights': 'Súlyok betöltése',\n        'Open': 'Megnyitás',\n        'Run classifier': 'Osztályozó futtatása',\n        'Save annotations and predictions': 'Címkék és predikciók mentése',\n        'Save classifier': 'Osztályozó mentése',\n        'Save weights': 'Súlyok mentése',\n        'Save': 'Mentés',\n        'Search images': 'Képek keresése',\n        'Send feedback': 'Visszajelzés küldése',\n        'Settings': 'Beállítások',\n        'Show sidebar': 'Oldalsáv megjelenítése',\n        'Unknown': 'Ismeretlen'\n    }\n};\n\nexport default hu;\n","// prettier-ignore\nconst se = {\n    translation: {\n        'Cancel': 'Annullera',\n        'Categories': 'kategorier',\n        'Create category': 'Skapa kategori',\n        'Create new classifier': 'Skapa ny klassificerare',\n        'Delete category': 'Ta bort kategori',\n        'Delete images': 'Ta bort bilder',\n        'Description': 'Beskrivning',\n        'Edit': 'Edit',\n        'Edit category': 'Redigera kategori',\n        'Help': 'Hjälp',\n        'Hide other categories': 'gömma andra kategorier',\n        'Hide sidebar': 'Dölj sidfältet',\n        'Import images': 'Importera bilder',\n        'Logo': 'Logo',\n        'Model': 'Modell',\n        'Open classifier': 'Öppna klassificerare',\n        'Open example classifier': 'Öppna exempel klassificeraren',\n        'Open weights': 'Öppna vikter',\n        'Open': 'Öppna',\n        'Run classifier': 'Kör klassificeringsenheten',\n        'Save annotations and predictions': 'Spara kommentarer och förutsägelser',\n        'Save classifier': 'Spara klassificerare',\n        'Save weights': 'Spara vikter',\n        'Save': 'Spara',\n        'Search images': 'Sök bilder',\n        'Send feedback': 'Skicka feedback',\n        'Settings': 'Inställningar',\n        'Show sidebar': 'Visa sidofältet',\n        'Unknown': 'Okänd'\n    }\n};\n\nexport default se;\n","// prettier-ignore\nconst gr = {\n    translation: {\n        'Cancel': 'Άκυρο',\n        'Categories': 'Κατηγορίες',\n        'Create category': 'Δημιουργία κατηγορίας',\n        'Create new classifier': 'Νέος ταξινομητής',\n        'Delete category': 'Διαγραφή κατηγορίας',\n        'Delete images': 'Διαγραφή εικόνων',\n        'Description': 'Περιγραφή',\n        'Edit': 'Επεξεργασία',\n        'Edit category': 'Επεξεργασία κατηγορίας',\n        'Help': 'Βοήθεια',\n        'Hide other categories': 'Απόκρυψη άλλων κατηγοριών',\n        'Hide sidebar': 'Απόκρυψη πλευρικής γραμμής',\n        'Import images': 'Εισαγωγή εικόνων',\n        'Logo': 'Λογότυπο',\n        'Model': 'Mοντέλο',\n        'Open classifier': 'Άνοιγμα ταξινομητή',\n        'Open example classifier': 'Παράδειγμα ταξινομητή',\n        'Open weights': 'Άνοιγμα παραμέτρων',\n        'Open': 'Άνοιγμα',\n        'Run classifier': 'Εκτέλεση ταξινομητή',\n        'Save annotations and predictions': 'Αποθήκευση ετικετών και προβλέψεων',\n        'Save classifier': 'Αποθήκευση ταξινομητή',\n        'Save weights': 'Αποθήκευση παραμέτρων',\n        'Save': 'Αποθήκευση',\n        'Search images': 'Αναζήτηση εικόνων',\n        'Send feedback': 'Eπικοινωνια',\n        'Settings': 'Ρυθμίσεις',\n        'Show sidebar': 'Εμφάνιση πλευρικής γραμμής',\n        'Unknown': 'Άγνωστο'\n    }\n};\n\nexport default gr;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { ImageViewer } from \"./components\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\nimport \"./i18n\";\n\nSentry.init({\n  dsn:\n    \"https://756e21ab7263457eab9bc2f65edddc79@o71028.ingest.sentry.io/5668724\",\n  integrations: [new Integrations.BrowserTracing()],\n  release: \"image-viewer@\" + process.env.npm_package_version,\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ImageViewer />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}