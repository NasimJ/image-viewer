(this["webpackJsonp@piximi/image-viewer"]=this["webpackJsonp@piximi/image-viewer"]||[]).push([[0],{760:function(t,e){},761:function(t,e){},769:function(t,e){},772:function(t,e){},773:function(t,e){},816:function(t,e,n){"use strict";n.r(e);var i,a=n(1),r=n.n(a),o=n(65),s=n.n(o),c=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,895)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),r(t),o(t)}))},l=n(3),u=n(881);!function(t){t[t.ColorAdjustment=0]="ColorAdjustment",t[t.ColorAnnotation=1]="ColorAnnotation",t[t.EllipticalAnnotation=2]="EllipticalAnnotation",t[t.Hand=3]="Hand",t[t.LassoAnnotation=4]="LassoAnnotation",t[t.MagneticAnnotation=5]="MagneticAnnotation",t[t.ObjectAnnotation=6]="ObjectAnnotation",t[t.PenAnnotation=7]="PenAnnotation",t[t.PolygonalAnnotation=8]="PolygonalAnnotation",t[t.QuickAnnotation=9]="QuickAnnotation",t[t.RectangularSelection=10]="RectangularSelection",t[t.Zoom=11]="Zoom"}(i||(i={}));var h,d,f=function(t){return t.state.categories},p=n(254),g=function(t){var e=t.state.categories.filter((function(t){return"00000000-0000-0000-0000-000000000000"!==t.id}));return Object(p.b)(e,"name")},b=function(t){var e;return null===(e=t.state.image)||void 0===e?void 0:e.instances},m=function(t){return t.state.image},j=function(t){return t.state.invertMode},v=function(t){return t.state.toolType},O=n(32),x=function(t){var e=t.state;return O.find(e.categories,(function(t){return t.id===e.selectedCategory}))},y=function(t){return t.state.selectionMode},k=function(t){return t.state.categories.find((function(t){return"00000000-0000-0000-0000-000000000000"===t.id}))},w=function(t){return t.state.zoomSettings},C=n(41),M=n(866),S=n(867),I=n(237),E=n(890),A=n(53),B=n(857),P=Object(B.a)((function(t){return{appBar:{zIndex:t.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3),width:"100%"},grow:{flexGrow:1},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(A.a)({},t.mixins.toolbar),settingsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:t.spacing(32)},applicationDrawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:t.spacing(32)}}})),L=n(865),D=n(315),z=n.n(D),R=n(482),_=n(889),W=Object(B.a)((function(t){return{button:{margin:t.spacing(1),textTransform:"none"}}})),T=n(7),N=n.n(T),F=n(16),Z=n(860),H=n(21),U=n(332);!function(t){t[t.Add=0]="Add",t[t.Intersect=1]="Intersect",t[t.New=2]="New",t[t.Subtract=3]="Subtract"}(h||(h={})),function(t){t[t.In=0]="In",t[t.Out=1]="Out"}(d||(d={}));var G={brightness:0,categories:[{color:"#AAAAAA",id:"00000000-0000-0000-0000-000000000000",name:"Unknown",visible:!0}],contrast:0,exposure:0,hue:0,image:{id:"",instances:[],name:"foo.png",shape:{c:512,channels:3,r:512},src:n.p+"static/media/colorImage.f118ef08.png"},invertMode:!1,toolType:i.RectangularSelection,penSelectionBrushSize:1,saturation:0,selectedCategory:"00000000-0000-0000-0000-000000000000",selectionMode:h.New,vibrance:0,zoomSettings:{zoomAutomaticCentering:!1,zoomMode:d.In,zoomReset:!1}},Y=Object(U.b)({initialState:G,name:"image-viewer",reducers:{deleteCategory:function(t,e){t.categories=t.categories.filter((function(t){return t.id!==e.payload.category.id}))},deleteImageInstance:function(t,e){t.image&&(t.image.instances=t.image.instances.filter((function(t){return t.id!==e.payload.id})))},replaceImageInstance:function(t,e){if(t.image){var n=t.image.instances.filter((function(t){return t.id!==e.payload.id}));t.image.instances=[].concat(Object(H.a)(n),[e.payload.instance])}},setBrightness:function(t,e){t.brightness=e.payload.brightness},setCategories:function(t,e){t.categories=e.payload.categories},setCategoryVisibility:function(t,e){var n=O.find(t.categories,(function(t){return t.id===e.payload.category.id}));n&&(n.visible=e.payload.visible,t.categories=[].concat(Object(H.a)(t.categories.filter((function(t){return t.id!==e.payload.category.id}))),[n]))},setContrast:function(t,e){t.contrast=e.payload.contrast},setExposure:function(t,e){t.exposure=e.payload.exposure},setHue:function(t,e){t.hue=e.payload.hue},setImage:function(t,e){t.image=e.payload.image},setImageInstances:function(t,e){t.image&&(t.image.instances=e.payload.instances)},setInvertMode:function(t,e){t.invertMode=e.payload.invertMode},setOperation:function(t,e){t.toolType=e.payload.operation},setPenSelectionBrushSize:function(t,e){t.penSelectionBrushSize=e.payload.penSelectionBrushSize},setSaturation:function(t,e){t.saturation=e.payload.saturation},setSeletedCategory:function(t,e){t.selectedCategory=e.payload.selectedCategory},setSelectedAnnotation:function(t,e){t.selectedAnnotation=e.payload.selectedAnnotation},setSelectedAnnotationNode:function(t,e){t.selectedAnnotationNode=e.payload.selectedAnnotationNode},setSelectionMode:function(t,e){t.selectionMode=e.payload.selectionMode},setVibrance:function(t,e){t.vibrance=e.payload.vibrance},setZoomAutomaticCentering:function(t,e){t.zoomSettings.zoomAutomaticCentering=e.payload.zoomAutomaticCentering},setZoomMode:function(t,e){t.zoomSettings.zoomMode=e.payload.zoomMode},setZoomReset:function(t,e){t.zoomSettings.zoomReset=e.payload.zoomReset}}}),X=Y.actions,K=(X.deleteCategory,X.deleteImageInstance,X.replaceImageInstance,X.setBrightness,X.setCategories,X.setCategoryVisibility,X.setContrast,X.setExposure,X.setHue,X.setImage),V=(X.setImageInstances,X.setInvertMode,X.setOperation,X.setPenSelectionBrushSize,X.setSaturation,X.setSelectedAnnotation),Q=X.setSelectedAnnotationNode,q=(X.setSelectionMode,X.setSeletedCategory),J=(X.setVibrance,X.setZoomMode,X.setZoomReset,n(11)),$=function(t){var e=t.onClose,n=Object(C.c)();return Object(J.jsxs)(Z.a,{component:"label",dense:!0,children:["Computer",Object(J.jsx)("input",{accept:"image/*",hidden:!0,id:"open-image",onChange:function(t){if(e(),t.persist(),t.currentTarget.files){var i=t.currentTarget.files[0],a=new FileReader;a.onload=function(){var t=Object(F.a)(N.a.mark((function t(e){var a,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target&&(a=e.target.result,(r=new Image).onload=function(){var t=i.name,e={r:r.naturalHeight,c:r.naturalWidth,channels:4};n(K({image:{id:"",instances:[],name:t,shape:e,src:a}}))},r.src=a);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.readAsDataURL(i)}},type:"file"})]})},tt=n(862),et=n(819),nt=n(817),it=n(864),at=n.p+"static/media/malaria.5b73ad75.png",rt=function(t){var e=t.onClose,n=t.open,i=Object(C.c)(),a=[{name:"Microscopy",description:"Fusce lectus lorem, lacinia eu libero eu, pellentesque semper dui. Nunc bibendum est eget lacus fermentum ullamcorper.",data:at},{name:"Microscopy (3D)",description:"Cras lobortis sapien eu tellus malesuada sodales. Vivamus placerat est eu mi ullamcorper, ut ultrices elit rhoncus. Aliquam vitae viverra nisi. Sed odio metus, finibus quis nisi a, vulputate varius justo.",data:at}];return Object(J.jsx)(tt.a,{open:n,children:Object(J.jsx)(et.a,{component:"div",role:"list",children:a.map((function(t,n){return Object(J.jsx)(nt.a,{button:!0,divider:!0,role:"listitem",onClick:function(){return function(t){var n=t.data,a=(t.description,t.name);e(),i(K({image:{id:"",instances:[],name:a,shape:{r:512,c:512,channels:4},src:n}}))}(t)},children:Object(J.jsx)(it.a,{primary:t.name,secondary:t.description})},n)}))})})},ot=function(t){var e=t.onClose,n=r.a.useState(!1),i=Object(l.a)(n,2),a=i[0],o=i[1];return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsx)(Z.a,{dense:!0,onClick:function(){e(),o(!0)},children:"Example"}),Object(J.jsx)(rt,{onClose:function(){o(!1)},open:a})]})},st=r.a.forwardRef((function(t,e){var n=t.onClose;return Object(J.jsx)($,{onClose:n})})),ct=r.a.forwardRef((function(t,e){var n=t.onClose;return Object(J.jsx)(ot,{onClose:n})})),lt=function(t){var e=t.anchorEl,n=t.onClose;return Object(J.jsxs)(R.a,{anchorEl:e,keepMounted:!0,onClose:n,open:Boolean(e),children:[Object(J.jsx)(st,{onClose:n}),Object(J.jsx)(ct,{onClose:n})]})},ut=function(){var t=r.a.useState(null),e=Object(l.a)(t,2),n=e[0],i=e[1],a=W();return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsx)(_.a,{title:"Open image",children:Object(J.jsx)(L.a,{className:a.button,startIcon:Object(J.jsx)(z.a,{}),onClick:function(t){i(t.currentTarget)},children:"Open image"})}),Object(J.jsx)(lt,{anchorEl:n,onClose:function(){i(null)}})]})},ht=Object(B.a)((function(t){return{button:{margin:t.spacing(1),textTransform:"none"}}})),dt=n(484),ft=function(){var t=ht(),e=Object(C.d)(m),n=Object(C.d)(f);return Object(J.jsx)(r.a.Fragment,{children:Object(J.jsx)(_.a,{title:"Export annotations",children:Object(J.jsx)(L.a,{className:t.button,startIcon:Object(J.jsx)(z.a,{}),onClick:function(){if(e){var t={src:e.src,instances:e.instances.map((function(t){var e;return{boundingBox:t.boundingBox,category:null===(e=O.find(n,(function(e){return e.id===t.categoryId})))||void 0===e?void 0:e.name,mask:t.mask}}))},i=[JSON.stringify(t)],a=new Blob(i,{type:"text/json;charset=utf-8"});Object(dt.saveAs)(a,"foo.json")}},children:"Export"})})})},pt=function(){var t=P();return Object(J.jsx)(M.a,{className:t.appBar,color:"inherit",position:"fixed",children:Object(J.jsxs)(S.a,{children:[Object(J.jsxs)(I.a,{className:t.logo,variant:"h6",children:[Object(J.jsx)("strong",{children:"Piximi"})," Image viewer ",Object(J.jsx)(E.a,{label:"Early access"})]}),Object(J.jsx)("div",{className:t.grow}),Object(J.jsx)(ut,{}),Object(J.jsx)(ft,{})]})})},gt=n(892),bt=Object(B.a)((function(t){return{appBar:{zIndex:t.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(A.a)({},t.mixins.toolbar),settingsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:t.spacing(32)},applicationDrawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:t.spacing(32)}}})),mt=n(868),jt=n(485),vt=n.n(jt),Ot=n(486),xt=n.n(Ot),yt=n(869),kt=function(t){var e=t.children,n=t.primary,i=r.a.useState(!0),a=Object(l.a)(i,2),o=a[0],s=a[1];return Object(J.jsxs)(et.a,{dense:!0,children:[Object(J.jsxs)(nt.a,{button:!0,dense:!0,onClick:function(){s(!o)},children:[Object(J.jsx)(mt.a,{children:o?Object(J.jsx)(vt.a,{}):Object(J.jsx)(xt.a,{})}),Object(J.jsx)(it.a,{primary:n})]}),Object(J.jsx)(yt.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(J.jsx)(et.a,{component:"div",dense:!0,disablePadding:!0,children:e})})]})},wt=n(521),Ct=n.n(wt),Mt=n(871),St=n(872),It=n(884),Et=n(874),At=n(870),Bt=n(823),Pt=n(891),Lt=n(820),Dt=n(535),zt=Object(B.a)((function(t){return{alert:{width:t.spacing(64)},appBar:{transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},appBarShift:{marginLeft:t.spacing(32),transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut}),width:"calc(100% - ".concat(t.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:t.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:t.spacing(8),paddingTop:t.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:t.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:t.spacing(32)},drawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),drawerPaper:{width:t.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:t.zIndex.drawer+1},imageDialogContent:{paddingBottom:t.spacing(12),paddingTop:t.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-t.spacing(32),padding:t.spacing(3),transition:t.transitions.create("margin",{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},mainShift:{marginLeft:t.spacing(32),transition:t.transitions.create("margin",{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:t.spacing(3)},sliderInput:{width:42}}})),Rt=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],_t=function(t){var e=t.color,n=t.onColorChange,i=zt(),r=a.useState(null),o=Object(l.a)(r,2),s=o[0],c=o[1],u=Boolean(s),h=function(){c(null)};return Object(J.jsxs)(a.Fragment,{children:[Object(J.jsx)(Bt.a,{onClick:function(t){c(t.currentTarget)},children:Object(J.jsx)(Pt.a,{style:{backgroundColor:"#F3F3F3"},children:Object(J.jsx)(At.a,{style:{color:e}})})}),Object(J.jsx)(Lt.a,{id:"color-menu",open:u,anchorEl:s,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(J.jsx)("div",{className:i.colorPicker,children:Object(J.jsx)(Dt.a,{colors:Rt,onChange:function(t){console.info(t),n(t),h()}})})})]})},Wt=n(873),Tt=Object(B.a)((function(t){return{alert:{width:t.spacing(64)},appBar:{transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},appBarShift:{marginLeft:t.spacing(32),transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut}),width:"calc(100% - ".concat(t.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:t.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:t.spacing(8),paddingTop:t.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:t.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:t.spacing(32)},drawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),drawerPaper:{width:t.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:t.zIndex.drawer+1},imageDialogContent:{paddingBottom:t.spacing(12),paddingTop:t.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-t.spacing(32),padding:t.spacing(3),transition:t.transitions.create("margin",{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},mainShift:{marginLeft:t.spacing(32),transition:t.transitions.create("margin",{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:t.spacing(3)},sliderInput:{width:42}}})),Nt=n(886),Ft=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],Zt=function(t){var e=t.onClose,n=t.open,i=Object(C.c)(),o=Object(C.d)(f),s=r.a.useState(Object(p.a)(Ft)),c=Object(l.a)(s,2),u=c[0],h=c[1],d=Object(a.useState)(""),g=Object(l.a)(d,2),b=g[0],m=g[1],j=Tt();return Object(J.jsxs)(tt.a,{fullWidth:!0,maxWidth:"xs",onClose:e,open:n,children:[Object(J.jsx)(Mt.a,{children:"Create category"}),Object(J.jsx)(St.a,{className:j.createCategoryDialogContent,children:Object(J.jsx)("div",{className:j.createCategoryDialogGrid,children:Object(J.jsxs)(Wt.a,{container:!0,spacing:1,children:[Object(J.jsx)(Wt.a,{item:!0,xs:2,className:j.createCategoryDialogItem,children:Object(J.jsx)(_t,{color:u,onColorChange:function(t){h(t.hex)}})}),Object(J.jsx)(Wt.a,{item:!0,xs:10,children:Object(J.jsx)(It.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(t){m(t.target.value)}})})]})})}),Object(J.jsxs)(Et.a,{children:[Object(J.jsx)(L.a,{onClick:e,color:"primary",children:"Cancel"}),Object(J.jsx)(L.a,{onClick:function(){var t={color:u,id:Object(Nt.a)().toString(),name:b||"Unnamed",visible:!0};i(Y.actions.setCategories({categories:[].concat(Object(H.a)(o),[t])})),i(Y.actions.setSeletedCategory({selectedCategory:t.id})),e(),h(Object(p.a)(Ft))},color:"primary",children:"Create"})]})]})},Ht=function(){var t=Object(a.useState)(!1),e=Object(l.a)(t,2),n=e[0],i=e[1];return{onClose:Object(a.useCallback)((function(){i(!1)}),[]),onOpen:Object(a.useCallback)((function(){i(!0)}),[]),open:n}},Ut=function(){var t=Object(a.useState)(0),e=Object(l.a)(t,2),n=e[0],i=e[1];return r.a.useEffect((function(){var t=setTimeout((function(){i(n+1),n>32&&i(0)}),200);return function(){return clearTimeout(t)}})),n},Gt=n(75),Yt=n(2),Xt=function t(e){Object(Yt.a)(this,t),this.image=void 0,this.image=e},Kt=n(8),Vt=n(13),Qt=n(14),qt=function(t,e){var n=[];return O.filter(O.zip(t.slice(0,t.length-1),t.slice(1)),(function(t){var e=Object(l.a)(t,2),n=e[0],i=e[1];return!O.isEqual(n,i)})).forEach((function(t){var i=Object(l.a)(t,2),a=i[0],r=i[1],o=Jt(e,a,r);n=O.concat(n,o)})),n},Jt=function(t,e,n){var i,a,r,o,s,c,l,u,h=[];for(r=Math.round(e[0]),o=Math.round(e[1]),s=Math.round(n[0])-r,c=Math.round(n[1])-o,l=Math.abs(c),Math.abs(s)>=Math.abs(c)&&(l=Math.abs(s)),s/=l,c/=l,i=r,a=o,u=1;u<=l;)t.setPixelXY(Math.round(i),Math.round(a),[255,255,255,255]),h.push([Math.round(i),Math.round(a)]),i+=s,a+=c,u+=1;return h},$t=function(t,e){return function(n,i,a){return(t*i+n)*e+(a=a||0)}};function te(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function ee(t,e,n){var i=e[0],a=e[1],r=n[0]-i,o=n[1]-a;if(0!==r||0!==o){var s=((t[0]-i)*r+(t[1]-a)*o)/(r*r+o*o);s>1?(i=n[0],a=n[1]):s>0&&(i+=r*s,a+=o*s)}return(r=t[0]-i)*r+(o=t[1]-a)*o}function ne(t,e,n,i,a){for(var r=i,o=0,s=e+1;s<n;s++){var c=ee(t[s],t[e],t[n]);c>r&&(o=s,r=c)}r>i&&(o-e>1&&ne(t,e,o,i,a),a.push(t[o]),n-o>1&&ne(t,o,n,i,a))}function ie(t,e){var n=t.length-1,i=[t[0]];return ne(t,0,n,e,i),i.push(t[n]),i}function ae(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return t=ie(t=n?t:function(t,e){for(var n=t[0],i=[n],a=[],r=1,o=t.length;r<o;r++)te(a=t[r],n)>e&&(i.push(a),n=a);return n!==a&&i.push(a),i}(t,i),i)}var re=n(22);function oe(t,e){var n=Object(l.a)(e,2),i=Object(l.a)(n[0],2),a=i[0],r=i[1],o=Object(l.a)(n[1],2),s=o[0],c=o[1];return Math.floor((t-r)/(c-r)*(s-a)+a)}function se(t){var e=Object(l.a)(t,2),n=Object(l.a)(e[0],2)[1],i=Object(l.a)(e[1],2)[1];return n<=i?n:i}function ce(t){var e=Object(l.a)(t,2),n=Object(l.a)(e[0],2)[1],i=Object(l.a)(e[1],2)[1];return n>i?n:i}function le(t){var e=Object(l.a)(t,2),n=Object(l.a)(e[0],2),i=n[0],a=n[1],r=Object(l.a)(e[1],2),o=r[0];return a<=r[1]?i:o}function ue(t){var e=Object(l.a)(t,2),n=Object(l.a)(e[0],2),i=n[0],a=n[1],r=Object(l.a)(e[1],2),o=r[0];return a>r[1]?i:o}function he(t,e,n){for(;e.length>0&&t===se(e[e.length-1]);)n.push(e.pop())}function de(t,e){for(var n=0;n<e.length;n++)if(t>=ce(e[n])){var i=e.pop();n<e.length&&i&&(e[n]=i,n--)}}function fe(t,e){var n,i=[],a=Object(re.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;i.push(oe(t,r))}}catch(o){a.e(o)}finally{a.f()}return i}function pe(t,e,n){for(var i=0;i<t.length;i+=2)ge(t[i],t[i+1],e,n)}function ge(t,e,n,i){for(var a=t;a<e;a++)i.setPixelXY(a,n,[255,255,255,255])}var be=function(t){for(var e=[],n=!0,i=0;i<t.length;i++){for(var a=0;a<t[i];a++)e.push(n?0:255);n=!n}return new Uint8ClampedArray(e)},me=function(t){var e=t[0],n=1,i=[];255===t[0]&&i.push(0);for(var a=1;a<t.length;a++)e!==t[a]?(i.push(n),e=t[a],n=1):n+=1;return i.push(n),i},je=n(500),ve=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(t){var i;return Object(Yt.a)(this,n),(i=e.call(this,t)).manager=void 0,i.points=[],i.annotated=!1,i.annotating=!1,i.annotation=void 0,i._boundingBox=void 0,i._contour=void 0,i._mask=void 0,i.manager=t.getRoiManager(),i}return Object(Kt.a)(n,[{key:"add",value:function(t){if(!this._mask)return[[],[]];var e=be(t),n=be(this._mask).map((function(t,n){return 255===t||255===e[n]?255:0})),i=O.chunk(n,this.image.width).map((function(t){return Array.from(t)})),a=this.computeContours(i);return[me(n),O.flatten(a)]}},{key:"intersect",value:function(t){if(!this._mask)return[[],[]];var e=be(t),n=be(this._mask).map((function(t,n){return 255===t&&255===e[n]?255:0})),i=O.chunk(n,this.image.width).map((function(t){return Array.from(t)})),a=this.computeContours(i);return[me(n),O.flatten(a)]}},{key:"invert",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(t=Array.from(be(t))),t.forEach((function(e,n){t[n]=255===e?0:255})),e&&(t=me(Uint8Array.from(t))),t}},{key:"invertContour",value:function(t){var e=O.flatten(O.reverse(O.chunk(t,2)));return O.concat([0,0,512,0,512,512,0,512,0,0],e)}},{key:"subtract",value:function(t){if(!this._mask)return[[],[]];var e=be(t),n=be(this._mask).map((function(t,n){return 255===t&&255===e[n]?0:e[n]})),i=O.chunk(n,this.image.width).map((function(t){return Array.from(t)})),a=this.computeContours(i);return[me(n),O.flatten(a)]}},{key:"boundingBox",get:function(){return this._boundingBox},set:function(t){this._boundingBox=t}},{key:"computeBoundingBoxFromContours",value:function(t){var e=O.chunk(t,2);return[Math.round(O.min(O.map(e,O.first))),Math.round(O.min(O.map(e,O.last))),Math.round(O.max(O.map(e,O.first))),Math.round(O.max(O.map(e,O.last)))]}},{key:"computeContours",value:function(t){return Object(je.a)(t,1).sort((function(t,e){return e.length-t.length}))[0]}},{key:"computeMask",value:function(){var t=new Gt.a({width:this.image.width,height:this.image.height,bitDepth:8}),e=O.chunk(this.points,2),n=qt(e,t);return ae(n,1,!0),function(t,e){if(!(t.length<3))for(var n=function(t){for(var e=[],n=t[t.length-1],i=0;i<t.length;i++){var a=t[i];n[1]!=a[1]&&e.push([n,a]),n=a}return e}(t).sort((function(t,e){return se(e)-se(t)})),i=[],a=se(n[n.length-1]);n.length>0||i.length>0;)he(a,n,i),de(a,i),i.sort((function(t,e){var n=le(t)-le(e);return 0==n?ue(t)-ue(e):n})),pe(fe(a,i),a,e),a++}(n,t),me(t.getChannel(0).data)}},{key:"contour",get:function(){return this._contour},set:function(t){this._contour=t}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask=t}},{key:"annotate",value:function(t){this.boundingBox&&this.contour&&this.mask&&(this.annotation={boundingBox:this.boundingBox,categoryId:t.id,contour:this.contour,id:Nt.a(),mask:this.mask})}}]),n}(Xt),Oe=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).roiContour=void 0,t.roiMask=void 0,t.offset=void 0,t.overlayData="",t.points=[],t.initialPosition={x:0,y:0},t.tolerance=1,t.toleranceMap=void 0,t.fromFlood=function(t){var e=t.x,n=t.y,i=t.image,a=t.tolerance,r=new Gt.a(i.width,i.height,new Uint8ClampedArray(i.width*i.height*4),{alpha:1}).getRoiManager();return r.fromWaterShed({image:i,fillMaxValue:a,points:[[e,n]]}),r},t}return Object(Kt.a)(n,[{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.overlayData="",this.roiMask=void 0,this.roiContour=void 0,this.points=[],this.initialPosition={x:0,y:0},this.tolerance=1,this.toleranceMap=void 0}},{key:"onMouseDown",value:function(t){this.annotated=!1,this.annotating=!0,this.tolerance=1,this.initialPosition=t,this.toleranceMap=function(t){for(var e=t.x,n=t.y,i=t.image,a=[],r=i.getPixelXY(e,n),o=0;o<i.data.length;o+=i.channels){var s=Math.abs(i.data[o]-r[0]),c=Math.abs(i.data[o+1]-r[1]),l=Math.abs(i.data[o+2]-r[2]);a.push(Math.floor((s+c+l)/3))}return new Gt.a(i.width,i.height,a,{alpha:0,components:1})}({x:Math.floor(t.x),y:Math.floor(t.y),image:this.image}),this.updateOverlay(t)}},{key:"onMouseMove",value:function(t){if(this.annotating){var e=Math.ceil(Math.hypot(t.x-this.initialPosition.x,t.y-this.initialPosition.y));e!==this.tolerance&&(this.tolerance=e,this.updateOverlay(this.initialPosition))}}},{key:"onMouseUp",value:function(t){if(this.roiContour&&this.roiMask){var e=O.chunk(this.roiContour.getRGBAData(),4).map((function(t){return 255===t[0]?255:0})),n=Gt.a.createFrom(this.roiMask,{bitDepth:8,data:e}).getMatrix().data.map((function(t){return Array.from(t)})),i=this.computeContours(n);if(i){var a=this.roiMask.position[0],r=this.roiMask.position[1];this.points=O.flatten(i.map((function(t){return[Math.round(t[0]+a),Math.round(t[1]+r)]}))),this._contour=this.points,this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this._mask=me(this.roiMask.data),this.annotated=!0,this.annotating=!1}}}},{key:"updateOverlay",value:function(t){var e=this.fromFlood({x:Math.floor(t.x),y:Math.floor(t.y),image:this.toleranceMap,tolerance:this.tolerance});this.roiMask=e.getMasks()[0],this.roiContour=e.getMasks({kind:"contour"})[0],this.roiMask&&(this.offset={x:this.roiMask.position[0],y:this.roiMask.position[1]},this.overlayData=n.colorOverlay(this.roiMask,t,"red"))}}],[{key:"colorOverlay",value:function(t,e,n){for(var i=[parseInt(n.slice(1,3),16),parseInt(n.slice(3,5),16),parseInt(n.slice(5,7),16),150],a=new Gt.a(t.width,t.height,new Uint8Array(t.width*t.height*4),{alpha:1}),r=0;r<t.width;r++)for(var o=0;o<t.height;o++)t.getBitXY(r,o)&&a.setPixelXY(r,o,i);return a.setPixelXY(e.x,e.y,[255,255,255,255]),a.toDataURL()}}]),n}(ve),xe=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).center=void 0,t.origin=void 0,t.radius=void 0,t}return Object(Kt.a)(n,[{key:"computeBoundingBox",value:function(){if(this.center&&this.origin&&this.radius)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.center.x+this.radius.x),Math.round(this.center.y+this.radius.y)]}},{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.center=void 0,this.origin=void 0,this.radius=void 0}},{key:"onMouseDown",value:function(t){this.annotated||(this.radius?(this.resize(t),this.annotated=!0,this.annotating=!1,this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox()):(this.origin=t,this.annotating=!0))}},{key:"onMouseMove",value:function(t){this.annotated||this.resize(t)}},{key:"onMouseUp",value:function(t){!this.annotated&&this.annotating&&this.radius&&(this.resize(t),this.annotated=!0,this.annotating=!1,this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox())}},{key:"convertToPoints",value:function(){if(this.radius&&this.origin&&this.center){for(var t=Math.round(this.center.x),e=Math.round(this.center.y),n=[],i=[],a=e;a<e+this.radius.y;a+=.5){var r=this.radius.x*Math.sqrt(1-(a-e)*(a-e)/(this.radius.y*this.radius.y))+t;n.push(Math.round(r)),n.push(Math.round(a)),i.push([Math.round(r),Math.round(a)])}return O.forEachRight(i,(function(e){var i=2*t-e[0];n.push(i),n.push(e[1])})),O.forEach(i,(function(i){var a=2*t-i[0],r=2*e-i[1];n.push(a),n.push(r)})),O.forEachRight(i,(function(t){var i=2*e-t[1];n.push(t[0]),n.push(i)})),n}}},{key:"resize",value:function(t){this.origin&&(this.center={x:(t.x-this.origin.x)/2+this.origin.x,y:(t.y-this.origin.y)/2+this.origin.y},this.radius={x:Math.abs((t.x-this.origin.x)/2),y:Math.abs((t.y-this.origin.y)/2)})}}]),n}(ve),ye=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).anchor=void 0,t.buffer=[],t.origin=void 0,t.points=[],t}return Object(Kt.a)(n,[{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.annotation=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(t){this.annotated||(this.connected(t)&&(this.origin&&(this.buffer=[].concat(Object(H.a)(this.buffer),[this.origin.x,this.origin.y])),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.annotating=!0,this.origin||(this.origin=t)))}},{key:"onMouseMove",value:function(t){if(!this.annotated&&this.annotating)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]))):void(this.origin&&(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y])))}},{key:"onMouseUp",value:function(t){if(!this.annotated&&this.annotating){if(this.connected(t)&&this.origin&&this.buffer&&this.buffer.length>0&&(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y,this.origin.x,this.origin.y]),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.buffer=[]),this.anchor)return this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]),void(this.anchor=t);this.origin&&this.buffer&&this.buffer.length>0&&(this.anchor=t)}}},{key:"connected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(t.x-this.origin.x,t.y-this.origin.y);return n<e}}}]),n}(ve),ke=n(155),we=n(501),Ce=n.n(we),Me=function(){function t(){Object(Yt.a)(this,t),this.data=[],this.length=0}return Object(Kt.a)(t,[{key:"compare",value:function(t,e){return t.fScore-e.fScore}},{key:"setNodeId",value:function(t,e){t.heapIndex=e}},{key:"push",value:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}}},{key:"updateItem",value:function(t){this._down(t),this._up(t)}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=this.setNodeId,a=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(a,o)>=0)break;e[t]=o,i(o,t),t=r}e[t]=a,i(a,t)}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,a=e[t],r=this.setNodeId;t<i;){var o=1+(t<<1),s=o+1,c=e[o];if(s<this.length&&n(e[s],c)<0&&(o=s,c=e[s]),n(c,a)>=0)break;e[t]=c,r(c,t),t=o}e[t]=a,r(a,t)}}]),t}(),Se=[];function Ie(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e){var a=Be(e.id,n),r=Object(l.a)(a,2),o=r[0],s=r[1],c=[o/i,s/i],u=[],h=t.fromId;if(null!==e.parentId){var d=t.getNode(e.parentId);if("undefined"!==typeof d&&d.fromId===h&&(u.push.apply(u,Object(H.a)(d.trace)),u.length>1)){var f=Ee(u[u.length-2],u[u.length-1]),p=Ee(u[u.length-1],c);f===p&&u.pop()}}return u.push(c),u}}var Ee=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];if(0===n){if(i<0)return 0;if(i>0)return 4}if(0===i){if(n>0)return 2;if(n<0)return 6}if(n>0){if(i<0)return 1;if(i>0)return 3}if(n<0){if(i<0)return 7;if(i>0)return 5}console.log("Invalid direction, this should never appear so check the code",n,i)},Ae=function(t,e,n,i){var a=[0],r=[0],o=[];t>0&&a.push(-1),t<i-1&&a.push(1),e>0&&r.push(-1),e<n-1&&r.push(1);for(var s=0,c=a;s<c.length;s++){var l,u=c[s],h=Object(re.a)(r);try{for(h.s();!(l=h.n()).done;){var d=l.value;0===u&&0===d||o.push({x:t+u,y:e+d})}}catch(f){h.e(f)}finally{h.f()}}return o},Be=function(t,e){var n=Math.floor(t/e);return[t-n*e,n]},Pe=function(t,e,n){var i=Ce()();i.fromId=-1,i.openSet=new Me;for(var a=0;a<e;a++)for(var r=0;r<n;r++){var o=$t(n,1)(r,a,0),s=255-t[o];i.addNode(o,s);var c,l=Ae(r,a,e,n),u=Object(re.a)(l);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=$t(n,1)(h.x,h.y,0);i.addLink(o,d)}}catch(f){u.e(f)}finally{u.f()}}return i},Le=function(t,e,n){return function(t,e,n){var i=function(t,n){var i=Be(t.id,e),a=Object(l.a)(i,2),r=a[0],o=a[1],s=Be(n.id,e),c=Object(l.a)(s,2),u=c[0],h=c[1];return r===u||o===h?1:1.41};return{find:function(a,r){var o=t.getNode(a);if(!o)return Se;var s,c=t.getNode(r);if(!c)return Se;var l=t.getNode(r);if(l&&l.fromId===a&&l.trace.length>0)return l.trace;for(t.fromId===a&&0!==t.openSet.length||(t.openSet=new Me,o.fScore=i(o,c),o.distanceToSource=0,t.openSet.push(o),o.open=1,t.fromId=a);t.openSet.length>0;){if((s=t.openSet.pop()).id===r)return s.trace=Ie(t,s,e,n),s.fromId=a,s.trace;s.trace=Ie(t,s,e,n),s.fromId=a,s.closed=!0,t.forEachLinkedNode(s.id,u,!0)}return Se;function u(e){if(e.fromId!==t.fromId&&(e.fromId=t.fromId,e.trace=[],e.parentId=null,e.closed=!1,e.open=0,e.distanceToSource=Number.POSITIVE_INFINITY,e.fScore=Number.POSITIVE_INFINITY,e.heapIndex=-1),!e.closed){0===e.open&&(t.openSet.push(e),e.open=1);var n=s.distanceToSource+s.data;n>=e.distanceToSource||(e.parentId=s.id,e.distanceToSource=n,e.fScore=n+i(e,c),t.openSet.updateItem(e.heapIndex))}}}}}(t,e,n)},De=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return Object(Yt.a)(this,n),(i=e.call(this,t)).anchor=void 0,i.buffer=[],i.factor=void 0,i.graph=void 0,i.origin=void 0,i.path=[],i.pathfinder=void 0,i.points=[],i.previous=[],i.response=void 0,i.factor=a,i.filter(),i.image&&i.response?(i.graph=Pe(i.response.data,i.response.height,i.response.width),i.pathfinder=Le(i.graph,i.image.width*a,a),i):Object(ke.a)(i)}return Object(Kt.a)(n,[{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.annotation=void 0,this.anchor=void 0,this.buffer=[],this.graph=void 0,this.origin=void 0,this.points=[],this.previous=[]}},{key:"onMouseDown",value:function(t){this.annotated||(this.connected(t)&&(this.origin&&(this.buffer=[].concat(Object(H.a)(this.buffer),[this.origin.x,this.origin.y])),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour)),this.buffer&&0===this.buffer.length&&(this.annotating=!0,this.origin||(this.origin=t)))}},{key:"onMouseMove",value:function(t){if(this.image&&this.pathfinder&&!this.annotated&&this.annotating){if(this.anchor){var e=$t(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=$t(this.image.width*this.factor,1)(Math.floor(t.x*this.factor),Math.floor(t.y*this.factor),0);return this.path=O.flatten(this.pathfinder.find(e,n)),this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(H.a)(this.previous),[this.anchor.x,this.anchor.y],Object(H.a)(this.path)))}if(this.origin){var i=$t(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),a=$t(this.image.width*this.factor,1)(Math.floor(t.x*this.factor),Math.floor(t.y*this.factor),0);this.path=O.flatten(this.pathfinder.find(i,a)),this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y].concat(Object(H.a)(this.path))}}}},{key:"onMouseUp",value:function(t){if(!this.annotated&&this.annotating){if(this.connected(t)&&this.origin&&this.buffer&&this.buffer.length>0)return this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y,this.origin.x,this.origin.y]),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),void(this.buffer=[]);if(this.anchor&&this.image){var e=$t(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=$t(this.image.width*this.factor,1)(Math.floor(t.x*this.factor),Math.floor(t.y*this.factor),0);if(!this.pathfinder)return;return this.path=O.flatten(this.pathfinder.find(e,n)),this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(H.a)(this.previous),Object(H.a)(this.path)),this.previous=[].concat(Object(H.a)(this.previous),Object(H.a)(this.path)),void(this.anchor=t)}if(this.origin&&this.buffer.length>0){if(!this.image||!this.origin||!this.pathfinder)return;this.anchor=t;var i=$t(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),a=$t(this.image.width*this.factor,1)(Math.floor(t.x*this.factor),Math.floor(t.y*this.factor),0);return this.path=O.flatten(this.pathfinder.find(i,a)),this.buffer=[this.origin.x,this.origin.y].concat(Object(H.a)(this.path)),void(this.previous=[].concat(Object(H.a)(this.previous),[this.origin.x,this.origin.y],Object(H.a)(this.path)))}}}},{key:"connected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(t.x-this.origin.x,t.y-this.origin.y);return n<e}}},{key:"filter",value:function(){if(this.image){var t={factor:this.factor};this.response=this.image.resize(t).grey().sobelFilter()}}}]),n}(ve),ze=n(31),Re=n(30),_e=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).origin=void 0,t.width=void 0,t.height=void 0,t}return Object(Kt.a)(n,[{key:"computeBoundingBox",value:function(){if(this.origin&&this.width&&this.height)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.origin.x+this.width),Math.round(this.origin.y+this.height)]}},{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.origin=void 0,this.width=void 0,this.height=void 0}},{key:"onMouseDown",value:function(t){this.annotated||(this.width?(this.resize(t),this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox(),this.annotated=!0,this.annotating=!1):(this.origin=t,this.annotating=!0))}},{key:"onMouseMove",value:function(t){this.annotated||this.resize(t)}},{key:"onMouseUp",value:function(t){!this.annotated&&this.annotating&&this.width&&(this.resize(t),this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox(),this.annotated=!0,this.annotating=!1)}},{key:"convertToPoints",value:function(){if(this.width&&this.height&&this.origin){var t=[],e={x:this.origin.x,y:this.origin.y},n=this.width,i=this.height;this.width<0&&(n=Math.abs(this.width),e.x=this.origin.x-n),this.height<0&&(i=Math.abs(this.height),e.y=this.origin.y-i);for(var a=0;a<n;a++)t.push(Math.round(a+e.x)),t.push(Math.round(e.y));for(var r=0;r<i;r++)t.push(Math.round(e.x+n-1)),t.push(Math.round(r+e.y));for(var o=n-1;o>=0;o--)t.push(Math.round(o+e.x)),t.push(Math.round(e.y+i-1));for(var s=i-1;s>=0;s--)t.push(Math.round(e.x)),t.push(Math.round(s+e.y));return t}}},{key:"resize",value:function(t){this.origin&&(this.width=t.x-this.origin.x,this.height=t.y-this.origin.y)}}]),n}(ve),We=n(178),Te=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).graph=void 0,t.prediction=void 0,t.points=[],t.roi=void 0,t.offset=void 0,t.output=void 0,t}return Object(Kt.a)(n,[{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.prediction=void 0,this.points=[],this.roi=void 0,this.offset=void 0,this.output=void 0,this.origin=void 0,this.width=void 0}},{key:"onMouseUp",value:function(t){Object(ze.a)(Object(Re.a)(n.prototype),"onMouseUp",this).call(this,t),this.predict()}},{key:"predict",value:function(){var t=Object(F.a)(N.a.mark((function t(){var e,n,i,a,r=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.image&&this.origin&&this.width&&this.height){t.next=2;break}return t.abrupt("return");case 2:e=Math.floor(this.width),n=Math.floor(this.height),i=this.image.crop({x:this.origin.x,y:this.origin.y,width:e,height:n}),(a=We.e((function(){if(i){var t=We.a.fromPixels(i.getCanvas()),a=We.b.resizeBilinear(t,[128,128]).div(We.d(255)).expandDims(0);if(r.graph)return r.graph.predict(a).squeeze([0]).tile([1,1,3]).sub(.3).sign().relu().resizeBilinear([n,e]).pad([[r.origin.y,r.image.height-(r.origin.y+n)],[r.origin.x,r.image.width-(r.origin.x+e)],[0,0]])}})))&&We.a.toPixels(a).then(function(){var t=Object(F.a)(N.a.mark((function t(e){var n,i,a,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.output=new Gt.a({width:r.image.width,height:r.image.height,data:e}),n=r.output.grey().getMatrix().data,i=n.map((function(t){return Array.from(t)})),a=r.computeContours(i),o=O.flatten(a),r.points=o.map((function(t){return Math.round(t)})),r._mask=me(r.output.getChannel(0).data),r._contour=r.points,r._boundingBox=r.computeBoundingBoxFromContours(r._contour);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"compile",value:function(){var t=Object(F.a)(N.a.mark((function t(e){var i,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new n(e),"https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json",t.next=4,We.c("https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json");case 4:return i.graph=t.sent,a=We.f.adam(),i.graph.compile({optimizer:a,loss:"categoricalCrossentropy",metrics:["accuracy"]}),t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),n}(_e),Ne=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).brushSize=8,t.circlesData=void 0,t.buffer=[],t.outline=[],t.points=[],t.thresholdMask=function(t){for(var e=0;e<t.width;e++)for(var n=0;n<t.height;n++)t.getPixelXY(e,n)[0]>1&&t.setPixelXY(e,n,[255]);return t},t}return Object(Kt.a)(n,[{key:"computeBoundingBox",value:function(){if(this.outline){var t=O.chunk(this.outline,2);return[Math.round(O.min(O.map(t,O.first))),Math.round(O.min(O.map(t,O.last))),Math.round(O.max(O.map(t,O.first))),Math.round(O.max(O.map(t,O.last)))]}}},{key:"computeCircleData",value:function(){var t=this,e=document.createElement("canvas");e.width=this.image.width,e.height=this.image.height;var n=e.getContext("2d");if(n){qt(O.chunk(this.points,2),new Gt.a(this.image.width,this.image.height)).forEach((function(e){n.beginPath(),n.arc(Math.floor(e[0]),Math.floor(e[1]),t.brushSize/2,0,2*Math.PI,!0),n.fill()}));var i=Gt.a.fromCanvas(e);this.circlesData=this.thresholdMask(i.getChannel(3)).data}}},{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.circlesData=void 0,this.buffer=[],this.outline=[],this.points=[]}},{key:"onMouseDown",value:function(t){this.annotated||(this.annotating=!0,this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]))}},{key:"onMouseMove",value:function(t){!this.annotated&&this.annotating&&(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]))}},{key:"onMouseUp",value:function(t){if(!this.annotated&&this.annotating){if(this.annotated=!0,this.annotating=!1,this.points=this.buffer,this.computeCircleData(),!this.circlesData)return[];if(this._mask=me(this.circlesData),this.circlesData){var e=O.map(O.chunk(this.circlesData,this.image.width),(function(t){return Array.from(t)})),n=this.computeContours(e);this.outline=O.flatten(n),this._contour=this.outline,this._boundingBox=this.computeBoundingBoxFromContours(this._contour)}}}}],[{key:"setup",value:function(){var t=Object(F.a)(N.a.mark((function t(e,i){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new n(e)).brushSize=i,t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(ve),Fe=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).anchor=void 0,t.buffer=[],t.origin=void 0,t.points=[],t}return Object(Kt.a)(n,[{key:"deselect",value:function(){this.annotated=!1,this.annotating=!1,this.annotation=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(t){this.annotated||(this.connected(t)&&(this.origin&&(this.buffer=[].concat(Object(H.a)(this.buffer),[this.origin.x,this.origin.y])),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.annotating=!0,this.origin||(this.origin=t)))}},{key:"onMouseMove",value:function(t){if(!this.annotated&&this.annotating)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]))):void(this.origin&&(this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y,t.x,t.y]))}},{key:"onMouseUp",value:function(t){if(!this.annotated&&this.annotating)return this.connected(t)&&this.origin&&this.buffer&&this.buffer.length>0?(this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y,this.origin.x,this.origin.y]),this.annotated=!0,this.annotating=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.buffer=[],this.anchor=void 0,void(this.origin=void 0)):this.anchor?(this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(H.a)(this.buffer),[t.x,t.y]),void(this.anchor=t)):void(this.origin&&this.buffer.length>0&&(this.anchor=t))}},{key:"connected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(t.x-this.origin.x,t.y-this.origin.y);return n<e}}}]),n}(ve),Ze=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).currentData=void 0,t.colorMasks=void 0,t.currentSuperpixel=void 0,t.superpixels=void 0,t.currentMask=void 0,t.map=void 0,t.masks=void 0,t}return Object(Kt.a)(n,[{key:"computeObjectSelectionMask",value:function(){if(this.currentMask){for(var t=this.currentMask.grey(),e=new Gt.a(this.currentMask.width,this.currentMask.height,{alpha:0,bitDepth:1,components:1}),n=0;n<e.width;n++)for(var i=0;i<e.height;i++)t.getPixelXY(n,i)[0]>0&&e.setBitXY(n,i);return me(e.data)}}},{key:"filter",value:function(){var t=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,a=arguments.length>4?arguments[4]:void 0;a||(a=i*i/4);for(var r=e,o=n,s=parseInt(String(r/i),10),c=parseInt(String(o/i),10),l=parseInt(String(s*c),10),u=parseInt(String(r*o),10),h=new Array(u),d=new Float32Array(5*l),f=new Float32Array(5*l),p=new Float32Array(2*l),g=new Float32Array(u),b=new Float32Array(u),m=new Float32Array(u),j=new Float32Array(3*r*o),v=2.2,O=0;O<r*o;O++){var x=Math.pow(.00392156862*parseFloat(String(t[4*O])),v),y=Math.pow(.00392156862*parseFloat(String(t[4*O+1])),v),k=Math.pow(.00392156862*parseFloat(String(t[4*O+2])),v);j[O]=.488718*x+.31068*y+.200602*k,j[O+r*o]=.176204*x+.812985*y+.0108109*k,j[O+2*r*o]=.0102048*y+.989795*k}for(var w=1/3,C=1/3,M=1,S=1/(w/C),I=1/M,E=1/((1-w-C)/C*M),A=new Float32Array(3*r*o),B=0;B<r*o;B++){var P=j[B]*S>.00856?Math.pow(j[B]*S,.33333333):7.78706891568*j[B]*S+.1379310336,L=j[r*o+B]*I>.00856?Math.pow(j[r*o+B]*I,.33333333):7.78706891568*j[r*o+B]*I+.1379310336,D=j[2*r*o+B]*E>.00856?Math.pow(j[2*r*o+B]*E,.33333333):7.78706891568*j[2*r*o+B]*E+.1379310336;A[B]=116*L-16,A[B+r*o]=500*(P-L),A[B+2*r*o]=200*(L-D)}for(var z=new Float32Array(u),R=0;R<3;R++)for(var _=1;_<o-1;_++)for(var W=1;W<r-1;W++){var T=A[R*r*o+_*r+W-1],N=A[R*r*o+_*r+W+1],F=A[R*r*o+(_+1)*r+W],Z=A[R*r*o+(_-1)*r+W];z[_*r+W]=z[_*r+W]+(T-N)*(T-N)+(F-Z)*(F-Z)}for(var H=0,U=0,G=0;G<c;G++)for(var Y=0;Y<s;Y++){var X=0,K=0,V=1/0,Q=parseInt(String(Math.round(i*(Y+.5))),10),q=parseInt(String(Math.round(i*(G+.5))),10);Q=Math.max(Math.min(Q,r-1),0),q=Math.max(Math.min(q,o-1),0);for(var J=Math.max(0,q-1);J<=Math.min(o-1,q+1);J++)for(var $=Math.max(0,Q-1);$<=Math.min(r-1,Q+1);$++){var tt=z[J*r+$];tt<V&&(V=tt,X=$,K=J)}d[H++]=parseFloat(String(X)),d[H++]=parseFloat(String(K)),d[H++]=A[K*r+X],d[H++]=A[r*o+K*r+X],d[H++]=A[2*r*o+K*r+X],p[U++]=100,p[U++]=i*i}for(var et=10,nt=new Int32Array(u),it=0;it<et;++it){for(var at=0;at<m.length;++at)m[at]=1/0;for(var rt=0;rt<s*c;++rt)for(var ot=Math.round(d[5*rt]),st=Math.round(d[5*rt+1]),ct=Math.max(0,st-i);ct<Math.min(o,st+i);++ct)for(var lt=Math.max(0,ot-i);lt<Math.min(r,ot+i);++lt){var ut=(lt-ot)*(lt-ot)+(ct-st)*(ct-st),ht=A[ct*r+lt]-d[5*rt+2],dt=A[r*o+ct*r+lt]-d[5*rt+3],ft=A[2*r*o+ct*r+lt]-d[5*rt+4],pt=ht*ht+dt*dt+ft*ft,gt=Math.sqrt(pt/p[2*rt]+ut/p[2*rt+1]);gt<m[ct*r+lt]&&(m[ct*r+lt]=gt,nt[ct*r+lt]=rt)}for(var bt=0;bt<o;++bt)for(var mt=0;mt<r;++mt)p[2*nt[bt*r+mt]]<g[bt*r+mt]&&(p[2*nt[bt*r+mt]]=g[bt*r+mt]),p[2*nt[bt*r+mt]+1]<b[bt*r+mt]&&(p[2*nt[bt*r+mt]+1]=b[bt*r+mt]);for(var jt=new Float32Array(p.length/2),vt=new Float32Array(p.length/2),Ot=0;Ot<nt.length;Ot++){var xt=nt[Ot];jt[xt]<g[xt]&&(jt[xt]=g[xt],p[2*xt]=g[xt]),vt[xt]<b[xt]&&(vt[xt]=b[xt],p[2*xt+1]=b[xt])}for(var yt=0;yt<h.length;++yt)h[yt]=0;for(var kt=0;kt<f.length;++kt)f[kt]=0;for(var wt=void 0,Ct=0;Ct<o;Ct++)for(var Mt=0;Mt<r;Mt++)h[wt=nt[Mt+Ct*r]]++,f[5*wt]+=Mt,f[5*wt+1]+=Ct,f[5*wt+2]+=A[Ct*r+Mt],f[5*wt+3]+=A[r*o+Ct*r+Mt],f[5*wt+4]+=A[2*r*o+Ct*r+Mt];for(wt=0;wt<l;wt++){var St=1/Math.max(h[wt],1e-8);f[5*wt]=f[5*wt]*St,f[5*wt+1]=f[5*wt+1]*St,f[5*wt+2]=f[5*wt+2]*St,f[5*wt+3]=f[5*wt+3]*St,f[5*wt+4]=f[5*wt+4]*St}for(var It=0,Et=0;Et<d.length;++Et){var At=d[Et]-f[Et];It+=Math.sqrt(At*At)}if(It<1e-5)break;for(var Bt=0;Bt<d.length;++Bt)d[Bt]=f[Bt]}for(var Pt,Lt,Dt,zt,Rt,_t,Wt,Tt,Nt,Ft=new Int32Array(u),Zt=new Int32Array(u),Ht=[1,-1,0,0],Ut=[0,0,1,-1],Gt=0;Gt<u;Gt++)if(!Ft[Gt]){Lt=nt[Gt],zt=0,Pt=0,Zt[Pt++]=Gt,Dt=Lt+1,Ft[Gt]=Lt+1,Rt=Gt%r,_t=Math.floor(Gt/r);for(var Yt=0;Yt<4;Yt++)Nt=(Wt=Rt+Ht[Yt])+(Tt=_t+Ut[Yt])*r,0<=Wt&&Wt<r&&0<=Tt&&Tt<o&&Ft[Nt]&&(Dt=Ft[Nt]);for(;zt<Pt;){var Xt=Zt[zt++];Rt=Xt%r,_t=Math.floor(Xt/r);for(var Kt=0;Kt<4;++Kt)Nt=(Wt=Rt+Ht[Kt])+(Tt=_t+Ut[Kt])*r,0<=Wt&&Wt<r&&0<=Tt&&Tt<o&&0===Ft[Nt]&&nt[Nt]===Lt&&(Ft[Nt]=Lt+1,Zt[Pt++]=Nt)}if(Pt<a)for(;Pt>0;)Ft[Zt[--Pt]]=Dt}for(var Vt=0;Vt<u;++Vt)--Ft[Vt];for(var Qt=0;Qt<u;++Qt)nt[Qt]=Ft[Qt];return{count:0,map:t,superpixels:nt}}(this.image.getRGBAData(),this.image.width,this.image.height,40);return{count:t.count,map:t.map,superpixels:t.superpixels}}},{key:"deselect",value:function(){}},{key:"onMouseDown",value:function(t){if(!this.annotated&&this.superpixels&&this.masks){var e=Math.round(t.x)+Math.round(t.y)*this.image.width;this.currentSuperpixel=this.superpixels[e];var n=this.masks[this.currentSuperpixel];this.currentMask=n[2],this.currentData=n[1],this.annotating=!0}}},{key:"onMouseMove",value:function(t){if(!this.annotated&&this.superpixels&&this.masks){var e=Math.round(t.x)+Math.round(t.y)*this.image.width,n=this.superpixels[e];if(n!==this.currentSuperpixel){this.currentSuperpixel=n;var i=this.masks[n];if(this.currentMask=i[2],this.annotating&&this.currentData){var a=i[1];this.currentData=this.addImages(a,this.currentData),this.currentMask=new Gt.a(this.image.width,this.image.height,this.currentData)}}}}},{key:"onMouseUp",value:function(t){if(!this.annotated&&this.annotating&&this.currentMask){var e=this.currentMask.grey().getMatrix().data.map((function(t){return Array.from(t)})),n=this.computeContours(e);this.points=O.flatten(n.map((function(t){return[Math.round(t[0]),Math.round(t[1])]}))),this._contour=this.points,this._mask=this.computeObjectSelectionMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.annotated=!0,this.annotating=!1}}},{key:"addImages",value:function(t,e){return t.map((function(t,n){return(n+1)%4===0?Math.max(t,e[n]):Math.min(t+e[n],255)}))}}],[{key:"colorSuperpixelMap",value:function(t,e){for(var n=[255,0,0,150],i=[],a=0;a<t.height;a++)for(var r=0;r<t.width;r++)255===t.getPixelXY(r,a)[0]?i.push(n):i.push([0,0,0,0]);for(var o=new Gt.a(t.width,t.height,new Uint8Array(t.width*t.height*4),{alpha:1}),s=0;s<t.width;s++)for(var c=0;c<t.height;c++)255===t.getPixelXY(s,c)[0]?o.setPixelXY(s,c,n):o.setPixelXY(s,c,[0,0,0,0]);return[Int32Array.from(O.flatten(i)),o]}},{key:"setup",value:function(t){var e=new n(t),i=e.filter(),a=(i.count,i.map),r=i.superpixels;e.map=a,e.superpixels=r;var o=O.uniq(r),s={};return O.forEach(o,(function(e){var i=r.map((function(t){return t===e?255:0})),a=new Gt.a(t.width,t.height,i,{components:1,alpha:0}),o=n.colorSuperpixelMap(a,"green"),c=Object(l.a)(o,2),u=c[0],h=c[1];s[e]=[i,u,h]})),e.masks=s,e}}]),n}(ve),He=function(){var t=Ht(),e=t.onClose,n=t.onOpen,i=t.open;return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsxs)(nt.a,{button:!0,onClick:n,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(Ct.a,{})}),Object(J.jsx)(it.a,{primary:"Create category"})]}),Object(J.jsx)(Zt,{onClose:e,open:i})]})},Ue=n(887),Ge=n(522),Ye=n.n(Ge),Xe=n(523),Ke=n.n(Xe),Ve=function(t){var e=t.category,n=Object(C.c)();return Object(J.jsx)(mt.a,{children:Object(J.jsx)(Ue.a,{checked:e.visible,checkedIcon:Object(J.jsx)(Ye.a,{style:{color:e.color}}),disableRipple:!0,edge:"start",icon:Object(J.jsx)(Ke.a,{style:{color:e.color}}),onClick:function(){n(Y.actions.setCategoryVisibility({category:e,visible:!e.visible}))},tabIndex:-1})})},Qe=n(876),qe=n(524),Je=n.n(qe),$e=n(822),tn=n(875),en=function(t){var e=t.category,n=t.onCloseCategoryMenu;return Object(J.jsx)(Z.a,{onClick:function(t){n(t);e.id,e.visible},children:Object(J.jsxs)(I.a,{variant:"inherit",children:[e.visible?"Hide":"Show"," category"]})})},nn=function(t){t.category;var e=t.onCloseCategoryMenu;return Object(J.jsx)(Z.a,{onClick:function(t){e(t)},children:Object(J.jsx)(I.a,{variant:"inherit",children:"Hide other categories"})})},an=function(t){var e=t.anchorElCategoryMenu,n=t.category,i=t.onCloseCategoryMenu,a=t.openCategoryMenu,r=t.onOpenDeleteCategoryDialog,o=t.onOpenEditCategoryDialog;return Object(J.jsx)(R.a,{anchorEl:e,anchorOrigin:{horizontal:"center",vertical:"bottom"},getContentAnchorEl:null,onClose:i,open:a,transformOrigin:{horizontal:"center",vertical:"top"},children:Object(J.jsxs)($e.a,{dense:!0,variant:"menu",children:[Object(J.jsx)(nn,{category:n,onCloseCategoryMenu:i}),Object(J.jsx)(en,{category:n,onCloseCategoryMenu:i}),"00000000-0000-0000-0000-000000000000"!==n.id&&Object(J.jsxs)("div",{children:[Object(J.jsx)(tn.a,{}),Object(J.jsx)(Z.a,{onClick:function(t){o(),i(t)},children:Object(J.jsx)(I.a,{variant:"inherit",children:"Edit category"})}),Object(J.jsx)(Z.a,{onClick:function(t){r(),i(t)},children:Object(J.jsx)(I.a,{variant:"inherit",children:"Delete category"})})]})]})})},rn=function(t){var e=t.category,n=t.onClose,i=t.open,a=Object(C.c)(),r=Object(C.d)(x),o=Object(C.d)(b);return Object(J.jsxs)(tt.a,{fullWidth:!0,onClose:n,open:i,children:[Object(J.jsxs)(Mt.a,{children:['Delete "',e.name,'" category?']}),Object(J.jsxs)(St.a,{children:['Images categorized as "',e.name,'" will not be deleted.']}),Object(J.jsxs)(Et.a,{children:[Object(J.jsx)(L.a,{onClick:n,color:"primary",children:"Cancel"}),Object(J.jsx)(L.a,{onClick:function(){r.id===e.id&&a(Y.actions.setSeletedCategory({selectedCategory:"00000000-0000-0000-0000-000000000000"})),a(Y.actions.deleteCategory({category:e}));var t=null===o||void 0===o?void 0:o.map((function(t){return t.categoryId===e.id?Object(A.a)(Object(A.a)({},t),{},{categoryId:"00000000-0000-0000-0000-000000000000"}):t}));a(Y.actions.setImageInstances({instances:t})),n()},color:"primary",children:"Delete"})]})]})},on=Object(B.a)((function(t){return{alert:{width:t.spacing(64)},appBar:{transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},appBarShift:{marginLeft:t.spacing(32),transition:t.transitions.create(["margin","width"],{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut}),width:"calc(100% - ".concat(t.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:t.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:t.spacing(8),paddingTop:t.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:t.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:t.spacing(32)},drawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),drawerPaper:{width:t.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:t.zIndex.drawer+1},imageDialogContent:{paddingBottom:t.spacing(12),paddingTop:t.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-t.spacing(32),padding:t.spacing(3),transition:t.transitions.create("margin",{duration:t.transitions.duration.leavingScreen,easing:t.transitions.easing.sharp})},mainShift:{marginLeft:t.spacing(32),transition:t.transitions.create("margin",{duration:t.transitions.duration.enteringScreen,easing:t.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:t.spacing(3)},sliderInput:{width:42}}})),sn=function(t){var e=t.category,n=t.onCloseDialog,i=t.openDialog,r=Object(C.c)(),o=on(),s=Object(a.useState)(e.color),c=Object(l.a)(s,2),u=c[0],h=c[1],d=Object(a.useState)(e.name),p=Object(l.a)(d,2),g=p[0],b=p[1],m=Object(C.d)(f);return Object(J.jsxs)(tt.a,{fullWidth:!0,onClose:n,open:i,children:[Object(J.jsx)(Mt.a,{children:"Edit category"}),Object(J.jsx)(St.a,{children:Object(J.jsx)("div",{children:Object(J.jsxs)(Wt.a,{container:!0,spacing:1,children:[Object(J.jsx)(Wt.a,{item:!0,xs:2,className:o.createCategoryDialogItem,children:Object(J.jsx)(_t,{color:u,onColorChange:function(t){h(t.hex)}})}),Object(J.jsx)(Wt.a,{item:!0,xs:10,children:Object(J.jsx)(It.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(t){b(t.target.value)},value:g})})]})})}),Object(J.jsxs)(Et.a,{children:[Object(J.jsx)(L.a,{onClick:n,color:"primary",children:"Cancel"}),Object(J.jsx)(L.a,{onClick:function(){var t=null===m||void 0===m?void 0:m.map((function(t){return t.id===e.id?Object(A.a)(Object(A.a)({},e),{},{color:u,name:g}):t}));r(Y.actions.setCategories({categories:t})),n()},color:"primary",children:"Update"})]})]})},cn=function(t){var e=t.activeCategory,n=t.onCategoryClick,i=bt(),a=Object(C.d)(g),o=Object(C.d)(k),s=Ht(),c=s.onClose,u=s.onOpen,h=s.open,d=Ht(),f=d.onClose,p=d.onOpen,b=d.open,m=r.a.useState(null),j=Object(l.a)(m,2),v=j[0],O=j[1],x=function(t){O(t.currentTarget)},y=function(){O(null)};return Object(J.jsxs)(gt.a,{anchor:"left",className:i.applicationDrawer,classes:{paper:i.applicationDrawerPaper},open:!0,variant:"persistent",children:[Object(J.jsx)("div",{className:i.applicationDrawerHeader}),Object(J.jsxs)(kt,{primary:"Categories",children:[a.map((function(t){return Object(J.jsxs)("div",{children:[Object(J.jsxs)(nt.a,{button:!0,dense:!0,id:t.id,onClick:function(e){return n(e,t)},selected:t.id===e.id,children:[Object(J.jsx)(Ve,{category:t}),Object(J.jsx)(it.a,{id:t.id,primary:t.name,primaryTypographyProps:{noWrap:!0}}),Object(J.jsx)(Qe.a,{children:Object(J.jsx)(Bt.a,{edge:"end",onClick:x,children:Object(J.jsx)(Je.a,{})})})]}),Object(J.jsx)(an,{anchorElCategoryMenu:v,category:t,onCloseCategoryMenu:y,onOpenCategoryMenu:x,onOpenDeleteCategoryDialog:u,onOpenEditCategoryDialog:p,openCategoryMenu:Boolean(v)}),Object(J.jsx)(rn,{category:t,onClose:c,open:h}),Object(J.jsx)(sn,{category:t,onCloseDialog:f,openDialog:b})]},t.id)})),Object(J.jsxs)(nt.a,{button:!0,dense:!0,id:o.id,onClick:function(t){return n(t,o)},selected:o.id===e.id,children:[Object(J.jsx)(Ve,{category:o}),Object(J.jsx)(it.a,{id:o.id,primary:o.name,primaryTypographyProps:{noWrap:!0}})]}),Object(J.jsx)(He,{})]})]})},ln=Object(B.a)((function(t){return{appBar:{zIndex:t.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3),width:"100%"},options:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(A.a)({},t.mixins.toolbar),settingsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:t.spacing(32)},applicationDrawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:t.spacing(32)}}})),un=n(525),hn=n.n(un),dn=n(537),fn=Object(dn.a)({overrides:{MuiDrawer:{paperAnchorDockedLeft:{borderRight:"1px solid rgba(16, 16, 16)"},paperAnchorDockedRight:{borderLeft:"1px solid rgba(16, 16, 16)"}},MuiListItem:{root:{"&$selected":{backgroundColor:"rgba(60, 61, 62)"}}},MuiSlider:{rail:{color:"rgba(73, 73, 73)"},thumb:{color:"rgba(201, 201, 201)"},track:{color:"rgba(159, 159, 159)"}}},palette:{background:{paper:"rgba(40, 40, 40)",default:"rgba(50, 50, 50)"},divider:"rgba(72, 72, 72)",text:{primary:"rgba(190, 190, 190)"},type:"dark"}}),pn=function(t){var e=t.handleCollapse,n=t.name,i=t.settings,a=ln();return Object(J.jsxs)(gt.a,{anchor:"right",className:a.options,classes:{paper:a.settingsPaper},variant:"permanent",children:[Object(J.jsx)("div",{className:a.settingsToolbar}),Object(J.jsx)(et.a,{children:Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(it.a,{primary:n}),Object(J.jsx)(Bt.a,{onClick:function(){e(!1)},children:Object(J.jsx)(hn.a,{fontSize:"small",style:{fill:fn.palette.text.primary}})})]})}),Object(J.jsx)(tn.a,{}),i]})},gn=n(885),bn=n(542);function mn(){return(mn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function jn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var vn=a.createElement("g",{fill:"none"},a.createElement("path",{d:"M0 0h24v24h-24Z"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 21h-11c-.552 0-1-.448-1-1v-11c0-.552.448-1 1-1h11c.552 0 1 .448 1 1v11c0 .552-.448 1-1 1Z"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 5v-1c0-.552-.448-1-1-1h-1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 15v1c0 .552-.448 1-1 1h-1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 5v-1c0-.552.448-1 1-1h1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 3h2"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 11v-2 0 0Z"}));function On(t,e){var n=t.title,i=t.titleId,r=jn(t,["title","titleId"]);return a.createElement("svg",mn({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),n?a.createElement("title",{id:i},n):null,vn)}var xn=a.forwardRef(On),yn=(n.p,n(893)),kn=function(){var t=Object(C.c)(),e=Object(C.d)(y),n=Object(C.d)(j);return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsx)(yn.a,{"aria-label":"selection mode",name:"selection-mode",onChange:function(e){var n={selectionMode:parseInt(e.target.value)};t(Y.actions.setSelectionMode(n))},value:e,children:Object(J.jsxs)(et.a,{children:[Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(gn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:h.New})}),Object(J.jsx)(it.a,{primary:"New",secondary:"Create a new selection."})]}),Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(gn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:h.Add})}),Object(J.jsx)(it.a,{primary:"Add",secondary:"Add area to the existing selection."})]}),Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(gn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:h.Subtract})}),Object(J.jsx)(it.a,{primary:"Subtract",secondary:"Subtract area from the existing selection."})]}),Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(gn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:h.Intersect})}),Object(J.jsx)(it.a,{primary:"Intersect",secondary:"Constrain the boundary of the new selection to the existing selection."})]})]})}),Object(J.jsx)(tn.a,{}),Object(J.jsx)(et.a,{children:Object(J.jsxs)(nt.a,{button:!0,onClick:function(){t(Y.actions.setInvertMode({invertMode:!n}))},dense:!0,children:[Object(J.jsx)(mt.a,{children:Object(J.jsx)(bn.a,{children:Object(J.jsx)(xn,{})})}),Object(J.jsx)(it.a,{primary:"Invert selection"})]})})]})},wn=function(t){var e=t.children,n=t.name,i=t.onClick,a=t.selected;return Object(J.jsx)(_.a,{"aria-label":n,title:n,children:Object(J.jsx)(nt.a,{button:!0,onClick:i,selected:a,children:Object(J.jsx)(mt.a,{children:Object(J.jsx)(bn.a,{fontSize:"small",children:e})})})})},Cn=Object(B.a)((function(t){return{drawer:{flexShrink:0,whiteSpace:"nowrap",width:56},paper:{width:56},toolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)}}));function Mn(){return(Mn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Sn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var In=a.createElement("g",{id:"Color-adjustment",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},a.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),a.createElement("path",{d:"M8.25100003,21.5020001 C4.80400002,21.5020001 2.00000001,18.6980001 2.00000001,15.2510001 C2.00000001,11.804 4.80400002,9.00000004 8.25100003,9.00000004 C11.698,9.00000004 14.5020001,11.804 14.5020001,15.2510001 C14.5020001,18.6980001 11.698,21.5020001 8.25100003,21.5020001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.7490001,21.5020001 C12.3020001,21.5020001 9.49800004,18.6980001 9.49800004,15.2510001 C9.49800004,11.804 12.3020001,9.00000004 15.7490001,9.00000004 C19.1960001,9.00000004 22.0000001,11.804 22.0000001,15.2510001 C22.0000001,18.6980001 19.1960001,21.5020001 15.7490001,21.5020001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.0100001,15.0000001 C8.56300004,15.0000001 5.75900002,12.1960001 5.75900002,8.74900004 C5.75900002,5.30200002 8.56300004,2.49800001 12.0100001,2.49800001 C15.4570001,2.49800001 18.2610001,5.30200002 18.2610001,8.74900004 C18.2610001,12.1960001 15.4570001,15.0000001 12.0100001,15.0000001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function En(t,e){var n=t.title,i=t.titleId,r=Sn(t,["title","titleId"]);return a.createElement("svg",Mn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Color adjustment"):n?a.createElement("title",{id:i},n):null,In)}var An=a.forwardRef(En);n.p;function Bn(){return(Bn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Pn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Ln=a.createElement("g",{id:"Color-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.000000, 2.000000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M5.25800002,14.4180001 L1.51600001,10.676 C0.689000003,9.84900004 0.689000003,8.50900004 1.51600001,7.68200003 L7.15000003,2.04800001 L13.8860001,8.78400004 L8.25200003,14.4180001 C7.42500003,15.2440001 6.08400003,15.2440001 5.25800002,14.4180001 Z"}),a.createElement("path",{d:"M16.8830001,11.774 C16.8830001,11.774 14.7660001,14.0710001 14.7660001,15.4790001 C14.7660001,16.6430001 15.7190001,17.5960001 16.8830001,17.5960001 C18.0470001,17.5960001 19.0000001,16.6430001 19.0000001,15.4780001 C19.0000001,14.0710001 16.8830001,11.774 16.8830001,11.774 L16.8830001,11.774 Z"}),a.createElement("line",{x1:7.15000003,y1:2.05000001,x2:6.06000003,y2:.940000004}),a.createElement("line",{x1:13.8900001,y1:8.78000004,x2:.930000004,y2:8.78000004}),a.createElement("line",{x1:1.42000001,y1:19.4400001,x2:10,y2:19.4400001})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Dn(t,e){var n=t.title,i=t.titleId,r=Pn(t,["title","titleId"]);return a.createElement("svg",Bn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Color selection"):n?a.createElement("title",{id:i},n):null,Ln)}var zn=a.forwardRef(Dn);n.p;function Rn(){return(Rn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function _n(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Wn=a.createElement("g",{id:"Elliptical-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M18.3640001,5.63604002 C21.8787201,9.15076004 21.8787201,14.8492401 18.3640001,18.3639401 C14.8492801,21.8786601 9.15080004,21.8786601 5.63610002,18.3639401 C2.12138001,14.8492201 2.12138001,9.15074004 5.63610002,5.63604002 C9.15082004,2.12132001 14.8493001,2.12132001 18.3640001,5.63604002",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Tn(t,e){var n=t.title,i=t.titleId,r=_n(t,["title","titleId"]);return a.createElement("svg",Rn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Elliptical selection"):n?a.createElement("title",{id:i},n):null,Wn)}var Nn=a.forwardRef(Tn);n.p;function Fn(){return(Fn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Zn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Hn=a.createElement("g",{id:"Hand",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.005000, -0.005000)"},a.createElement("polygon",{id:"Path",points:"0 0 24.01 0 24.01 24.01 0 24.01"}),a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.005000, 3.005000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M0.876688223,7.82337055 C1.82416266,7.02907695 3.20659866,7.09971911 4.07146412,7.98533063 L5.53482321,9.47915396 L5.53482321,3.45217126 C5.53482321,1.10030408 7.78886826,-0.560648269 9.97210561,0.183678925 L14.6976765,1.79294189 C16.0750548,2.26159234 17.0039844,3.57967175 17.0039844,5.06143422 L17.0039844,12.1222047 C17.0039844,15.4044809 14.3992726,18.0664844 11.1876378,18.0664844 L8.44636831,18.0664844 C6.61379765,18.0664844 4.88912444,17.1843188 3.78991922,15.6853265 L0.478816396,11.165951 C-0.284895203,10.1218254 -0.109561856,8.64867779 0.876688223,7.82337055 L0.876688223,7.82337055 Z"}))));function Un(t,e){var n=t.title,i=t.titleId,r=Zn(t,["title","titleId"]);return a.createElement("svg",Fn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Hand"):n?a.createElement("title",{id:i},n):null,Hn)}var Gn=a.forwardRef(Un);n.p;function Yn(){return(Yn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Xn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Kn=a.createElement("g",{id:"Lasso-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",id:"Path",stroke:"#BABABA"},a.createElement("path",{d:"M18.9200215,5.20050274 C22.7422808,7.79423331 22.7422808,11.9995035 18.9200215,14.593244 C15.0977622,17.1869746 8.90062147,17.1869746 5.07841219,14.593244 C1.25615292,11.9995135 1.25615292,7.79424331 5.07841219,5.20050274 C8.90067146,2.60677217 15.0978122,2.60677217 18.9200215,5.20050274",strokeWidth:1.49992515,transform:"translate(11.999217, 9.896873) rotate(-14.928464) translate(-11.999217, -9.896873) "}),a.createElement("path",{d:"M13.7110001,16.3150001 C9.54400004,17.4260001 4.30200002,16.4030001 4.30200002,12.9560001",strokeWidth:1.5}),a.createElement("path",{d:"M10.048,14.1050001 C10.048,16.3230001 8.89900004,19.8510001 4.30200002,21.0000001",strokeWidth:1.5}),a.createElement("path",{d:"M4.30200002,12.9560001 C4.30200002,9.50900004 10.048,9.50900004 10.048,14.1050001",strokeWidth:1.5})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Vn(t,e){var n=t.title,i=t.titleId,r=Xn(t,["title","titleId"]);return a.createElement("svg",Yn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Lasso selection"):n?a.createElement("title",{id:i},n):null,Kn)}var Qn=a.forwardRef(Vn);n.p;function qn(){return(qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Jn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var $n=a.createElement("g",{id:"Magnetic-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(2.995000, 2.995000)",stroke:"#BABABA",strokeWidth:1.5},a.createElement("line",{x1:15.1525604,y1:13.35081,x2:11.8391804,y2:10.0364296,id:"Path"}),a.createElement("line",{x1:7.97357042,y1:6.17081958,x2:4.65919,y2:2.85743958,id:"Path"}),a.createElement("path",{d:"M8.75389542,0.324384583 L10.505625,2.07611417 C10.9368635,2.50774241 10.9368635,3.20713676 10.505625,3.638765 L5.487535,8.65585458 C4.41981785,9.72359699 4.41981785,11.4547226 5.487535,12.522465 C6.55527738,13.5901821 8.28640301,13.5901821 9.35414542,12.522465 L14.371235,7.504375 C14.8028633,7.07313649 15.5022576,7.07313649 15.9338858,7.504375 L17.6856154,9.25610458 C17.8936381,9.46269483 18.0106252,9.74375249 18.0106252,10.0369298 C18.0106252,10.3301071 17.8936381,10.6111648 17.6856154,10.817755 L12.6675254,15.835845 C9.76959655,18.7328702 5.07208391,18.7328702 2.174155,15.835845 C-0.722870151,12.9379161 -0.722870151,8.24040345 2.174155,5.34247458 L7.192245,0.324384583 C7.39883524,0.116361933 7.6798929,-0.000625150988 7.97307021,-0.000625150988 C8.26624751,-0.000625150988 8.54730517,0.116361933 8.75389542,0.324384583 Z",id:"Path"})),a.createElement("polygon",{id:"Path",points:"-0.005 -0.005 24.005 -0.005 24.005 24.005 -0.005 24.005"}));function ti(t,e){var n=t.title,i=t.titleId,r=Jn(t,["title","titleId"]);return a.createElement("svg",qn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Magnetic selection"):n?a.createElement("title",{id:i},n):null,$n)}var ei=a.forwardRef(ti);n.p;function ni(){return(ni=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function ii(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var ai=a.createElement("g",{id:"Object-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{transform:"translate(2.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("path",{d:"M16.1970001,12.9320001 L16.1970001,12.9320001 L18.1730001,14.9080001 C18.6090001,15.3440001 18.6090001,16.0520001 18.1730001,16.4880001 L16.9870001,17.6740001 C16.5510001,18.1100001 15.8430001,18.1100001 15.4070001,17.6740001 L13.4310001,15.6980001 L11.9420001,17.1870001 C11.6480001,17.4810001 11.1480001,17.3630001 11.0170001,16.9690001 L8.14500004,8.35200005 C7.99900004,7.91500005 8.41500004,7.50000004 8.85200005,7.64500004 L17.4690001,10.5170001 C17.8630001,10.6480001 17.9810001,11.1480001 17.6870001,11.4420001 L16.1970001,12.9320001"}),a.createElement("line",{x1:2.78000002,y1:7.93000005,x2:.50000001,y2:7.93000005}),a.createElement("line",{x1:4.44000003,y1:3.94000003,x2:2.82000002,y2:2.32000002}),a.createElement("line",{x1:4.40000003,y1:11.9600001,x2:2.78000002,y2:13.5800001}),a.createElement("line",{x1:8.43000004,y1:2.28000002,x2:8.43000004,y2:1.25000099e-8}),a.createElement("line",{x1:12.4600001,y1:3.90000003,x2:14.0800001,y2:2.28000002})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function ri(t,e){var n=t.title,i=t.titleId,r=ii(t,["title","titleId"]);return a.createElement("svg",ni({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Object selection"):n?a.createElement("title",{id:i},n):null,ai)}var oi=a.forwardRef(ri);n.p;function si(){return(si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function ci(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var li=a.createElement("g",{id:"Pen-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M14.3500001,1.196 L6.31300003,8.22800003 C5.44200002,8.99000004 5.39800002,10.329 6.21600003,11.147 L7.36500003,12.2960001 C8.18300003,13.1140001 9.52300004,13.0690001 10.284,12.1990001 L17.3160001,4.16200002 C18.0450001,3.33000001 18.0030001,2.07500001 17.2210001,1.29200001 C16.4380001,0.509000002 15.1830001,0.468000002 14.3500001,1.196 Z"}),a.createElement("line",{x1:7.87000003,y1:6.87000003,x2:11.65,y2:10.65}),a.createElement("path",{d:"M0.599000002,17.3230001 L4.30200002,17.3230001 C7.28700003,17.3230001 8.78200004,13.7140001 6.67100003,11.603 C5.11900002,10.051 2.48300001,10.622 1.71300001,12.6770001 L0.191000001,16.7350001 C0.0850000004,17.0200001 0.295000001,17.3230001 0.599000002,17.3230001 Z"})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function ui(t,e){var n=t.title,i=t.titleId,r=ci(t,["title","titleId"]);return a.createElement("svg",si({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Pen selection"):n?a.createElement("title",{id:i},n):null,li)}var hi=a.forwardRef(ui);n.p;function di(){return(di=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function fi(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var pi=a.createElement("g",{id:"Polygonal-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M10.922,3.63000002 L3.68100002,8.89100004 C3.03800001,9.35800004 2.77000001,10.185 3.01500001,10.941 L5.78100002,19.4540001 C6.02600003,20.2090001 6.73000003,20.7210001 7.52500003,20.7210001 L16.4760001,20.7210001 C17.2700001,20.7210001 17.9740001,20.2100001 18.2200001,19.4540001 L20.9860001,10.941 C21.2310001,10.186 20.9630001,9.35800004 20.3200001,8.89100004 L13.0780001,3.63000002 C12.4350001,3.16300001 11.565,3.16300001 10.922,3.63000002 L10.922,3.63000002 Z",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function gi(t,e){var n=t.title,i=t.titleId,r=fi(t,["title","titleId"]);return a.createElement("svg",di({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Polygonal selection"):n?a.createElement("title",{id:i},n):null,pi)}var bi=a.forwardRef(gi);n.p;function mi(){return(mi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function ji(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var vi=a.createElement("g",{id:"Quick-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{transform:"translate(3.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("polyline",{points:"2.54200002 13.2190001 0.225000013 15.5370001 1.58200002 17.1480001 4.22900003 17.1480001 5.36900003 16.0500001"}),a.createElement("path",{d:"M8.00300005,14.8300001 L7.29600004,15.5370001 C6.51500004,16.3180001 5.24900003,16.3180001 4.46800003,15.5370001 L3.05400003,14.1230001 C2.27300002,13.3420001 2.27300002,12.0760001 3.05400003,11.2950001 L3.76100003,10.5880001"}),a.createElement("path",{d:"M17.9940001,3.60700003 L14.9830001,0.596000015 C14.2380001,-0.148999988 13.0440001,-0.187999988 12.2520001,0.505000015 L3.95500003,7.76500004 C3.08400003,8.52700005 3.04000003,9.86600005 3.85800003,10.6840001 L7.90600005,14.7320001 C8.72400005,15.5500001 10.0640001,15.5050001 10.8250001,14.6350001 L18.0850001,6.33800004 C18.7780001,5.54600004 18.7380001,4.35200003 17.9940001,3.60700003 Z"})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Oi(t,e){var n=t.title,i=t.titleId,r=ji(t,["title","titleId"]);return a.createElement("svg",mi({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Quick selection"):n?a.createElement("title",{id:i},n):null,vi)}var xi=a.forwardRef(Oi);n.p;function yi(){return(yi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function ki(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var wi=a.createElement("g",{id:"Rectangular-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M18.4170001,20.25 L5.58300002,20.25 C4.57000002,20.25 3.75000002,19.4290001 3.75000002,18.4170001 L3.75000002,5.58300002 C3.75000002,4.57000002 4.57100002,3.75000002 5.58300002,3.75000002 L18.4160001,3.75000002 C19.4290001,3.75000002 20.249001,4.57100002 20.249001,5.58300002 L20.249001,18.4160001 C20.25,19.4290001 19.4290001,20.25 18.4170001,20.25 Z",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Ci(t,e){var n=t.title,i=t.titleId,r=ki(t,["title","titleId"]);return a.createElement("svg",yi({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Rectangular selection"):n?a.createElement("title",{id:i},n):null,wi)}var Mi=a.forwardRef(Ci);n.p;function Si(){return(Si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Ii(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var Ei=a.createElement("g",{id:"Zoom",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},a.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),a.createElement("path",{d:"M14.1931001,5.58187002 C16.5249201,7.91369003 16.5249201,11.69432 14.1931001,14.0261401 C11.86128,16.3579601 8.08065003,16.3579601 5.74883002,14.0261401 C3.41701001,11.69432 3.41701001,7.91369003 5.74883002,5.58187002 C8.08065003,3.25005001 11.86128,3.25005001 14.1931001,5.58187002",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("line",{x1:14.1500001,y1:14.0600001,x2:20.0000001,y2:19.9900001,stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function Ai(t,e){var n=t.title,i=t.titleId,r=Ii(t,["title","titleId"]);return a.createElement("svg",Si({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Zoom"):n?a.createElement("title",{id:i},n):null,Ei)}var Bi=a.forwardRef(Ai),Pi=(n.p,n(888)),Li=function(t){var e=t.handleCollapse,n=Cn(),a=Object(C.c)(),r=Object(C.d)(v),o=Object(Pi.a)(),s=o.t;o.i18n;return Object(J.jsxs)(gt.a,{anchor:"right",className:n.drawer,classes:{paper:n.paper},variant:"permanent",children:[Object(J.jsx)("div",{className:n.toolbar}),Object(J.jsx)(tn.a,{}),Object(J.jsxs)(et.a,{children:[Object(J.jsx)(wn,{name:s("Color adjustment"),onClick:function(){a(Y.actions.setOperation({operation:i.ColorAdjustment})),e(!0)},selected:r===i.ColorAdjustment,children:Object(J.jsx)(An,{})}),Object(J.jsx)(tn.a,{}),Object(J.jsx)(wn,{name:"Rectangular selection",onClick:function(){a(Y.actions.setOperation({operation:i.RectangularSelection})),e(!0)},selected:r===i.RectangularSelection,children:Object(J.jsx)(Mi,{})}),Object(J.jsx)(wn,{name:"Elliptical selection",onClick:function(){a(Y.actions.setOperation({operation:i.EllipticalAnnotation})),e(!0)},selected:r===i.EllipticalAnnotation,children:Object(J.jsx)(Nn,{})}),Object(J.jsx)(wn,{name:"Pen selection",onClick:function(){a(Y.actions.setOperation({operation:i.PenAnnotation})),e(!0)},selected:r===i.PenAnnotation,children:Object(J.jsx)(Qn,{})}),Object(J.jsx)(wn,{name:"Lasso selection",onClick:function(){a(Y.actions.setOperation({operation:i.LassoAnnotation})),e(!0)},selected:r===i.LassoAnnotation,children:Object(J.jsx)(Qn,{})}),Object(J.jsx)(wn,{name:"Polygonal selection",onClick:function(){a(Y.actions.setOperation({operation:i.PolygonalAnnotation})),e(!0)},selected:r===i.PolygonalAnnotation,children:Object(J.jsx)(bi,{})}),Object(J.jsx)(wn,{name:"Magnetic selection",onClick:function(){a(Y.actions.setOperation({operation:i.MagneticAnnotation})),e(!0)},selected:r===i.MagneticAnnotation,children:Object(J.jsx)(ei,{})}),Object(J.jsx)(wn,{name:"Color selection",onClick:function(){a(Y.actions.setOperation({operation:i.ColorAnnotation})),e(!0)},selected:r===i.ColorAnnotation,children:Object(J.jsx)(zn,{})}),Object(J.jsx)(wn,{name:"Quick selection",onClick:function(){a(Y.actions.setOperation({operation:i.QuickAnnotation})),e(!0)},selected:r===i.QuickAnnotation,children:Object(J.jsx)(xi,{})}),Object(J.jsx)(wn,{name:"Object selection",onClick:function(){a(Y.actions.setOperation({operation:i.ObjectAnnotation})),e(!0)},selected:r===i.ObjectAnnotation,children:Object(J.jsx)(oi,{})}),Object(J.jsx)(tn.a,{}),Object(J.jsx)(wn,{name:"Zoom",onClick:function(){a(Y.actions.setOperation({operation:i.Zoom})),e(!0)},selected:r===i.Zoom,children:Object(J.jsx)(Bi,{})}),Object(J.jsx)(wn,{name:"Hand",onClick:function(){a(Y.actions.setOperation({operation:i.Hand})),e(!0)},selected:r===i.Hand,children:Object(J.jsx)(Gn,{})})]})]})},Di=n(877),zi=function(t){var e=t.handleRevert,n=Object(C.c)(),i=Object(C.d)(w);return Object(J.jsxs)(et.a,{children:[Object(J.jsxs)(nt.a,{dense:!0,children:[Object(J.jsx)(it.a,{primary:"Mode",secondary:"Select the zoom mode."}),Object(J.jsxs)(yn.a,{defaultValue:d.In,name:"zoom-mode",onChange:function(t){var e=parseInt(t.target.value);n(Y.actions.setZoomMode({zoomMode:e}))},value:i.zoomMode,children:[Object(J.jsx)(Di.a,{control:Object(J.jsx)(gn.a,{tabIndex:-1}),label:"Zoom In",value:d.In}),Object(J.jsx)(Di.a,{control:Object(J.jsx)(gn.a,{tabIndex:-1}),label:"Zoom out",value:d.Out})]})]}),Object(J.jsx)(nt.a,{children:Object(J.jsx)(Di.a,{control:Object(J.jsx)(Ue.a,{checked:i.zoomAutomaticCentering,onChange:function(){n(Y.actions.setZoomAutomaticCentering({zoomAutomaticCentering:!i.zoomAutomaticCentering}))},name:"center"}),label:"Center image automatically"})}),Object(J.jsx)(nt.a,{children:Object(J.jsx)(L.a,{onClick:e,variant:"contained",children:"Actual Size"})})]})},Ri=n(47),_i=n(247),Wi=n.n(_i),Ti=Object(B.a)((function(t){return{content:{backgroundColor:t.palette.background.default,padding:t.spacing(3),width:"100%"},stage:{margin:"8px"},toolbar:Object(A.a)({},t.mixins.toolbar),parent:{cursor:"crosshair"}}})),Ni=function(t){var e=t.operator,n=t.scale,i=Ut();return e.center&&e.radius?Object(J.jsxs)(Ri.c,{children:[Object(J.jsx)(Ri.b,{dash:[4/n,2/n],dashOffset:-i,radiusX:e.radius.x,radiusY:e.radius.y,stroke:"black",strokeWidth:1/n,x:e.center.x,y:e.center.y}),Object(J.jsx)(Ri.b,{dash:[4/n,2/n],dashOffset:-i,radiusX:e.radius.x,radiusY:e.radius.y,stroke:"white",strokeWidth:1/n,x:e.center.x,y:e.center.y})]}):null},Fi=function(t){var e=t.operator,n=t.scale,i=Ut();return Object(J.jsxs)(Ri.c,{children:[e.origin&&Object(J.jsx)(Ri.a,{fill:"white",radius:3/n,stroke:"black",strokeWidth:1/n,x:e.origin.x,y:e.origin.y}),e.anchor&&Object(J.jsx)(Ri.a,{fill:"black",radius:3/n,stroke:"white",strokeWidth:1/n,x:e.anchor.x,y:e.anchor.y}),Object(J.jsx)(Ri.f,{points:e.buffer,stroke:"black",strokeWidth:1/n}),Object(J.jsx)(Ri.f,{dash:[4/n,2/n],dashOffset:-i,stroke:"white",points:e.buffer,strokeWidth:1/n})]})},Zi=function(t){var e=t.operator,n=t.scale,i=Ut();return e.origin?Object(J.jsxs)(Ri.c,{children:[Object(J.jsx)(Ri.a,{fill:"white",radius:3/n,stroke:"black",strokeWidth:1/n,x:e.origin.x,y:e.origin.y}),e.anchor&&Object(J.jsx)(Ri.a,{fill:"black",radius:3/n,stroke:"white",strokeWidth:1/n,x:e.anchor.x,y:e.anchor.y}),Object(J.jsx)(Ri.f,{points:e.buffer,stroke:"black",strokeWidth:1/n}),Object(J.jsx)(Ri.f,{dash:[4/n,2/n],dashOffset:-i,stroke:"white",points:e.buffer,strokeWidth:1/n})]}):null},Hi=function(t){var e=t.operator,n=t.scale,i=Ut();return e.origin&&e.width&&e.height?Object(J.jsxs)(Ri.c,{children:[Object(J.jsx)(Ri.g,{dash:[4/n,2/n],dashOffset:-i,height:e.height,stroke:"black",strokeWidth:1/n,width:e.width,x:e.origin.x,y:e.origin.y}),Object(J.jsx)(Ri.g,{dash:[4/n,2/n],dashOffset:-i,height:e.height,stroke:"white",strokeWidth:1/n,width:e.width,x:e.origin.x,y:e.origin.y}),Object(J.jsx)(Ri.f,{stroke:"white",points:e.points,strokeWidth:1/n})]}):null},Ui=function(t){var e=t.operator,n=t.scale,i=Ut();return Object(J.jsxs)(Ri.c,{children:[e.origin&&Object(J.jsx)(Ri.a,{fill:"white",radius:3/n,stroke:"black",strokeWidth:1/n,x:e.origin.x,y:e.origin.y}),e.anchor&&Object(J.jsx)(Ri.a,{fill:"black",radius:3/n,stroke:"white",strokeWidth:1/n,x:e.anchor.x,y:e.anchor.y}),Object(J.jsx)(Ri.f,{points:e.buffer,stroke:"black",strokeWidth:1/n}),Object(J.jsx)(Ri.f,{dash:[4/n,2/n],dashOffset:-i,stroke:"white",points:e.buffer,strokeWidth:1/n})]})},Gi=function(t){var e=t.operator,n=t.scale,i=Ut();return e.origin&&e.width&&e.height?Object(J.jsxs)(Ri.c,{children:[Object(J.jsx)(Ri.g,{dash:[4/n,2/n],dashOffset:-i,height:e.height,stroke:"black",strokeWidth:1/n,width:e.width,x:e.origin.x,y:e.origin.y}),Object(J.jsx)(Ri.g,{dash:[4/n,2/n],dashOffset:-i,height:e.height,stroke:"white",strokeWidth:1/n,width:e.width,x:e.origin.x,y:e.origin.y})]}):null},Yi=function(t){var e=t.operator,n=Object(a.useState)(),i=Object(l.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var t=new Image;t.src=e.overlayData,o(t)}),[e.overlayData]),e.overlayData&&e.offset?Object(J.jsx)(Ri.c,{children:Object(J.jsx)(Ri.d,{image:r,x:e.offset.x,y:e.offset.y})}):null},Xi=function(t){var e=t.operator,n=Object(a.useState)(),i=Object(l.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){if(e.currentMask){var t=new Image;t.src=e.currentMask.toDataURL(),o(t)}}),[e.currentMask]),e.currentMask?Object(J.jsx)(Ri.c,{children:Object(J.jsx)(Ri.d,{image:r})}):null},Ki=function(t){var e=t.operator;t.scale;return Object(J.jsx)(Ri.c,{children:Object(J.jsx)(Ri.f,{points:e.buffer,stroke:"red",strokeWidth:e.brushSize})})},Vi=function(t){var e=t.operator,n=(t.scale,Ut());return e.minimum&&e.maximum&&e.zooming?Object(J.jsxs)(Ri.c,{children:[Object(J.jsx)(Ri.g,{dash:[4,2],dashOffset:-n,height:e.maximum.y-e.minimum.y,stroke:"black",strokeWidth:1,width:e.maximum.x-e.minimum.x,x:e.minimum.x,y:e.minimum.y}),Object(J.jsx)(Ri.g,{dash:[4,2],dashOffset:-n,height:e.maximum.y-e.minimum.y,stroke:"white",strokeWidth:1,width:e.maximum.x-e.minimum.x,x:e.minimum.x,y:e.minimum.y})]}):null},Qi=function(t){var e=t.operation,n=t.operator,a=t.scale;if(!e||!n)return Object(J.jsx)(r.a.Fragment,{});switch(e){case i.ColorAnnotation:return Object(J.jsx)(Yi,{operator:n});case i.EllipticalAnnotation:return Object(J.jsx)(Ni,{operator:n,scale:a});case i.LassoAnnotation:return Object(J.jsx)(Fi,{operator:n,scale:a});case i.MagneticAnnotation:return Object(J.jsx)(Zi,{operator:n,scale:a});case i.ObjectAnnotation:return Object(J.jsx)(Hi,{operator:n,scale:a});case i.PenAnnotation:return Object(J.jsx)(Ki,{operator:n,scale:a});case i.PolygonalAnnotation:return Object(J.jsx)(Ui,{operator:n,scale:a});case i.RectangularSelection:return Object(J.jsx)(Gi,{operator:n,scale:a});case i.Zoom:return Object(J.jsx)(Vi,{operator:n,scale:a});case i.QuickAnnotation:return Object(J.jsx)(Xi,{operator:n});default:return Object(J.jsx)(r.a.Fragment,{})}};function qi(t){var e=Object(a.useState)(!1),n=Object(l.a)(e,2),i=n[0],r=n[1];function o(e){e.key===t&&r(!0)}var s=function(e){e.key===t&&r(!1)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}}),[]),i}var Ji=function(t){return t.state.penSelectionBrushSize},$i=function(t){var e=t.points,n=t.scale,i=Ut();return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsx)(Ri.f,{dash:[4/n,2/n],dashOffset:-i,points:e,stroke:"black",strokeWidth:1/n}),Object(J.jsx)(Ri.f,{dash:[4/n,2/n],dashOffset:-i,points:e,stroke:"white",strokeWidth:1/n})]})},ta=n(369),ea=n.n(ta),na=function(t){Object(Vt.a)(n,t);var e=Object(Qt.a)(n);function n(){var t;Object(Yt.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).center=!1,t.minimum=void 0,t.maximum=void 0,t.mode=d.In,t.scale=1,t.x=0,t.y=0,t.zooming=!1,t.selected=!1,t.scales=[.25,.75,1,2,4,8,16,32],t.onClick=function(e){if(0===e.evt.button){var n=e.target.getStage();if(n){var i=n.getPointerPosition();if(i){if(t.mode===d.In){if(32===t.scale)return;var a=O.findIndex(t.scales,(function(e){return t.scale<e}));if(!a)return;t.scale=t.scales[a]}else{if(.25===t.scale)return;var r=O.findIndex(t.scales,(function(e){return t.scale<=e}));if(!r)return;t.scale=t.scales[r-1]}t.x=i.x-i.x*t.scale,t.y=i.y-i.y*t.scale,t.selected=!0}}}},t.onWheel=function(e){var n=e.evt.deltaY>0?1.1*t.scale:t.scale/1.1;if(!(n>125||n<.05)){var i=e.target.getStage();if(i){var a=i.getPointerPosition();if(a){var r=a.x/t.scale-i.x()/t.scale,o=a.y/t.scale-i.y()/t.scale;t.x=-(r-a.x/n)*n,t.y=-(o-a.y/n)*n,t.scale=n}}}},t}return Object(Kt.a)(n,[{key:"percentile",get:function(){return ea()(this.scale).format("0%")}},{key:"percentiles",get:function(){return O.map(this.scales,(function(t){return ea()(t).format("0%")}))}},{key:"fit",value:function(){}},{key:"reset",value:function(){this.scale=1,this.x=0,this.y=0,this.selected=!1,this.zooming=!1}},{key:"onMouseDown",value:function(t){this.minimum=t,this.zooming=!0,this.selected=!1}},{key:"onMouseMove",value:function(t){!this.selected&&this.zooming&&this.minimum&&(this.maximum=t)}},{key:"onMouseUp",value:function(t){if(!this.selected&&this.zooming&&this.minimum&&this.maximum){if(this.mode===d.In){this.maximum=t,this.scale=Math.abs(this.image.width/(this.maximum.x-this.minimum.x));var e=this.minimum.x>this.maximum.x?this.maximum.x:this.minimum.x,n=this.minimum.y>this.maximum.y?this.maximum.y:this.minimum.y;this.x=-1*e*this.scale,this.y=-1*n*this.scale}this.selected=!0,this.maximum=void 0,this.zooming=!1}}}]),n}(Xt),ia=n(530),aa=n.n(ia),ra=r.a.forwardRef((function(t,e){var n=t.src,i=aa()(n,"Anonymous"),a=Object(l.a)(i,1)[0];return Object(J.jsx)(Ri.d,{ref:e,image:a,position:{x:0,y:0},width:512,height:512})})),oa=function(t){return t.state.categories.filter((function(t){return t.visible})).map((function(t){return t.id}))},sa=n(112),ca={state:Y.reducer},la=Object(sa.c)(ca),ua=n(531),ha=n.n(ua),da={devTools:!0,enhancers:[n(878).a({})],middleware:[ha.a],preloadedState:{},reducer:la},fa=Object(U.a)(da),pa=function(t){var e,n=t.annotation,i=t.annotationTool,r=Object(a.useRef)(null);Object(a.useEffect)((function(){r.current=new Wi.a.Line}),[]);var o=Object(C.c)(),s=Object(C.d)(f),c=null===(e=O.find(s,(function(t){return t.id===n.categoryId})))||void 0===e?void 0:e.color;return Object(J.jsx)(Ri.f,{closed:!0,fill:c,onContextMenu:function(t){t.evt.preventDefault(),i&&(i.annotating||(i.deselect(),r&&r.current&&(o(q({selectedCategory:n.categoryId})),o(V({selectedAnnotation:n.id})),o(Q({selectedAnnotationNode:r.current._id})))))},opacity:.5,points:n.contour,ref:r,strokeWidth:1})},ga=function(t){var e=t.annotationTool,n=Object(C.d)(b),i=Object(C.d)(oa),o=Object(a.useState)([]),s=Object(l.a)(o,2),c=s[0],u=s[1];return Object(a.useEffect)((function(){n&&u(n.filter((function(t){return i.includes(t.categoryId)})))}),[n,i]),Object(J.jsx)(r.a.Fragment,{children:c.map((function(t){return Object(J.jsx)(pa,{annotation:t,annotationTool:e},t.id)}))})},ba=function(t){var e=t.category,n=(t.height,t.src),r=(t.width,Object(a.useRef)(null)),o=Object(a.useRef)(null),s=Object(a.useRef)(null),c=(Object(a.useRef)(null),Object(a.useRef)(null)),u=Object(a.useRef)(null),d=Ti(),f=Object(C.d)(v),p=Object(C.d)(Ji),g=Object(C.d)(y),m=Object(C.d)(j),x=function(t){var e=Object(C.d)(v),n=Object(a.useState)(),r=Object(l.a)(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){Gt.a.load(t).then((function(t){switch(e){case i.ColorAnnotation:return void s(new Oe(t));case i.EllipticalAnnotation:return void s(new xe(t));case i.LassoAnnotation:return void s(new ye(t));case i.MagneticAnnotation:return void s(new De(t));case i.ObjectAnnotation:return void Te.compile(t).then((function(t){s(t)}));case i.PenAnnotation:return void Ne.setup(t,8).then((function(t){s(t)}));case i.PolygonalAnnotation:return void s(new Fe(t));case i.QuickAnnotation:var n=Ze.setup(t);return void s(n);case i.RectangularSelection:return void s(new _e(t))}}))}),[e,t]),[o]}(n),k=Object(l.a)(x,1)[0],M=Object(a.useState)(),S=Object(l.a)(M,2),I=S[0],E=(S[1],Object(a.useState)(!1)),B=Object(l.a)(E,2),P=B[0],L=B[1],D=Object(a.useState)(!1),z=Object(l.a)(D,2),R=z[0],_=z[1],W=Object(a.useReducer)((function(t){return t+1}),0),T=Object(l.a)(W,2)[1],N=Object(C.c)(),F=Object(C.d)(b),Z=Object(C.d)(w),U=qi("Enter"),G=qi("Escape"),X=qi("Delete"),K=qi("Backspace"),V=function(t,e,n){var r=Object(a.useState)(),o=Object(l.a)(r,2),s=o[0],c=o[1],u=Object(a.useReducer)((function(t){return t+1}),0),h=Object(l.a)(u,2)[1];return Object(a.useEffect)((function(){t===i.Zoom&&(s||Gt.a.load(e).then((function(t){c(new na(t))})))}),[t,e]),Object(a.useEffect)((function(){t===i.Zoom&&s&&(s.mode=n.zoomMode)}),[n.zoomMode]),Object(a.useEffect)((function(){t===i.Zoom&&s&&(s.reset(),h())}),[n.zoomReset]),Object(a.useEffect)((function(){t===i.Zoom&&s&&(s.center=n.zoomAutomaticCentering)}),[n.zoomAutomaticCentering]),{zoomOperator:s,onZoomClick:function(e){t===i.Zoom&&s&&(s.onClick(e),h())},onZoomWheel:function(e){t===i.Zoom&&s&&(s.onWheel(e),h())}}}(f,n,Z),Q=V.zoomOperator,q=V.onZoomClick,$=V.onZoomWheel,tt=function(t){switch(f){case i.Zoom:q(t)}},et=function(t){switch(f){case i.Zoom:$(t)}};Object(a.useEffect)((function(){if(f!==i.Zoom&&I&&k&&F){var t=F.filter((function(t){return t.id===I}))[0];if(t&&t.mask&&t.contour){var e=k.invert(t.mask,!0),n=k.invertContour(t.contour),a=k.computeBoundingBoxFromContours(n),r=F.filter((function(t){return t.id===I}))[0];u&&u.current&&(u.current=Object(A.a)(Object(A.a)({},r),{},{boundingBox:a,contour:n,mask:e}),k.mask=e,k.boundingBox=a,k.contour=n,L(!0))}}}),[m]),Object(a.useEffect)((function(){if(f!==i.Zoom&&g!==h.New&&(_(!1),P&&k&&I&&F)){var t,e,n=u.current;if(n){if(g===h.Add){var a=k.add(n.mask),r=Object(l.a)(a,2);t=r[0],e=r[1]}else if(g===h.Subtract){var o=k.subtract(n.mask),s=Object(l.a)(o,2);t=s[0],e=s[1]}else if(g===h.Intersect){var c=k.intersect(n.mask),d=Object(l.a)(c,2);t=d[0],e=d[1]}k.mask=t,k.contour=e,e&&(k.boundingBox=k.computeBoundingBoxFromContours(e))}}}),[g,P]),Object(a.useEffect)((function(){var t;f!==i.Zoom&&g!==h.New&&R&&I&&(null===(t=s.current)||void 0===t||t.detach(),N(Y.actions.deleteImageInstance({id:I})))}),[R]),Object(a.useEffect)((function(){if(I&&u&&u.current){var t=null===F||void 0===F?void 0:F.filter((function(t){return t.id!==I})),n=Object(A.a)(Object(A.a)({},null===F||void 0===F?void 0:F.filter((function(t){return t.id===I}))[0]),{},{categoryId:e.id});N(Y.actions.setImageInstances({instances:[].concat(Object(H.a)(t),[n])})),u.current=n}}),[e]),Object(a.useEffect)((function(){k&&(k.annotated&&L(k.annotated),g!==h.New&&k.annotating&&_(k.annotating))})),Object(a.useEffect)((function(){f===i.PenAnnotation&&(k.brushSize=p)}),[p]),Object(a.useEffect)((function(){if(k&&k.contour&&o&&o.current){var t=o.current.getAbsoluteTransform().copy(),e=O.flatten(O.chunk(k.contour,2).map((function(e){var n=t.point({x:e[0],y:e[1]});return[n.x,n.y]})));c.current=new Wi.a.Line({points:e})}}),[null===k||void 0===k?void 0:k.contour,P]),Object(a.useEffect)((function(){if(P&&s&&s.current&&c&&c.current&&k&&k.contour){s.current.nodes([c.current]);var t=s.current.getLayer();t&&(t.batchDraw(),k&&(k.annotate(e),k.annotation&&(u.current=k.annotation)))}}),[P]);var nt=function(t){if(o&&o.current){var e=o.current.getAbsoluteTransform().copy();return e.invert(),e.point(t)}},it=Object(a.useMemo)((function(){var t=O.throttle((function(){if(k&&o&&o.current){var t=o.current.getPointerPosition();if(t){var e=nt(t);e&&(f===i.Zoom?null===Q||void 0===Q||Q.onMouseMove(e):k.onMouseMove(e),T())}}}),5);return function(){return t()}}),[k,f,Q]),at=Object(a.useMemo)((function(){var t=O.throttle((function(){if(k&&o&&o.current){var t=o.current.getPointerPosition();if(t){var e=nt(t);e&&(f===i.Zoom?null===Q||void 0===Q||Q.onMouseUp(e):k.onMouseUp(e),T())}}}),10);return function(){return t()}}),[k,f,Q]);return Object(a.useEffect)((function(){var t,e,n;U&&F&&k&&u&&u.current&&(I===u.current.id?N(Y.actions.replaceImageInstance({id:u.current.id,instance:u.current})):N(Y.actions.setImageInstances({instances:[].concat(Object(H.a)(F),[u.current])})),k.deselect(),null===(t=s.current)||void 0===t||t.detach(),null===(e=s.current)||void 0===e||null===(n=e.getLayer())||void 0===n||n.batchDraw(),L(!1),c.current=null,u.current=null)}),[U]),Object(a.useEffect)((function(){var t;P&&G&&k&&(k.deselect(),null===(t=s.current)||void 0===t||t.detach())}),[G]),Object(a.useEffect)((function(){var t;I&&((K||G||X)&&(N(Y.actions.deleteImageInstance({id:I})),null===(t=s.current)||void 0===t||t.detach(),u.current=null))}),[K,X,G]),Object(a.useEffect)((function(){if(o&&o.current){var t=document.querySelector(".konvajs-content");t&&(t.style.marginLeft="auto",t.style.marginRight="auto")}}),[o.current]),Object(J.jsx)(C.b.Consumer,{children:function(t){var e=t.store;return Object(J.jsx)(Ri.h,{className:d.stage,globalCompositeOperation:"destination-over",height:512,onClick:tt,onWheel:et,ref:o,scale:{x:Q?Q.scale:1,y:Q?Q.scale:1},width:512,x:Q?Q.x:0,y:Q?Q.y:0,children:Object(J.jsx)(C.a,{store:e,children:Object(J.jsxs)(Ri.e,{onMouseDown:function(t){return function(t){if(0===t.evt.button){if(!k||!o||!o.current)return;var e=o.current.getPointerPosition();if(!e)return;var n=nt(e);if(!n)return;f===i.Zoom?null===Q||void 0===Q||Q.onMouseDown(n):k.onMouseDown(n),T()}}(t)},onMouseMove:it,onMouseUp:at,children:[Object(J.jsx)(ra,{ref:r,src:n}),!P&&f!==i.Zoom&&Object(J.jsx)(Qi,{operation:f,operator:k,scale:Q?Q.scale:1}),!P&&f===i.Zoom&&Object(J.jsx)(Qi,{operation:f,operator:Q,scale:Q?Q.scale:1}),P&&k&&k.contour&&Object(J.jsx)($i,{points:k.contour,scale:Q?Q.scale:1}),g!==h.New&&k&&k.annotating&&!k.annotated&&u&&u.current&&Object(J.jsx)($i,{points:u.current.contour,scale:Q?Q.scale:1}),Object(J.jsx)(ga,{annotationTool:k}),Object(J.jsx)(Ri.i,{ref:s})]})})})}})},ma=n(538),ja=function(t){var e=t.category,n=Object(a.useRef)(null),i=function(t){var e=Object(a.useState)(),n=Object(l.a)(e,2),i=n[0],r=n[1];return Object(a.useLayoutEffect)((function(){t&&t.current&&r(t.current.getBoundingClientRect())}),[t]),Object(ma.a)(t,(function(t){r(t.contentRect)})),i}(n),r=Object(C.d)(m),o=Ti();return Object(J.jsxs)("main",{className:o.content,ref:n,children:[Object(J.jsx)("div",{className:o.toolbar}),Object(J.jsx)("div",{className:o.parent,children:Object(J.jsx)(ba,{category:e,height:null===i||void 0===i?void 0:i.height,src:r.src,width:null===i||void 0===i?void 0:i.width})})]})},va=n(880),Oa=Object(B.a)((function(t){return{appBar:{zIndex:t.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(A.a)({},t.mixins.toolbar),settingsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(A.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:t.spacing(32)},applicationDrawerHeader:Object(A.a)(Object(A.a)({},t.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:t.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:t.spacing(32)}}})),xa=n(894),ya=function(){var t=Object(C.c)(),e=Object(C.d)(Ji);return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsx)(kn,{}),Object(J.jsx)(tn.a,{}),Object(J.jsx)(et.a,{children:Object(J.jsx)(nt.a,{dense:!0,children:Object(J.jsx)(it.a,{primary:"Brush size",secondary:Object(J.jsx)(xa.a,{"aria-labelledby":"pen-selection-brush-size",onChange:function(e,n){var i={penSelectionBrushSize:n};t(Y.actions.setPenSelectionBrushSize(i))},value:e})})})})]})},ka=function(t){var e=Object(C.c)(),n=Object(C.d)(w),o=Object(Pi.a)(),s=o.t,c=(o.i18n,[{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(An,{}),method:i.ColorAdjustment,name:s("Color adjustment"),options:Object(J.jsx)(r.a.Fragment,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(Mi,{}),method:i.RectangularSelection,name:"Rectangular selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(Nn,{}),method:i.EllipticalAnnotation,name:"Elliptical selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(hi,{}),method:i.PenAnnotation,name:"Pen selection",options:Object(J.jsx)(ya,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(Qn,{}),method:i.LassoAnnotation,name:"Lasso selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(bi,{}),method:i.PolygonalAnnotation,name:"Polygonal selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(ei,{}),method:i.MagneticAnnotation,name:"Magnetic selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(zn,{}),method:i.ColorAnnotation,name:"Color selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(xi,{}),method:i.QuickAnnotation,name:"Quick selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(oi,{}),method:i.ObjectAnnotation,name:"Object selection",options:Object(J.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(J.jsx)(Gn,{}),method:i.Hand,name:"Hand",options:Object(J.jsx)(r.a.Fragment,{})},{description:"Description of zoom here.",icon:Object(J.jsx)(Bi,{}),method:i.Zoom,name:"Zoom",options:Object(J.jsx)(zi,{handleRevert:function(){e(Y.actions.setZoomReset({zoomReset:!n.zoomReset}))}})}]);Object(a.useEffect)((function(){t.image&&e(Y.actions.setImage({image:t.image}))}),[e,t.image]);var h=Object(C.d)(m),d=Object(C.d)(v),f=Oa(),p=(Object(C.d)(k),Object(C.d)(x)),g=r.a.useState(!1),b=Object(l.a)(g,2),j=b[0],O=b[1],y=function(t){O(t)};return Object(J.jsx)(va.a,{theme:fn,children:Object(J.jsxs)("div",{className:f.root,children:[Object(J.jsx)(u.a,{}),Object(J.jsx)(pt,{}),Object(J.jsx)(cn,{activeCategory:p,onCategoryClick:function(t,n){e(Y.actions.setSeletedCategory({selectedCategory:n.id}))}}),h&&Object(J.jsx)(ja,{category:p}),Object(J.jsx)(yt.a,{in:j,timeout:"auto",unmountOnExit:!0,children:Object(J.jsx)(pn,{handleCollapse:y,name:c[c.findIndex((function(t){return t.method===d}))].name,settings:c[c.findIndex((function(t){return t.method===d}))].options})}),Object(J.jsx)(Li,{handleCollapse:y})]})})},wa=n(883),Ca=n(536),Ma=n(372),Sa=n(256),Ia={resources:{de:{translation:{Cancel:"Abbrechen",Categories:"Kategorien","Create category":"Neue Kategorie","Create new classifier":"Neuer Classifier","Delete category":"L\xf6sche Kategorie","Delete images":"L\xf6sche Bilder",Description:"Beschreibung",Edit:"Edit","Edit category":"Bearbeite Kategorie",Help:"Hilfe","Hide other categories":"Blende andere Kategorien aus","Hide sidebar":"Blende Sidebar aus","Import images":"Bilder hinzuf\xfcgen",Logo:"Logo",Model:"Modell","Open classifier":"\xd6ffne Classifier","Open example classifier":"\xd6ffne Beispiel Classifier","Open weights":"\xd6ffne Gewichte",Open:"\xd6ffnen","Run classifier":"Starte Classfier","Save annotations and predictions":"Speicher Labels und Predictions","Save classifier":"Speicher Classifier","Save weights":"Speicher Gewichte",Save:"Speichern","Search images":"Durchsuche Bilder","Send feedback":"Sende Feedback",Settings:"Einstellungen","Show sidebar":"Blende Sidebar ein",Unknown:"Unbekannt"}},en:{translation:{Cancel:"Cancel",Categories:"Categories","Create category":"Create category","Create new classifier":"Create new classifier","Delete category":"Delete category","Delete images":"Delete images",Description:"Description",Edit:"Edit","Edit category":"Edit category",Help:"Help","Hide other categories":"Hide other categories","Hide sidebar":"Hide sidebar","Import images":"Import images",Logo:"Logo",Model:"Model","Open classifier":"Open classifier","Open example classifier":"Open example classifier","Open weights":"Open weights",Open:"Open","Run classifier":"Run classifier","Save annotations and predictions":"Save annotations and predictions","Save classifier":"Save classifier","Save weights":"Save weights",Save:"Save","Search images":"Search images","Send feedback":"Send feedback",Settings:"Settings","Show sidebar":"Show sidebar",Unknown:"Unknown"}},fi:{translation:{Cancel:"Peruuta",Categories:"Kategoriat","Create category":"Luo kategoria","Create new classifier":"Luo uusi luokittelija","Delete category":"Poista kategoria","Delete images":"Poista kuvat",Description:"Kuvaus",Edit:"Edit","Edit category":"Muokkaa kategoriaa",Help:"Apua","Hide other categories":"Piilota muut kategoriat","Hide sidebar":"Piilota sivupalkki","Import images":"Tuo kuvat",Logo:"Logo",Model:"Malli","Open classifier":"Avaa luokittelija","Open example classifier":"Avaa esimerkkiluokittelija","Open weights":"Avaa painot",Open:"Avaa","Run classifier":"Suorita luokittelija","Save annotations and predictions":"Tallenna annotaatiot ja luokittelun tulos","Save classifier":"Tallenna luokittelija","Save weights":"Tallenna painot",Save:"Tallenna","Search images":"Etsi kuvia","Send feedback":"L\xe4het\xe4 palautetta",Settings:"Asetukset","Show sidebar":"N\xe4yt\xe4 sivupalkki",Unknown:"Tuntematon"}},hi:{translation:{Cancel:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",Categories:"\u0938\u093e\u0930\u0947 \u0935\u0930\u094d\u0917","Create category":"\u0935\u0930\u094d\u0917 \u092c\u0928\u093e\u090f\u0901","Create new classifier":"\u0928\u092f\u093e \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u092c\u0928\u093e\u090f\u0902","Delete category":"\u0935\u0930\u094d\u0917 \u0939\u091f\u093e\u090f\u0901","Delete images":"\u091a\u093f\u0924\u094d\u0930\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0901",Description:"\u0935\u093f\u0935\u0930\u0923","Edit category":"\u0935\u0930\u094d\u0917 \u0915\u093e \u092c\u0926\u0932\u093e\u0935 \u0915\u0930\u0947\u0902",Help:"\u0938\u0939\u093e\u092f\u0924\u093e","Hide other categories":"\u092c\u093e\u0915\u093f \u0935\u0930\u094d\u0917\u094b\u0902 \u0915\u094b \u091b\u093f\u092a\u093e\u090f\u0902","Hide sidebar":"\u0938\u093e\u0907\u0921\u092c\u093e\u0930 \u091b\u093f\u092a\u093e\u090f\u0902","Import images":"\u091a\u093f\u0924\u094d\u0930\u094b\u0902 \u0915\u094b \u0906\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",Logo:"\u0932\u094b\u0917\u094b",Model:"\u092e\u0949\u0921\u0932","Open classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0916\u094b\u0932\u0947\u0902","Open example classifier":"\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u093e \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0916\u094b\u0932\u0947\u0902","Open weights":"\u0935\u0947\u0907\u091f\u094d\u0938 \u0916\u094b\u0932\u0947\u0902",Open:"\u0916\u094b\u0932\u0947\u0902","Run classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0915\u094b \u091a\u0932\u093e\u090f\u0902","Save annotations and predictions":"\u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u0924\u0925\u093e \u0905\u0928\u0941\u092e\u093e\u0928 \u0938\u0939\u0947\u091c\u0947\u0902","Save classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0938\u0939\u0947\u091c\u0947\u0902","Save weights":"\u0935\u0947\u0907\u091f\u094d\u0938 \u0938\u0939\u0947\u091c\u0947\u0902",Save:"\u0938\u0939\u0947\u091c\u0947\u0902","Search images":"\u091a\u093f\u0924\u094d\u0930 \u0916\u094b\u091c\u0947\u0902","Send feedback":"\u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e \u092d\u0947\u091c\u0947\u0902",Settings:"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938","Show sidebar":"\u0938\u093e\u0907\u0921\u092c\u093e\u0930 \u0926\u093f\u0916\u093e\u090f\u0902",Unknown:"\u0905\u091c\u094d\u091e\u093e\u0924"}},hu:{translation:{Cancel:"M\xe9gse",Categories:"Oszt\xe1lyok","Create category":"\xdaj oszt\xe1ly l\xe9trehoz\xe1sa","Create new classifier":"\xdaj oszt\xe1lyoz\xf3 l\xe9trehoz\xe1sa","Delete category":"Oszt\xe1ly t\xf6rl\xe9se","Delete images":"K\xe9pek t\xf6rl\xe9se",Description:"Le\xedr\xe1s",Edit:"Edit","Edit category":"Kateg\xf3ria szerkeszt\xe9se",Help:"S\xfag\xf3","Hide other categories":"T\xf6bbi oszt\xe1ly elrejt\xe9se","Hide sidebar":"Oldals\xe1v elrejt\xe9se","Import images":"K\xe9pek import\xe1l\xe1sa",Logo:"Log\xf3",Model:"Modell","Open classifier":"Oszt\xe1lyoz\xf3 bet\xf6lt\xe9se","Open example classifier":"P\xe9lda oszt\xe1lyoz\xf3 bet\xf6lt\xe9se","Open weights":"S\xfalyok bet\xf6lt\xe9se",Open:"Megnyit\xe1s","Run classifier":"Oszt\xe1lyoz\xf3 futtat\xe1sa","Save annotations and predictions":"C\xedmk\xe9k \xe9s predikci\xf3k ment\xe9se","Save classifier":"Oszt\xe1lyoz\xf3 ment\xe9se","Save weights":"S\xfalyok ment\xe9se",Save:"Ment\xe9s","Search images":"K\xe9pek keres\xe9se","Send feedback":"Visszajelz\xe9s k\xfcld\xe9se",Settings:"Be\xe1ll\xedt\xe1sok","Show sidebar":"Oldals\xe1v megjelen\xedt\xe9se",Unknown:"Ismeretlen"}},se:{translation:{Cancel:"Annullera",Categories:"kategorier","Create category":"Skapa kategori","Create new classifier":"Skapa ny klassificerare","Delete category":"Ta bort kategori","Delete images":"Ta bort bilder",Description:"Beskrivning",Edit:"Edit","Edit category":"Redigera kategori",Help:"Hj\xe4lp","Hide other categories":"g\xf6mma andra kategorier","Hide sidebar":"D\xf6lj sidf\xe4ltet","Import images":"Importera bilder",Logo:"Logo",Model:"Modell","Open classifier":"\xd6ppna klassificerare","Open example classifier":"\xd6ppna exempel klassificeraren","Open weights":"\xd6ppna vikter",Open:"\xd6ppna","Run classifier":"K\xf6r klassificeringsenheten","Save annotations and predictions":"Spara kommentarer och f\xf6ruts\xe4gelser","Save classifier":"Spara klassificerare","Save weights":"Spara vikter",Save:"Spara","Search images":"S\xf6k bilder","Send feedback":"Skicka feedback",Settings:"Inst\xe4llningar","Show sidebar":"Visa sidof\xe4ltet",Unknown:"Ok\xe4nd"}},gr:{translation:{Cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",Categories:"\u039a\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b5\u03c2","Create category":"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2","Create new classifier":"\u039d\u03ad\u03bf\u03c2 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae\u03c2","Delete category":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2","Delete images":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd",Description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",Edit:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1","Edit category":"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2",Help:"\u0392\u03bf\u03ae\u03b8\u03b5\u03b9\u03b1","Hide other categories":"\u0391\u03c0\u03cc\u03ba\u03c1\u03c5\u03c8\u03b7 \u03ac\u03bb\u03bb\u03c9\u03bd \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03b9\u03ce\u03bd","Hide sidebar":"\u0391\u03c0\u03cc\u03ba\u03c1\u03c5\u03c8\u03b7 \u03c0\u03bb\u03b5\u03c5\u03c1\u03b9\u03ba\u03ae\u03c2 \u03b3\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2","Import images":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd",Logo:"\u039b\u03bf\u03b3\u03cc\u03c4\u03c5\u03c0\u03bf",Model:"M\u03bf\u03bd\u03c4\u03ad\u03bb\u03bf","Open classifier":"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Open example classifier":"\u03a0\u03b1\u03c1\u03ac\u03b4\u03b5\u03b9\u03b3\u03bc\u03b1 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Open weights":"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1 \u03c0\u03b1\u03c1\u03b1\u03bc\u03ad\u03c4\u03c1\u03c9\u03bd",Open:"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1","Run classifier":"\u0395\u03ba\u03c4\u03ad\u03bb\u03b5\u03c3\u03b7 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Save annotations and predictions":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03b5\u03c4\u03b9\u03ba\u03b5\u03c4\u03ce\u03bd \u03ba\u03b1\u03b9 \u03c0\u03c1\u03bf\u03b2\u03bb\u03ad\u03c8\u03b5\u03c9\u03bd","Save classifier":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Save weights":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c0\u03b1\u03c1\u03b1\u03bc\u03ad\u03c4\u03c1\u03c9\u03bd",Save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7","Search images":"\u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7 \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd","Send feedback":"E\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03b9\u03b1",Settings:"\u03a1\u03c5\u03b8\u03bc\u03af\u03c3\u03b5\u03b9\u03c2","Show sidebar":"\u0395\u03bc\u03c6\u03ac\u03bd\u03b9\u03c3\u03b7 \u03c0\u03bb\u03b5\u03c5\u03c1\u03b9\u03ba\u03ae\u03c2 \u03b3\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2",Unknown:"\u0386\u03b3\u03bd\u03c9\u03c3\u03c4\u03bf"}}},interpolation:{escapeValue:!1},keySeparator:!1,lng:"en"};Ma.a.use(Sa.e).init(Ia).then((function(){}));Ma.a;wa.a({dsn:"https://756e21ab7263457eab9bc2f65edddc79@o71028.ingest.sentry.io/5668724",integrations:[new Ca.a.BrowserTracing],release:"image-viewer@"+Object({NODE_ENV:"production",PUBLIC_URL:"/image-viewer",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).npm_package_version,tracesSampleRate:1}),s.a.render(Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(C.a,{store:fa,children:Object(J.jsx)(ka,{})})}),document.getElementById("root")),c()}},[[816,1,2]]]);
//# sourceMappingURL=main.072863b1.chunk.js.map