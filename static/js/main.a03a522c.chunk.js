(this["webpackJsonp@piximi/image-viewer"]=this["webpackJsonp@piximi/image-viewer"]||[]).push([[0],{724:function(e,t){},725:function(e,t){},733:function(e,t){},736:function(e,t){},737:function(e,t){},775:function(e,t,n){"use strict";n.r(t);var i,r,a=n(1),o=n.n(a),s=n(63),c=n.n(s),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,846)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))},u=n(4),h=n(835);(r=i||(i={}))[r.ColorAdjustment=0]="ColorAdjustment",r[r.ColorSelection=1]="ColorSelection",r[r.EllipticalSelection=2]="EllipticalSelection",r[r.Hand=3]="Hand",r[r.LassoSelection=4]="LassoSelection",r[r.MagneticSelection=5]="MagneticSelection",r[r.ObjectSelection=6]="ObjectSelection",r[r.PenSelection=7]="PenSelection",r[r.PolygonalSelection=8]="PolygonalSelection",r[r.QuickSelection=9]="QuickSelection",r[r.RectangularSelection=10]="RectangularSelection",r[r.Zoom=11]="Zoom";var d,f,p=function(e){return e.state.categories},g=n(240),b=function(e){var t=e.state.categories.filter((function(e){return"00000000-0000-0000-0000-000000000000"!==e.id}));return Object(g.b)(t,"name")},j=function(e){var t;return null===(t=e.state.image)||void 0===t?void 0:t.instances},m=function(e){return e.state.image},v=function(e){return e.state.invertMode},O=function(e){return e.state.operation},x=n(33),y=function(e){var t=e.state;return x.find(t.categories,(function(e){return e.id===t.selectedCategory}))},k=function(e){return e.state.selectionMode},w=function(e){return e.state.categories.find((function(e){return"00000000-0000-0000-0000-000000000000"===e.id}))},C=function(e){return e.state.zoomMode},M=n(44),S=n(822),I=n(823),E=n(225),B=n(841),P=n(52),L=n(813),A=Object(L.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},grow:{flexGrow:1},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(P.a)({},e.mixins.toolbar),settingsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),D=n(821),_=n(301),W=n.n(_),R=n(458),z=n(840),N=Object(L.a)((function(e){return{button:{margin:e.spacing(1),textTransform:"none"}}})),F=n(7),T=n.n(F),Z=n(16),G=n(816),U=n(20),H=n(316);!function(e){e[e.Add=0]="Add",e[e.Intersect=1]="Intersect",e[e.New=2]="New",e[e.Subtract=3]="Subtract"}(d||(d={})),function(e){e[e.In=0]="In",e[e.Out=1]="Out"}(f||(f={}));var Y={brightness:0,categories:[{color:"#AAAAAA",id:"00000000-0000-0000-0000-000000000000",name:"Unknown",visible:!0}],contrast:0,exposure:0,hue:0,image:{id:"",instances:[],name:"foo.png",shape:{c:512,channels:3,r:512},src:n.p+"static/media/colorImage.f118ef08.png"},invertMode:!1,operation:i.RectangularSelection,penSelectionBrushSize:1,saturation:0,selectedCategory:"00000000-0000-0000-0000-000000000000",selectionMode:d.New,vibrance:0,zoomMode:f.In},X=Object(H.b)({initialState:Y,name:"image-viewer",reducers:{deleteCategory:function(e,t){e.categories=e.categories.filter((function(e){return e.id!==t.payload.category.id}))},deleteImageInstance:function(e,t){e.image&&(e.image.instances=e.image.instances.filter((function(e){return e.id!==t.payload.id})))},setBrightness:function(e,t){e.brightness=t.payload.brightness},setCategories:function(e,t){e.categories=t.payload.categories},setCategoryVisibility:function(e,t){var n=x.find(e.categories,(function(e){return e.id===t.payload.category.id}));n&&(n.visible=t.payload.visible,e.categories=[].concat(Object(U.a)(e.categories.filter((function(e){return e.id!==t.payload.category.id}))),[n]))},setContrast:function(e,t){e.contrast=t.payload.contrast},setExposure:function(e,t){e.exposure=t.payload.exposure},setHue:function(e,t){e.hue=t.payload.hue},setImage:function(e,t){e.image=t.payload.image},setImageInstances:function(e,t){e.image&&(e.image.instances=t.payload.instances)},setInvertMode:function(e,t){e.invertMode=t.payload.invertMode},setOperation:function(e,t){e.operation=t.payload.operation},setPenSelectionBrushSize:function(e,t){e.penSelectionBrushSize=t.payload.penSelectionBrushSize},setSaturation:function(e,t){e.saturation=t.payload.saturation},setSeletedCategory:function(e,t){e.selectedCategory=t.payload.selectedCategory},setSelectionMode:function(e,t){e.selectionMode=t.payload.selectionMode},setVibrance:function(e,t){e.vibrance=t.payload.vibrance},setZoomMode:function(e,t){e.zoomMode=t.payload.zoomMode}}}),Q=X.actions,q=(Q.deleteCategory,Q.deleteImageInstance,Q.setBrightness,Q.setCategories,Q.setCategoryVisibility,Q.setContrast,Q.setExposure,Q.setHue,Q.setImage),V=(Q.setImageInstances,Q.setInvertMode,Q.setOperation,Q.setPenSelectionBrushSize,Q.setSaturation,Q.setSelectionMode,Q.setSeletedCategory,Q.setVibrance,Q.setZoomMode,n(11)),J=function(e){var t=e.onClose,n=Object(M.b)();return Object(V.jsxs)(G.a,{component:"label",dense:!0,children:["Computer",Object(V.jsx)("input",{accept:"image/*",hidden:!0,id:"open-image",onChange:function(e){if(t(),e.persist(),e.currentTarget.files){var i=e.currentTarget.files[0],r=new FileReader;r.onload=function(){var e=Object(Z.a)(T.a.mark((function e(t){var r,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target&&(r=t.target.result,(a=new Image).onload=function(){var e=i.name,t={r:a.naturalHeight,c:a.naturalWidth,channels:4};n(q({image:{id:"",instances:[],name:e,shape:t,src:r}}))},a.src=r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(i)}},type:"file"})]})},$=n(818),K=n(778),ee=n(776),te=n(820),ne=n.p+"static/media/malaria.5b73ad75.png",ie=function(e){var t=e.onClose,n=e.open,i=Object(M.b)(),r=[{name:"Microscopy",description:"Fusce lectus lorem, lacinia eu libero eu, pellentesque semper dui. Nunc bibendum est eget lacus fermentum ullamcorper.",data:ne},{name:"Microscopy (3D)",description:"Cras lobortis sapien eu tellus malesuada sodales. Vivamus placerat est eu mi ullamcorper, ut ultrices elit rhoncus. Aliquam vitae viverra nisi. Sed odio metus, finibus quis nisi a, vulputate varius justo.",data:ne}];return Object(V.jsx)($.a,{open:n,children:Object(V.jsx)(K.a,{component:"div",role:"list",children:r.map((function(e,n){return Object(V.jsx)(ee.a,{button:!0,divider:!0,role:"listitem",onClick:function(){return function(e){var n=e.data,r=(e.description,e.name);t(),i(q({image:{id:"",instances:[],name:r,shape:{r:512,c:512,channels:4},src:n}}))}(e)},children:Object(V.jsx)(te.a,{primary:e.name,secondary:e.description})},n)}))})})},re=function(e){var t=e.onClose,n=o.a.useState(!1),i=Object(u.a)(n,2),r=i[0],a=i[1];return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsx)(G.a,{dense:!0,onClick:function(){t(),a(!0)},children:"Example"}),Object(V.jsx)(ie,{onClose:function(){a(!1)},open:r})]})},ae=o.a.forwardRef((function(e,t){var n=e.onClose;return Object(V.jsx)(J,{onClose:n})})),oe=o.a.forwardRef((function(e,t){var n=e.onClose;return Object(V.jsx)(re,{onClose:n})})),se=function(e){var t=e.anchorEl,n=e.onClose;return Object(V.jsxs)(R.a,{anchorEl:t,keepMounted:!0,onClose:n,open:Boolean(t),children:[Object(V.jsx)(ae,{onClose:n}),Object(V.jsx)(oe,{onClose:n})]})},ce=function(){var e=o.a.useState(null),t=Object(u.a)(e,2),n=t[0],i=t[1],r=N();return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsx)(z.a,{title:"Open image",children:Object(V.jsx)(D.a,{className:r.button,startIcon:Object(V.jsx)(W.a,{}),onClick:function(e){i(e.currentTarget)},children:"Open image"})}),Object(V.jsx)(se,{anchorEl:n,onClose:function(){i(null)}})]})},le=Object(L.a)((function(e){return{button:{margin:e.spacing(1),textTransform:"none"}}})),ue=n(460),he=function(){var e=le(),t=Object(M.c)(m),n=Object(M.c)(p);return Object(V.jsx)(o.a.Fragment,{children:Object(V.jsx)(z.a,{title:"Export annotations",children:Object(V.jsx)(D.a,{className:e.button,startIcon:Object(V.jsx)(W.a,{}),onClick:function(){if(t){var e={src:t.src,instances:t.instances.map((function(e){var t;return{boundingBox:e.boundingBox,category:null===(t=x.find(n,(function(t){return t.id===e.categoryId})))||void 0===t?void 0:t.name,mask:e.mask}}))},i=[JSON.stringify(e)],r=new Blob(i,{type:"text/json;charset=utf-8"});Object(ue.saveAs)(r,"foo.json")}},children:"Export"})})})},de=function(){var e=A();return Object(V.jsx)(S.a,{className:e.appBar,color:"inherit",position:"fixed",children:Object(V.jsxs)(I.a,{children:[Object(V.jsxs)(E.a,{className:e.logo,variant:"h6",children:[Object(V.jsx)("strong",{children:"Piximi"})," Image viewer ",Object(V.jsx)(B.a,{label:"Early access"})]}),Object(V.jsx)("div",{className:e.grow}),Object(V.jsx)(ce,{}),Object(V.jsx)(he,{})]})})},fe=n(843),pe=Object(L.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(P.a)({},e.mixins.toolbar),settingsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),ge=n(824),be=n(461),je=n.n(be),me=n(462),ve=n.n(me),Oe=n(825),xe=function(e){var t=e.children,n=e.primary,i=o.a.useState(!0),r=Object(u.a)(i,2),a=r[0],s=r[1];return Object(V.jsxs)(K.a,{dense:!0,children:[Object(V.jsxs)(ee.a,{button:!0,dense:!0,onClick:function(){s(!a)},children:[Object(V.jsx)(ge.a,{children:a?Object(V.jsx)(je.a,{}):Object(V.jsx)(ve.a,{})}),Object(V.jsx)(te.a,{primary:n})]}),Object(V.jsx)(Oe.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(K.a,{component:"div",dense:!0,disablePadding:!0,children:t})})]})},ye=n(497),ke=n.n(ye),we=n(827),Ce=n(828),Me=n(836),Se=n(830),Ie=n(826),Ee=n(782),Be=n(842),Pe=n(779),Le=n(505),Ae=Object(L.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),De=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],_e=function(e){var t=e.color,n=e.onColorChange,i=Ae(),r=a.useState(null),o=Object(u.a)(r,2),s=o[0],c=o[1],l=Boolean(s),h=function(){c(null)};return Object(V.jsxs)(a.Fragment,{children:[Object(V.jsx)(Ee.a,{onClick:function(e){c(e.currentTarget)},children:Object(V.jsx)(Be.a,{style:{backgroundColor:"#F3F3F3"},children:Object(V.jsx)(Ie.a,{style:{color:t}})})}),Object(V.jsx)(Pe.a,{id:"color-menu",open:l,anchorEl:s,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(V.jsx)("div",{className:i.colorPicker,children:Object(V.jsx)(Le.a,{colors:De,onChange:function(e){console.info(e),n(e),h()}})})})]})},We=n(829),Re=Object(L.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),ze=n(838),Ne=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],Fe=function(e){var t=e.onClose,n=e.open,i=Object(M.b)(),r=Object(M.c)(p),s=o.a.useState(Object(g.a)(Ne)),c=Object(u.a)(s,2),l=c[0],h=c[1],d=Object(a.useState)(""),f=Object(u.a)(d,2),b=f[0],j=f[1],m=Re();return Object(V.jsxs)($.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(V.jsx)(we.a,{children:"Create category"}),Object(V.jsx)(Ce.a,{className:m.createCategoryDialogContent,children:Object(V.jsx)("div",{className:m.createCategoryDialogGrid,children:Object(V.jsxs)(We.a,{container:!0,spacing:1,children:[Object(V.jsx)(We.a,{item:!0,xs:2,className:m.createCategoryDialogItem,children:Object(V.jsx)(_e,{color:l,onColorChange:function(e){h(e.hex)}})}),Object(V.jsx)(We.a,{item:!0,xs:10,children:Object(V.jsx)(Me.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){j(e.target.value)}})})]})})}),Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(D.a,{onClick:t,color:"primary",children:"Cancel"}),Object(V.jsx)(D.a,{onClick:function(){var e={color:l,id:Object(ze.a)().toString(),name:b||"Unnamed",visible:!0};i(X.actions.setCategories({categories:[].concat(Object(U.a)(r),[e])})),i(X.actions.setSeletedCategory({selectedCategory:e.id})),t(),h(Object(g.a)(Ne))},color:"primary",children:"Create"})]})]})},Te=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1];return{onClose:Object(a.useCallback)((function(){i(!1)}),[]),onOpen:Object(a.useCallback)((function(){i(!0)}),[]),open:n}},Ze=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],i=t[1];return o.a.useEffect((function(){var e=setTimeout((function(){i(n+1),n>32&&i(0)}),200);return function(){return clearTimeout(e)}})),n},Ge=n(78),Ue=n(2),He=n(8),Ye=n(13),Xe=n(14),Qe=function(e,t){var n=[];return x.filter(x.zip(e.slice(0,e.length-1),e.slice(1)),(function(e){var t=Object(u.a)(e,2),n=t[0],i=t[1];return!x.isEqual(n,i)})).forEach((function(e){var i=Object(u.a)(e,2),r=i[0],a=i[1],o=qe(t,r,a);n=x.concat(n,o)})),n},qe=function(e,t,n){var i,r,a,o,s,c,l,u,h=[];for(a=Math.round(t[0]),o=Math.round(t[1]),s=Math.round(n[0])-a,c=Math.round(n[1])-o,l=Math.abs(c),Math.abs(s)>=Math.abs(c)&&(l=Math.abs(s)),s/=l,c/=l,i=a,r=o,u=1;u<=l;)e.setPixelXY(Math.round(i),Math.round(r),[255,255,255,255]),h.push([Math.round(i),Math.round(r)]),i+=s,r+=c,u+=1;return h},Ve=function(e,t){return function(n,i,r){return(e*i+n)*t+(r=r||0)}};function Je(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function $e(e,t,n){var i=t[0],r=t[1],a=n[0]-i,o=n[1]-r;if(0!==a||0!==o){var s=((e[0]-i)*a+(e[1]-r)*o)/(a*a+o*o);s>1?(i=n[0],r=n[1]):s>0&&(i+=a*s,r+=o*s)}return(a=e[0]-i)*a+(o=e[1]-r)*o}function Ke(e,t,n,i,r){for(var a=i,o=0,s=t+1;s<n;s++){var c=$e(e[s],e[t],e[n]);c>a&&(o=s,a=c)}a>i&&(o-t>1&&Ke(e,t,o,i,r),r.push(e[o]),n-o>1&&Ke(e,o,n,i,r))}function et(e,t){var n=e.length-1,i=[e[0]];return Ke(e,0,n,t,i),i.push(e[n]),i}function tt(e,t,n){if(e.length<=2)return e;var i=void 0!==t?t*t:1;return e=et(e=n?e:function(e,t){for(var n=e[0],i=[n],r=[],a=1,o=e.length;a<o;a++)Je(r=e[a],n)>t&&(i.push(r),n=r);return n!==r&&i.push(r),i}(e,i),i)}var nt=n(21);function it(e,t){var n=Object(u.a)(t,2),i=Object(u.a)(n[0],2),r=i[0],a=i[1],o=Object(u.a)(n[1],2),s=o[0],c=o[1];return Math.floor((e-a)/(c-a)*(s-r)+r)}function rt(e){var t=Object(u.a)(e,2),n=Object(u.a)(t[0],2)[1],i=Object(u.a)(t[1],2)[1];return n<=i?n:i}function at(e){var t=Object(u.a)(e,2),n=Object(u.a)(t[0],2)[1],i=Object(u.a)(t[1],2)[1];return n>i?n:i}function ot(e){var t=Object(u.a)(e,2),n=Object(u.a)(t[0],2),i=n[0],r=n[1],a=Object(u.a)(t[1],2),o=a[0];return r<=a[1]?i:o}function st(e){var t=Object(u.a)(e,2),n=Object(u.a)(t[0],2),i=n[0],r=n[1],a=Object(u.a)(t[1],2),o=a[0];return r>a[1]?i:o}function ct(e,t,n){for(;t.length>0&&e===rt(t[t.length-1]);)n.push(t.pop())}function lt(e,t){for(var n=0;n<t.length;n++)if(e>=at(t[n])){var i=t.pop();n<t.length&&i&&(t[n]=i,n--)}}function ut(e,t){var n,i=[],r=Object(nt.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push(it(e,a))}}catch(o){r.e(o)}finally{r.f()}return i}function ht(e,t,n){for(var i=0;i<e.length;i+=2)dt(e[i],e[i+1],t,n)}function dt(e,t,n,i){for(var r=e;r<t;r++)i.setPixelXY(r,n,[255,255,255,255])}var ft=function(e){for(var t=[],n=!0,i=0;i<e.length;i++){for(var r=0;r<e[i];r++)t.push(n?0:255);n=!n}return new Uint8ClampedArray(t)},pt=function(e){var t=e[0],n=1,i=[];255===e[0]&&i.push(0);for(var r=1;r<e.length;r++)t!==e[r]?(i.push(n),t=e[r],n=1):n+=1;return i.push(n),i},gt=n(476),bt=function(){function e(t){Object(Ue.a)(this,e),this.image=void 0,this.manager=void 0,this.points=[],this.selected=!1,this.selecting=!1,this.selection=void 0,this._boundingBox=void 0,this._contour=void 0,this._mask=void 0,this.image=t,this.manager=t.getRoiManager()}return Object(He.a)(e,[{key:"add",value:function(e){if(!this._mask)return[[],[]];var t=ft(e),n=ft(this._mask).map((function(e,n){return 255===e||255===t[n]?255:0})),i=x.chunk(n,this.image.width).map((function(e){return Array.from(e)})),r=this.computeContours(i);return[pt(n),x.flatten(r)]}},{key:"intersect",value:function(e){if(!this._mask)return[[],[]];var t=ft(e),n=ft(this._mask).map((function(e,n){return 255===e&&255===t[n]?255:0})),i=x.chunk(n,this.image.width).map((function(e){return Array.from(e)})),r=this.computeContours(i);return[pt(n),x.flatten(r)]}},{key:"invert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(e=Array.from(ft(e))),e.forEach((function(t,n){e[n]=255===t?0:255})),t&&(e=pt(Uint8Array.from(e))),e}},{key:"invertContour",value:function(e){var t=x.flatten(x.reverse(x.chunk(e,2)));return x.concat([0,0,512,0,512,512,0,512,0,0],t)}},{key:"subtract",value:function(e){if(!this._mask)return[[],[]];var t=ft(e),n=ft(this._mask).map((function(e,n){return 255===e&&255===t[n]?0:t[n]})),i=x.chunk(n,this.image.width).map((function(e){return Array.from(e)})),r=this.computeContours(i);return[pt(n),x.flatten(r)]}},{key:"boundingBox",get:function(){return this._boundingBox},set:function(e){this._boundingBox=e}},{key:"computeBoundingBoxFromContours",value:function(e){var t=x.chunk(e,2);return[Math.round(x.min(x.map(t,x.first))),Math.round(x.min(x.map(t,x.last))),Math.round(x.max(x.map(t,x.first))),Math.round(x.max(x.map(t,x.last)))]}},{key:"computeContours",value:function(e){return Object(gt.a)(e,1).sort((function(e,t){return t.length-e.length}))[0]}},{key:"computeMask",value:function(){var e=new Ge.a({width:this.image.width,height:this.image.height,bitDepth:8}),t=x.chunk(this.points,2),n=Qe(t,e);return tt(n,1,!0),function(e,t){if(!(e.length<3))for(var n=function(e){for(var t=[],n=e[e.length-1],i=0;i<e.length;i++){var r=e[i];n[1]!=r[1]&&t.push([n,r]),n=r}return t}(e).sort((function(e,t){return rt(t)-rt(e)})),i=[],r=rt(n[n.length-1]);n.length>0||i.length>0;)ct(r,n,i),lt(r,i),i.sort((function(e,t){var n=ot(e)-ot(t);return 0==n?st(e)-st(t):n})),ht(ut(r,i),r,t),r++}(n,e),pt(e.getChannel(0).data)}},{key:"contour",get:function(){return this._contour},set:function(e){this._contour=e}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask=e}},{key:"select",value:function(e){this.boundingBox&&this.contour&&this.mask&&(this.selection={boundingBox:this.boundingBox,categoryId:e.id,contour:this.contour,id:ze.a(),mask:this.mask})}}]),e}(),jt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).roiContour=void 0,e.roiMask=void 0,e.offset=void 0,e.overlayData="",e.points=[],e.initialPosition={x:0,y:0},e.tolerance=1,e.toleranceMap=void 0,e.fromFlood=function(e){var t=e.x,n=e.y,i=e.image,r=e.tolerance,a=new Ge.a(i.width,i.height,new Uint8ClampedArray(i.width*i.height*4),{alpha:1}).getRoiManager();return a.fromWaterShed({image:i,fillMaxValue:r,points:[[t,n]]}),a},e}return Object(He.a)(n,[{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.overlayData="",this.roiMask=void 0,this.roiContour=void 0,this.points=[],this.initialPosition={x:0,y:0},this.tolerance=1,this.toleranceMap=void 0}},{key:"onMouseDown",value:function(e){this.selected=!1,this.selecting=!0,this.tolerance=1,this.initialPosition=e,this.toleranceMap=function(e){for(var t=e.x,n=e.y,i=e.image,r=[],a=i.getPixelXY(t,n),o=0;o<i.data.length;o+=i.channels){var s=Math.abs(i.data[o]-a[0]),c=Math.abs(i.data[o+1]-a[1]),l=Math.abs(i.data[o+2]-a[2]);r.push(Math.floor((s+c+l)/3))}return new Ge.a(i.width,i.height,r,{alpha:0,components:1})}({x:Math.floor(e.x),y:Math.floor(e.y),image:this.image}),this.updateOverlay(e)}},{key:"onMouseMove",value:function(e){if(this.selecting){var t=Math.ceil(Math.hypot(e.x-this.initialPosition.x,e.y-this.initialPosition.y));t!==this.tolerance&&(this.tolerance=t,this.updateOverlay(this.initialPosition))}}},{key:"onMouseUp",value:function(e){if(this.roiContour&&this.roiMask){var t=x.chunk(this.roiContour.getRGBAData(),4).map((function(e){return 255===e[0]?255:0})),n=Ge.a.createFrom(this.roiMask,{bitDepth:8,data:t}).getMatrix().data.map((function(e){return Array.from(e)})),i=this.computeContours(n);if(i){var r=this.roiMask.position[0],a=this.roiMask.position[1];this.points=x.flatten(i.map((function(e){return[Math.round(e[0]+r),Math.round(e[1]+a)]}))),this._contour=this.points,this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this._mask=pt(this.roiMask.data),this.selected=!0,this.selecting=!1}}}},{key:"updateOverlay",value:function(e){var t=this.fromFlood({x:Math.floor(e.x),y:Math.floor(e.y),image:this.toleranceMap,tolerance:this.tolerance});this.roiMask=t.getMasks()[0],this.roiContour=t.getMasks({kind:"contour"})[0],this.roiMask&&(this.offset={x:this.roiMask.position[0],y:this.roiMask.position[1]},this.overlayData=n.colorOverlay(this.roiMask,e,"red"))}}],[{key:"colorOverlay",value:function(e,t,n){for(var i=[parseInt(n.slice(1,3),16),parseInt(n.slice(3,5),16),parseInt(n.slice(5,7),16),150],r=new Ge.a(e.width,e.height,new Uint8Array(e.width*e.height*4),{alpha:1}),a=0;a<e.width;a++)for(var o=0;o<e.height;o++)e.getBitXY(a,o)&&r.setPixelXY(a,o,i);return r.setPixelXY(t.x,t.y,[255,255,255,255]),r.toDataURL()}}]),n}(bt),mt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).center=void 0,e.origin=void 0,e.radius=void 0,e}return Object(He.a)(n,[{key:"computeBoundingBox",value:function(){if(this.center&&this.origin&&this.radius)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.center.x+this.radius.x),Math.round(this.center.y+this.radius.y)]}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.center=void 0,this.origin=void 0,this.radius=void 0}},{key:"onMouseDown",value:function(e){this.selected||(this.radius?(this.resize(e),this.selected=!0,this.selecting=!1,this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox()):(this.origin=e,this.selecting=!0))}},{key:"onMouseMove",value:function(e){this.selected||this.resize(e)}},{key:"onMouseUp",value:function(e){!this.selected&&this.selecting&&this.radius&&(this.resize(e),this.selected=!0,this.selecting=!1,this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox())}},{key:"convertToPoints",value:function(){if(this.radius&&this.origin&&this.center){for(var e=Math.round(this.center.x),t=Math.round(this.center.y),n=[],i=[],r=t;r<t+this.radius.y;r+=.5){var a=this.radius.x*Math.sqrt(1-(r-t)*(r-t)/(this.radius.y*this.radius.y))+e;n.push(Math.round(a)),n.push(Math.round(r)),i.push([Math.round(a),Math.round(r)])}return x.forEachRight(i,(function(t){var i=2*e-t[0];n.push(i),n.push(t[1])})),x.forEach(i,(function(i){var r=2*e-i[0],a=2*t-i[1];n.push(r),n.push(a)})),x.forEachRight(i,(function(e){var i=2*t-e[1];n.push(e[0]),n.push(i)})),n}}},{key:"resize",value:function(e){this.origin&&(this.center={x:(e.x-this.origin.x)/2+this.origin.x,y:(e.y-this.origin.y)/2+this.origin.y},this.radius={x:Math.abs((e.x-this.origin.x)/2),y:Math.abs((e.y-this.origin.y)/2)})}}]),n}(bt),vt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).anchor=void 0,e.buffer=[],e.origin=void 0,e.points=[],e}return Object(He.a)(n,[{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(U.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(!this.selected&&this.selecting)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]))):void(this.origin&&(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y])))}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting){if(this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0&&(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.buffer=[]),this.anchor)return this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]),void(this.anchor=e);this.origin&&this.buffer&&this.buffer.length>0&&(this.anchor=e)}}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}}]),n}(bt),Ot=n(147),xt=n(477),yt=n.n(xt),kt=function(){function e(){Object(Ue.a)(this,e),this.data=[],this.length=0}return Object(He.a)(e,[{key:"compare",value:function(e,t){return e.fScore-t.fScore}},{key:"setNodeId",value:function(e,t){e.heapIndex=t}},{key:"push",value:function(e){this.data.push(e),this.setNodeId(e,this.length),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),e}}},{key:"updateItem",value:function(e){this._down(e),this._up(e)}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,i=this.setNodeId,r=t[e];e>0;){var a=e-1>>1,o=t[a];if(n(r,o)>=0)break;t[e]=o,i(o,e),e=a}t[e]=r,i(r,e)}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,i=this.length>>1,r=t[e],a=this.setNodeId;e<i;){var o=1+(e<<1),s=o+1,c=t[o];if(s<this.length&&n(t[s],c)<0&&(o=s,c=t[s]),n(c,r)>=0)break;t[e]=c,a(c,e),e=o}t[e]=r,a(r,e)}}]),e}(),wt=[];function Ct(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(t){var r=It(t.id,n),a=Object(u.a)(r,2),o=a[0],s=a[1],c=[o/i,s/i],l=[],h=e.fromId;if(null!==t.parentId){var d=e.getNode(t.parentId);if("undefined"!==typeof d&&d.fromId===h&&(l.push.apply(l,Object(U.a)(d.trace)),l.length>1)){var f=Mt(l[l.length-2],l[l.length-1]),p=Mt(l[l.length-1],c);f===p&&l.pop()}}return l.push(c),l}}var Mt=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];if(0===n){if(i<0)return 0;if(i>0)return 4}if(0===i){if(n>0)return 2;if(n<0)return 6}if(n>0){if(i<0)return 1;if(i>0)return 3}if(n<0){if(i<0)return 7;if(i>0)return 5}console.log("Invalid direction, this should never appear so check the code",n,i)},St=function(e,t,n,i){var r=[0],a=[0],o=[];e>0&&r.push(-1),e<i-1&&r.push(1),t>0&&a.push(-1),t<n-1&&a.push(1);for(var s=0,c=r;s<c.length;s++){var l,u=c[s],h=Object(nt.a)(a);try{for(h.s();!(l=h.n()).done;){var d=l.value;0===u&&0===d||o.push({x:e+u,y:t+d})}}catch(f){h.e(f)}finally{h.f()}}return o},It=function(e,t){var n=Math.floor(e/t);return[e-n*t,n]},Et=function(e,t,n){var i=yt()();i.fromId=-1,i.openSet=new kt;for(var r=0;r<t;r++)for(var a=0;a<n;a++){var o=Ve(n,1)(a,r,0),s=255-e[o];i.addNode(o,s);var c,l=St(a,r,t,n),u=Object(nt.a)(l);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=Ve(n,1)(h.x,h.y,0);i.addLink(o,d)}}catch(f){u.e(f)}finally{u.f()}}return i},Bt=function(e,t,n){return function(e,t,n){var i=function(e,n){var i=It(e.id,t),r=Object(u.a)(i,2),a=r[0],o=r[1],s=It(n.id,t),c=Object(u.a)(s,2),l=c[0],h=c[1];return a===l||o===h?1:1.41};return{find:function(r,a){var o=e.getNode(r);if(!o)return wt;var s,c=e.getNode(a);if(!c)return wt;var l=e.getNode(a);if(l&&l.fromId===r&&l.trace.length>0)return l.trace;for(e.fromId===r&&0!==e.openSet.length||(e.openSet=new kt,o.fScore=i(o,c),o.distanceToSource=0,e.openSet.push(o),o.open=1,e.fromId=r);e.openSet.length>0;){if((s=e.openSet.pop()).id===a)return s.trace=Ct(e,s,t,n),s.fromId=r,s.trace;s.trace=Ct(e,s,t,n),s.fromId=r,s.closed=!0,e.forEachLinkedNode(s.id,u,!0)}return wt;function u(t){if(t.fromId!==e.fromId&&(t.fromId=e.fromId,t.trace=[],t.parentId=null,t.closed=!1,t.open=0,t.distanceToSource=Number.POSITIVE_INFINITY,t.fScore=Number.POSITIVE_INFINITY,t.heapIndex=-1),!t.closed){0===t.open&&(e.openSet.push(t),t.open=1);var n=s.distanceToSource+s.data;n>=t.distanceToSource||(t.parentId=s.id,t.distanceToSource=n,t.fScore=n+i(t,c),e.openSet.updateItem(t.heapIndex))}}}}}(e,t,n)},Pt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return Object(Ue.a)(this,n),(i=t.call(this,e)).anchor=void 0,i.buffer=[],i.factor=void 0,i.graph=void 0,i.origin=void 0,i.path=[],i.pathfinder=void 0,i.points=[],i.previous=[],i.response=void 0,i.factor=r,i.filter(),i.image&&i.response?(i.graph=Et(i.response.data,i.response.height,i.response.width),i.pathfinder=Bt(i.graph,i.image.width*r,r),i):Object(Ot.a)(i)}return Object(He.a)(n,[{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.graph=void 0,this.origin=void 0,this.points=[],this.previous=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(U.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour)),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(this.image&&this.pathfinder&&!this.selected&&this.selecting){if(this.anchor){var t=Ve(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=Ve(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);return this.path=x.flatten(this.pathfinder.find(t,n)),this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(U.a)(this.previous),[this.anchor.x,this.anchor.y],Object(U.a)(this.path)))}if(this.origin){var i=Ve(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),r=Ve(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);this.path=x.flatten(this.pathfinder.find(i,r)),this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y].concat(Object(U.a)(this.path))}}}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting){if(this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0)return this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),void(this.buffer=[]);if(this.anchor&&this.image){var t=Ve(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=Ve(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);if(!this.pathfinder)return;return this.path=x.flatten(this.pathfinder.find(t,n)),this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(U.a)(this.previous),Object(U.a)(this.path)),this.previous=[].concat(Object(U.a)(this.previous),Object(U.a)(this.path)),void(this.anchor=e)}if(this.origin&&this.buffer.length>0){if(!this.image||!this.origin||!this.pathfinder)return;this.anchor=e;var i=Ve(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),r=Ve(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);return this.path=x.flatten(this.pathfinder.find(i,r)),this.buffer=[this.origin.x,this.origin.y].concat(Object(U.a)(this.path)),void(this.previous=[].concat(Object(U.a)(this.previous),[this.origin.x,this.origin.y],Object(U.a)(this.path)))}}}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}},{key:"filter",value:function(){if(this.image){var e={factor:this.factor};this.response=this.image.resize(e).grey().sobelFilter()}}}]),n}(bt),Lt=n(30),At=n(29),Dt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).origin=void 0,e.width=void 0,e.height=void 0,e}return Object(He.a)(n,[{key:"computeBoundingBox",value:function(){if(this.origin&&this.width&&this.height)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.origin.x+this.width),Math.round(this.origin.y+this.height)]}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.origin=void 0,this.width=void 0,this.height=void 0}},{key:"onMouseDown",value:function(e){this.selected||(this.width?(this.resize(e),this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox(),this.selected=!0,this.selecting=!1):(this.origin=e,this.selecting=!0))}},{key:"onMouseMove",value:function(e){this.selected||this.resize(e)}},{key:"onMouseUp",value:function(e){!this.selected&&this.selecting&&this.width&&(this.resize(e),this.points=this.convertToPoints(),this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBox(),this.selected=!0,this.selecting=!1)}},{key:"convertToPoints",value:function(){if(this.width&&this.height&&this.origin){var e=[],t={x:this.origin.x,y:this.origin.y},n=this.width,i=this.height;this.width<0&&(n=Math.abs(this.width),t.x=this.origin.x-n),this.height<0&&(i=Math.abs(this.height),t.y=this.origin.y-i);for(var r=0;r<n;r++)e.push(Math.round(r+t.x)),e.push(Math.round(t.y));for(var a=0;a<i;a++)e.push(Math.round(t.x+n-1)),e.push(Math.round(a+t.y));for(var o=n-1;o>=0;o--)e.push(Math.round(o+t.x)),e.push(Math.round(t.y+i-1));for(var s=i-1;s>=0;s--)e.push(Math.round(t.x)),e.push(Math.round(s+t.y));return e}}},{key:"resize",value:function(e){this.origin&&(this.width=e.x-this.origin.x,this.height=e.y-this.origin.y)}}]),n}(bt),_t=n(167),Wt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).graph=void 0,e.prediction=void 0,e.points=[],e.roi=void 0,e.offset=void 0,e.output=void 0,e}return Object(He.a)(n,[{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.prediction=void 0,this.points=[],this.roi=void 0,this.offset=void 0,this.output=void 0,this.origin=void 0,this.width=void 0}},{key:"onMouseUp",value:function(e){Object(Lt.a)(Object(At.a)(n.prototype),"onMouseUp",this).call(this,e),this.predict()}},{key:"predict",value:function(){var e=Object(Z.a)(T.a.mark((function e(){var t,n,i,r,a=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.image&&this.origin&&this.width&&this.height){e.next=2;break}return e.abrupt("return");case 2:t=Math.floor(this.width),n=Math.floor(this.height),i=this.image.crop({x:this.origin.x,y:this.origin.y,width:t,height:n}),(r=_t.e((function(){if(i){var e=_t.a.fromPixels(i.getCanvas()),r=_t.b.resizeBilinear(e,[128,128]).div(_t.d(255)).expandDims(0);if(a.graph)return a.graph.predict(r).squeeze([0]).tile([1,1,3]).sub(.3).sign().relu().resizeBilinear([n,t]).pad([[a.origin.y,a.image.height-(a.origin.y+n)],[a.origin.x,a.image.width-(a.origin.x+t)],[0,0]])}})))&&_t.a.toPixels(r).then(function(){var e=Object(Z.a)(T.a.mark((function e(t){var n,i,r,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.output=new Ge.a({width:a.image.width,height:a.image.height,data:t}),n=a.output.grey().getMatrix().data,i=n.map((function(e){return Array.from(e)})),r=a.computeContours(i),o=x.flatten(r),a.points=o.map((function(e){return Math.round(e)})),a._mask=pt(a.output.getChannel(0).data),a._contour=a.points,a._boundingBox=a.computeBoundingBoxFromContours(a._contour);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"compile",value:function(){var e=Object(Z.a)(T.a.mark((function e(t){var i,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new n(t),"https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json",e.next=4,_t.c("https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json");case 4:return i.graph=e.sent,r=_t.f.adam(),i.graph.compile({optimizer:r,loss:"categoricalCrossentropy",metrics:["accuracy"]}),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Dt),Rt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).anchor=void 0,e.buffer=[],e.origin=void 0,e.points=[],e}return Object(He.a)(n,[{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(U.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(!this.selected&&this.selecting)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]))):void(this.origin&&(this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y,e.x,e.y]))}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting)return this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0?(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,this._contour=this.points,this._mask=this.computeMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.buffer=[],this.anchor=void 0,void(this.origin=void 0)):this.anchor?(this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]),void(this.anchor=e)):void(this.origin&&this.buffer.length>0&&(this.anchor=e))}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}}]),n}(bt),zt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).currentData=void 0,e.colorMasks=void 0,e.currentSuperpixel=void 0,e.superpixels=void 0,e.currentMask=void 0,e.map=void 0,e.masks=void 0,e}return Object(He.a)(n,[{key:"computeObjectSelectionMask",value:function(){if(this.currentMask){for(var e=this.currentMask.grey(),t=new Ge.a(this.currentMask.width,this.currentMask.height,{alpha:0,bitDepth:1,components:1}),n=0;n<t.width;n++)for(var i=0;i<t.height;i++)e.getPixelXY(n,i)[0]>0&&t.setBitXY(n,i);return pt(t.data)}}},{key:"filter",value:function(){var e=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,r=arguments.length>4?arguments[4]:void 0;r||(r=i*i/4);for(var a=t,o=n,s=parseInt(String(a/i),10),c=parseInt(String(o/i),10),l=parseInt(String(s*c),10),u=parseInt(String(a*o),10),h=new Array(u),d=new Float32Array(5*l),f=new Float32Array(5*l),p=new Float32Array(2*l),g=new Float32Array(u),b=new Float32Array(u),j=new Float32Array(u),m=new Float32Array(3*a*o),v=2.2,O=0;O<a*o;O++){var x=Math.pow(.00392156862*parseFloat(String(e[4*O])),v),y=Math.pow(.00392156862*parseFloat(String(e[4*O+1])),v),k=Math.pow(.00392156862*parseFloat(String(e[4*O+2])),v);m[O]=.488718*x+.31068*y+.200602*k,m[O+a*o]=.176204*x+.812985*y+.0108109*k,m[O+2*a*o]=.0102048*y+.989795*k}for(var w=1/3,C=1/3,M=1,S=1/(w/C),I=1/M,E=1/((1-w-C)/C*M),B=new Float32Array(3*a*o),P=0;P<a*o;P++){var L=m[P]*S>.00856?Math.pow(m[P]*S,.33333333):7.78706891568*m[P]*S+.1379310336,A=m[a*o+P]*I>.00856?Math.pow(m[a*o+P]*I,.33333333):7.78706891568*m[a*o+P]*I+.1379310336,D=m[2*a*o+P]*E>.00856?Math.pow(m[2*a*o+P]*E,.33333333):7.78706891568*m[2*a*o+P]*E+.1379310336;B[P]=116*A-16,B[P+a*o]=500*(L-A),B[P+2*a*o]=200*(A-D)}for(var _=new Float32Array(u),W=0;W<3;W++)for(var R=1;R<o-1;R++)for(var z=1;z<a-1;z++){var N=B[W*a*o+R*a+z-1],F=B[W*a*o+R*a+z+1],T=B[W*a*o+(R+1)*a+z],Z=B[W*a*o+(R-1)*a+z];_[R*a+z]=_[R*a+z]+(N-F)*(N-F)+(T-Z)*(T-Z)}for(var G=0,U=0,H=0;H<c;H++)for(var Y=0;Y<s;Y++){var X=0,Q=0,q=1/0,V=parseInt(String(Math.round(i*(Y+.5))),10),J=parseInt(String(Math.round(i*(H+.5))),10);V=Math.max(Math.min(V,a-1),0),J=Math.max(Math.min(J,o-1),0);for(var $=Math.max(0,J-1);$<=Math.min(o-1,J+1);$++)for(var K=Math.max(0,V-1);K<=Math.min(a-1,V+1);K++){var ee=_[$*a+K];ee<q&&(q=ee,X=K,Q=$)}d[G++]=parseFloat(String(X)),d[G++]=parseFloat(String(Q)),d[G++]=B[Q*a+X],d[G++]=B[a*o+Q*a+X],d[G++]=B[2*a*o+Q*a+X],p[U++]=100,p[U++]=i*i}for(var te=10,ne=new Int32Array(u),ie=0;ie<te;++ie){for(var re=0;re<j.length;++re)j[re]=1/0;for(var ae=0;ae<s*c;++ae)for(var oe=Math.round(d[5*ae]),se=Math.round(d[5*ae+1]),ce=Math.max(0,se-i);ce<Math.min(o,se+i);++ce)for(var le=Math.max(0,oe-i);le<Math.min(a,oe+i);++le){var ue=(le-oe)*(le-oe)+(ce-se)*(ce-se),he=B[ce*a+le]-d[5*ae+2],de=B[a*o+ce*a+le]-d[5*ae+3],fe=B[2*a*o+ce*a+le]-d[5*ae+4],pe=he*he+de*de+fe*fe,ge=Math.sqrt(pe/p[2*ae]+ue/p[2*ae+1]);ge<j[ce*a+le]&&(j[ce*a+le]=ge,ne[ce*a+le]=ae)}for(var be=0;be<o;++be)for(var je=0;je<a;++je)p[2*ne[be*a+je]]<g[be*a+je]&&(p[2*ne[be*a+je]]=g[be*a+je]),p[2*ne[be*a+je]+1]<b[be*a+je]&&(p[2*ne[be*a+je]+1]=b[be*a+je]);for(var me=new Float32Array(p.length/2),ve=new Float32Array(p.length/2),Oe=0;Oe<ne.length;Oe++){var xe=ne[Oe];me[xe]<g[xe]&&(me[xe]=g[xe],p[2*xe]=g[xe]),ve[xe]<b[xe]&&(ve[xe]=b[xe],p[2*xe+1]=b[xe])}for(var ye=0;ye<h.length;++ye)h[ye]=0;for(var ke=0;ke<f.length;++ke)f[ke]=0;for(var we=void 0,Ce=0;Ce<o;Ce++)for(var Me=0;Me<a;Me++)h[we=ne[Me+Ce*a]]++,f[5*we]+=Me,f[5*we+1]+=Ce,f[5*we+2]+=B[Ce*a+Me],f[5*we+3]+=B[a*o+Ce*a+Me],f[5*we+4]+=B[2*a*o+Ce*a+Me];for(we=0;we<l;we++){var Se=1/Math.max(h[we],1e-8);f[5*we]=f[5*we]*Se,f[5*we+1]=f[5*we+1]*Se,f[5*we+2]=f[5*we+2]*Se,f[5*we+3]=f[5*we+3]*Se,f[5*we+4]=f[5*we+4]*Se}for(var Ie=0,Ee=0;Ee<d.length;++Ee){var Be=d[Ee]-f[Ee];Ie+=Math.sqrt(Be*Be)}if(Ie<1e-5)break;for(var Pe=0;Pe<d.length;++Pe)d[Pe]=f[Pe]}for(var Le,Ae,De,_e,We,Re,ze,Ne,Fe,Te=new Int32Array(u),Ze=new Int32Array(u),Ge=[1,-1,0,0],Ue=[0,0,1,-1],He=0;He<u;He++)if(!Te[He]){Ae=ne[He],_e=0,Le=0,Ze[Le++]=He,De=Ae+1,Te[He]=Ae+1,We=He%a,Re=Math.floor(He/a);for(var Ye=0;Ye<4;Ye++)Fe=(ze=We+Ge[Ye])+(Ne=Re+Ue[Ye])*a,0<=ze&&ze<a&&0<=Ne&&Ne<o&&Te[Fe]&&(De=Te[Fe]);for(;_e<Le;){var Xe=Ze[_e++];We=Xe%a,Re=Math.floor(Xe/a);for(var Qe=0;Qe<4;++Qe)Fe=(ze=We+Ge[Qe])+(Ne=Re+Ue[Qe])*a,0<=ze&&ze<a&&0<=Ne&&Ne<o&&0===Te[Fe]&&ne[Fe]===Ae&&(Te[Fe]=Ae+1,Ze[Le++]=Fe)}if(Le<r)for(;Le>0;)Te[Ze[--Le]]=De}for(var qe=0;qe<u;++qe)--Te[qe];for(var Ve=0;Ve<u;++Ve)ne[Ve]=Te[Ve];return{count:0,map:e,superpixels:ne}}(this.image.getRGBAData(),this.image.width,this.image.height,40);return{count:e.count,map:e.map,superpixels:e.superpixels}}},{key:"deselect",value:function(){}},{key:"onMouseDown",value:function(e){if(!this.selected&&this.superpixels&&this.masks){var t=Math.round(e.x)+Math.round(e.y)*this.image.width;this.currentSuperpixel=this.superpixels[t];var n=this.masks[this.currentSuperpixel];this.currentMask=n[2],this.currentData=n[1],this.selecting=!0}}},{key:"onMouseMove",value:function(e){if(!this.selected&&this.superpixels&&this.masks){var t=Math.round(e.x)+Math.round(e.y)*this.image.width,n=this.superpixels[t];if(n!==this.currentSuperpixel){this.currentSuperpixel=n;var i=this.masks[n];if(this.currentMask=i[2],this.selecting&&this.currentData){var r=i[1];this.currentData=this.addImages(r,this.currentData),this.currentMask=new Ge.a(this.image.width,this.image.height,this.currentData)}}}}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting&&this.currentMask){var t=this.currentMask.grey().getMatrix().data.map((function(e){return Array.from(e)})),n=this.computeContours(t);this.points=x.flatten(n.map((function(e){return[Math.round(e[0]),Math.round(e[1])]}))),this._contour=this.points,this._mask=this.computeObjectSelectionMask(),this._boundingBox=this.computeBoundingBoxFromContours(this._contour),this.selected=!0,this.selecting=!1}}},{key:"addImages",value:function(e,t){return e.map((function(e,n){return(n+1)%4===0?Math.max(e,t[n]):Math.min(e+t[n],255)}))}}],[{key:"colorSuperpixelMap",value:function(e,t){for(var n=[255,0,0,150],i=[],r=0;r<e.height;r++)for(var a=0;a<e.width;a++)255===e.getPixelXY(a,r)[0]?i.push(n):i.push([0,0,0,0]);for(var o=new Ge.a(e.width,e.height,new Uint8Array(e.width*e.height*4),{alpha:1}),s=0;s<e.width;s++)for(var c=0;c<e.height;c++)255===e.getPixelXY(s,c)[0]?o.setPixelXY(s,c,n):o.setPixelXY(s,c,[0,0,0,0]);return[Int32Array.from(x.flatten(i)),o]}},{key:"setup",value:function(e){var t=new n(e),i=t.filter(),r=(i.count,i.map),a=i.superpixels;t.map=r,t.superpixels=a;var o=x.uniq(a),s={};return x.forEach(o,(function(t){var i=a.map((function(e){return e===t?255:0})),r=new Ge.a(e.width,e.height,i,{components:1,alpha:0}),o=n.colorSuperpixelMap(r,"green"),c=Object(u.a)(o,2),l=c[0],h=c[1];s[t]=[i,l,h]})),t.masks=s,t}}]),n}(bt),Nt=function(e){Object(Ye.a)(n,e);var t=Object(Xe.a)(n);function n(){var e;Object(Ue.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).brushSize=8,e.circlesData=void 0,e.buffer=[],e.outline=[],e.points=[],e.thresholdMask=function(e){for(var t=0;t<e.width;t++)for(var n=0;n<e.height;n++)e.getPixelXY(t,n)[0]>1&&e.setPixelXY(t,n,[255]);return e},e}return Object(He.a)(n,[{key:"computeBoundingBox",value:function(){if(this.outline){var e=x.chunk(this.outline,2);return[Math.round(x.min(x.map(e,x.first))),Math.round(x.min(x.map(e,x.last))),Math.round(x.max(x.map(e,x.first))),Math.round(x.max(x.map(e,x.last)))]}}},{key:"computeCircleData",value:function(){var e=this,t=document.createElement("canvas");t.width=this.image.width,t.height=this.image.height;var n=t.getContext("2d");if(n){Qe(x.chunk(this.points,2),new Ge.a(this.image.width,this.image.height)).forEach((function(t){n.beginPath(),n.arc(Math.floor(t[0]),Math.floor(t[1]),e.brushSize/2,0,2*Math.PI,!0),n.fill()}));var i=Ge.a.fromCanvas(t);this.circlesData=this.thresholdMask(i.getChannel(3)).data}}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.circlesData=void 0,this.buffer=[],this.outline=[],this.points=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.selecting=!0,this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]))}},{key:"onMouseMove",value:function(e){!this.selected&&this.selecting&&(this.buffer=[].concat(Object(U.a)(this.buffer),[e.x,e.y]))}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting){if(this.selected=!0,this.selecting=!1,this.points=this.buffer,this.computeCircleData(),!this.circlesData)return[];if(this._mask=pt(this.circlesData),this.circlesData){var t=x.map(x.chunk(this.circlesData,this.image.width),(function(e){return Array.from(e)})),n=this.computeContours(t);this.outline=x.flatten(n),this._contour=this.outline,this._boundingBox=this.computeBoundingBoxFromContours(this._contour)}}}}],[{key:"setup",value:function(){var e=Object(Z.a)(T.a.mark((function e(t,i){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new n(t)).brushSize=i,e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(bt),Ft=function(){var e=Te(),t=e.onClose,n=e.onOpen,i=e.open;return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsxs)(ee.a,{button:!0,onClick:n,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(ke.a,{})}),Object(V.jsx)(te.a,{primary:"Create category"})]}),Object(V.jsx)(Fe,{onClose:t,open:i})]})},Tt=n(839),Zt=n(498),Gt=n.n(Zt),Ut=n(499),Ht=n.n(Ut),Yt=function(e){var t=e.category,n=Object(M.b)();return Object(V.jsx)(ge.a,{children:Object(V.jsx)(Tt.a,{checked:t.visible,checkedIcon:Object(V.jsx)(Gt.a,{style:{color:t.color}}),disableRipple:!0,edge:"start",icon:Object(V.jsx)(Ht.a,{style:{color:t.color}}),onClick:function(){n(X.actions.setCategoryVisibility({category:t,visible:!t.visible}))},tabIndex:-1})})},Xt=n(832),Qt=n(500),qt=n.n(Qt),Vt=n(781),Jt=n(831),$t=function(e){var t=e.category,n=e.onCloseCategoryMenu;return Object(V.jsx)(G.a,{onClick:function(e){n(e);t.id,t.visible},children:Object(V.jsxs)(E.a,{variant:"inherit",children:[t.visible?"Hide":"Show"," category"]})})},Kt=function(e){e.category;var t=e.onCloseCategoryMenu;return Object(V.jsx)(G.a,{onClick:function(e){t(e)},children:Object(V.jsx)(E.a,{variant:"inherit",children:"Hide other categories"})})},en=function(e){var t=e.anchorElCategoryMenu,n=e.category,i=e.onCloseCategoryMenu,r=e.openCategoryMenu,a=e.onOpenDeleteCategoryDialog,o=e.onOpenEditCategoryDialog;return Object(V.jsx)(R.a,{anchorEl:t,anchorOrigin:{horizontal:"center",vertical:"bottom"},getContentAnchorEl:null,onClose:i,open:r,transformOrigin:{horizontal:"center",vertical:"top"},children:Object(V.jsxs)(Vt.a,{dense:!0,variant:"menu",children:[Object(V.jsx)(Kt,{category:n,onCloseCategoryMenu:i}),Object(V.jsx)($t,{category:n,onCloseCategoryMenu:i}),"00000000-0000-0000-0000-000000000000"!==n.id&&Object(V.jsxs)("div",{children:[Object(V.jsx)(Jt.a,{}),Object(V.jsx)(G.a,{onClick:function(e){o(),i(e)},children:Object(V.jsx)(E.a,{variant:"inherit",children:"Edit category"})}),Object(V.jsx)(G.a,{onClick:function(e){a(),i(e)},children:Object(V.jsx)(E.a,{variant:"inherit",children:"Delete category"})})]})]})})},tn=function(e){var t=e.category,n=e.onClose,i=e.open,r=Object(M.b)(),a=Object(M.c)(y),o=Object(M.c)(j);return Object(V.jsxs)($.a,{fullWidth:!0,onClose:n,open:i,children:[Object(V.jsxs)(we.a,{children:['Delete "',t.name,'" category?']}),Object(V.jsxs)(Ce.a,{children:['Images categorized as "',t.name,'" will not be deleted.']}),Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(D.a,{onClick:n,color:"primary",children:"Cancel"}),Object(V.jsx)(D.a,{onClick:function(){a.id===t.id&&r(X.actions.setSeletedCategory({selectedCategory:"00000000-0000-0000-0000-000000000000"})),r(X.actions.deleteCategory({category:t}));var e=null===o||void 0===o?void 0:o.map((function(e){return e.categoryId===t.id?Object(P.a)(Object(P.a)({},e),{},{categoryId:"00000000-0000-0000-0000-000000000000"}):e}));r(X.actions.setImageInstances({instances:e})),n()},color:"primary",children:"Delete"})]})]})},nn=Object(L.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),rn=function(e){var t=e.category,n=e.onCloseDialog,i=e.openDialog,r=Object(M.b)(),o=nn(),s=Object(a.useState)(t.color),c=Object(u.a)(s,2),l=c[0],h=c[1],d=Object(a.useState)(t.name),f=Object(u.a)(d,2),g=f[0],b=f[1],j=Object(M.c)(p);return Object(V.jsxs)($.a,{fullWidth:!0,onClose:n,open:i,children:[Object(V.jsx)(we.a,{children:"Edit category"}),Object(V.jsx)(Ce.a,{children:Object(V.jsx)("div",{children:Object(V.jsxs)(We.a,{container:!0,spacing:1,children:[Object(V.jsx)(We.a,{item:!0,xs:2,className:o.createCategoryDialogItem,children:Object(V.jsx)(_e,{color:l,onColorChange:function(e){h(e.hex)}})}),Object(V.jsx)(We.a,{item:!0,xs:10,children:Object(V.jsx)(Me.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){b(e.target.value)},value:g})})]})})}),Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(D.a,{onClick:n,color:"primary",children:"Cancel"}),Object(V.jsx)(D.a,{onClick:function(){var e=null===j||void 0===j?void 0:j.map((function(e){return e.id===t.id?Object(P.a)(Object(P.a)({},t),{},{color:l,name:g}):e}));r(X.actions.setCategories({categories:e})),n()},color:"primary",children:"Update"})]})]})},an=function(e){var t=e.activeCategory,n=e.onCategoryClick,i=pe(),r=Object(M.c)(b),a=Object(M.c)(w),s=Te(),c=s.onClose,l=s.onOpen,h=s.open,d=Te(),f=d.onClose,p=d.onOpen,g=d.open,j=o.a.useState(null),m=Object(u.a)(j,2),v=m[0],O=m[1],x=function(e){O(e.currentTarget)},y=function(){O(null)};return Object(V.jsxs)(fe.a,{anchor:"left",className:i.applicationDrawer,classes:{paper:i.applicationDrawerPaper},open:!0,variant:"persistent",children:[Object(V.jsx)("div",{className:i.applicationDrawerHeader}),Object(V.jsxs)(xe,{primary:"Categories",children:[r.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsxs)(ee.a,{button:!0,dense:!0,id:e.id,onClick:function(t){return n(t,e)},selected:e.id===t.id,children:[Object(V.jsx)(Yt,{category:e}),Object(V.jsx)(te.a,{id:e.id,primary:e.name,primaryTypographyProps:{noWrap:!0}}),Object(V.jsx)(Xt.a,{children:Object(V.jsx)(Ee.a,{edge:"end",onClick:x,children:Object(V.jsx)(qt.a,{})})})]}),Object(V.jsx)(en,{anchorElCategoryMenu:v,category:e,onCloseCategoryMenu:y,onOpenCategoryMenu:x,onOpenDeleteCategoryDialog:l,onOpenEditCategoryDialog:p,openCategoryMenu:Boolean(v)}),Object(V.jsx)(tn,{category:e,onClose:c,open:h}),Object(V.jsx)(rn,{category:e,onCloseDialog:f,openDialog:g})]},e.id)})),Object(V.jsxs)(ee.a,{button:!0,dense:!0,id:a.id,onClick:function(e){return n(e,a)},selected:a.id===t.id,children:[Object(V.jsx)(Yt,{category:a}),Object(V.jsx)(te.a,{id:a.id,primary:a.name,primaryTypographyProps:{noWrap:!0}})]}),Object(V.jsx)(Ft,{})]})]})},on=Object(L.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},options:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(P.a)({},e.mixins.toolbar),settingsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),sn=n(501),cn=n.n(sn),ln=n(506),un=Object(ln.a)({overrides:{MuiDrawer:{paperAnchorDockedLeft:{borderRight:"1px solid rgba(16, 16, 16)"},paperAnchorDockedRight:{borderLeft:"1px solid rgba(16, 16, 16)"}},MuiListItem:{root:{"&$selected":{backgroundColor:"rgba(60, 61, 62)"}}},MuiSlider:{rail:{color:"rgba(73, 73, 73)"},thumb:{color:"rgba(201, 201, 201)"},track:{color:"rgba(159, 159, 159)"}}},palette:{background:{paper:"rgba(40, 40, 40)",default:"rgba(50, 50, 50)"},divider:"rgba(72, 72, 72)",text:{primary:"rgba(190, 190, 190)"},type:"dark"}}),hn=function(e){var t=e.handleCollapse,n=e.name,i=e.settings,r=on();return Object(V.jsxs)(fe.a,{anchor:"right",className:r.options,classes:{paper:r.settingsPaper},variant:"permanent",children:[Object(V.jsx)("div",{className:r.settingsToolbar}),Object(V.jsx)(K.a,{children:Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(te.a,{primary:n}),Object(V.jsx)(Ee.a,{onClick:function(){t(!1)},children:Object(V.jsx)(cn.a,{fontSize:"small",style:{fill:un.palette.text.primary}})})]})}),Object(V.jsx)(Jt.a,{}),i]})},dn=n(837),fn=n(510);function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function gn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var bn=a.createElement("g",{fill:"none"},a.createElement("path",{d:"M0 0h24v24h-24Z"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 21h-11c-.552 0-1-.448-1-1v-11c0-.552.448-1 1-1h11c.552 0 1 .448 1 1v11c0 .552-.448 1-1 1Z"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 5v-1c0-.552-.448-1-1-1h-1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 15v1c0 .552-.448 1-1 1h-1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 5v-1c0-.552.448-1 1-1h1"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 3h2"}),a.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 11v-2 0 0Z"}));function jn(e,t){var n=e.title,i=e.titleId,r=gn(e,["title","titleId"]);return a.createElement("svg",pn({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),n?a.createElement("title",{id:i},n):null,bn)}var mn=a.forwardRef(jn),vn=(n.p,n(844)),On=function(){var e=Object(M.b)(),t=Object(M.c)(k),n=Object(M.c)(v);return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsx)(vn.a,{"aria-label":"selection mode",name:"selection-mode",onChange:function(t){var n={selectionMode:parseInt(t.target.value)};e(X.actions.setSelectionMode(n))},value:t,children:Object(V.jsxs)(K.a,{children:[Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(dn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:d.New})}),Object(V.jsx)(te.a,{primary:"New",secondary:"Create a new selection."})]}),Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(dn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:d.Add})}),Object(V.jsx)(te.a,{primary:"Add",secondary:"Add area to the existing selection."})]}),Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(dn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:d.Subtract})}),Object(V.jsx)(te.a,{primary:"Subtract",secondary:"Subtract area from the existing selection."})]}),Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(dn.a,{disableRipple:!0,edge:"start",tabIndex:-1,value:d.Intersect})}),Object(V.jsx)(te.a,{primary:"Intersect",secondary:"Constrain the boundary of the new selection to the existing selection."})]})]})}),Object(V.jsx)(Jt.a,{}),Object(V.jsx)(K.a,{children:Object(V.jsxs)(ee.a,{button:!0,onClick:function(){e(X.actions.setInvertMode({invertMode:!n}))},dense:!0,children:[Object(V.jsx)(ge.a,{children:Object(V.jsx)(fn.a,{children:Object(V.jsx)(mn,{})})}),Object(V.jsx)(te.a,{primary:"Invert selection"})]})})]})},xn=function(e){var t=e.children,n=e.name,i=e.onClick,r=e.selected;return Object(V.jsx)(z.a,{"aria-label":n,title:n,children:Object(V.jsx)(ee.a,{button:!0,onClick:i,selected:r,children:Object(V.jsx)(ge.a,{children:Object(V.jsx)(fn.a,{fontSize:"small",children:t})})})})},yn=Object(L.a)((function(e){return{drawer:{flexShrink:0,whiteSpace:"nowrap",width:56},paper:{width:56},toolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}}));function kn(){return(kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function wn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Cn=a.createElement("g",{id:"Color-adjustment",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},a.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),a.createElement("path",{d:"M8.25100003,21.5020001 C4.80400002,21.5020001 2.00000001,18.6980001 2.00000001,15.2510001 C2.00000001,11.804 4.80400002,9.00000004 8.25100003,9.00000004 C11.698,9.00000004 14.5020001,11.804 14.5020001,15.2510001 C14.5020001,18.6980001 11.698,21.5020001 8.25100003,21.5020001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.7490001,21.5020001 C12.3020001,21.5020001 9.49800004,18.6980001 9.49800004,15.2510001 C9.49800004,11.804 12.3020001,9.00000004 15.7490001,9.00000004 C19.1960001,9.00000004 22.0000001,11.804 22.0000001,15.2510001 C22.0000001,18.6980001 19.1960001,21.5020001 15.7490001,21.5020001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.0100001,15.0000001 C8.56300004,15.0000001 5.75900002,12.1960001 5.75900002,8.74900004 C5.75900002,5.30200002 8.56300004,2.49800001 12.0100001,2.49800001 C15.4570001,2.49800001 18.2610001,5.30200002 18.2610001,8.74900004 C18.2610001,12.1960001 15.4570001,15.0000001 12.0100001,15.0000001 Z",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function Mn(e,t){var n=e.title,i=e.titleId,r=wn(e,["title","titleId"]);return a.createElement("svg",kn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Color adjustment"):n?a.createElement("title",{id:i},n):null,Cn)}var Sn=a.forwardRef(Mn);n.p;function In(){return(In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function En(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Bn=a.createElement("g",{id:"Color-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.000000, 2.000000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M5.25800002,14.4180001 L1.51600001,10.676 C0.689000003,9.84900004 0.689000003,8.50900004 1.51600001,7.68200003 L7.15000003,2.04800001 L13.8860001,8.78400004 L8.25200003,14.4180001 C7.42500003,15.2440001 6.08400003,15.2440001 5.25800002,14.4180001 Z"}),a.createElement("path",{d:"M16.8830001,11.774 C16.8830001,11.774 14.7660001,14.0710001 14.7660001,15.4790001 C14.7660001,16.6430001 15.7190001,17.5960001 16.8830001,17.5960001 C18.0470001,17.5960001 19.0000001,16.6430001 19.0000001,15.4780001 C19.0000001,14.0710001 16.8830001,11.774 16.8830001,11.774 L16.8830001,11.774 Z"}),a.createElement("line",{x1:7.15000003,y1:2.05000001,x2:6.06000003,y2:.940000004}),a.createElement("line",{x1:13.8900001,y1:8.78000004,x2:.930000004,y2:8.78000004}),a.createElement("line",{x1:1.42000001,y1:19.4400001,x2:10,y2:19.4400001})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Pn(e,t){var n=e.title,i=e.titleId,r=En(e,["title","titleId"]);return a.createElement("svg",In({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Color selection"):n?a.createElement("title",{id:i},n):null,Bn)}var Ln=a.forwardRef(Pn);n.p;function An(){return(An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _n=a.createElement("g",{id:"Elliptical-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M18.3640001,5.63604002 C21.8787201,9.15076004 21.8787201,14.8492401 18.3640001,18.3639401 C14.8492801,21.8786601 9.15080004,21.8786601 5.63610002,18.3639401 C2.12138001,14.8492201 2.12138001,9.15074004 5.63610002,5.63604002 C9.15082004,2.12132001 14.8493001,2.12132001 18.3640001,5.63604002",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Wn(e,t){var n=e.title,i=e.titleId,r=Dn(e,["title","titleId"]);return a.createElement("svg",An({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Elliptical selection"):n?a.createElement("title",{id:i},n):null,_n)}var Rn=a.forwardRef(Wn);n.p;function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Fn=a.createElement("g",{id:"Hand",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.005000, -0.005000)"},a.createElement("polygon",{id:"Path",points:"0 0 24.01 0 24.01 24.01 0 24.01"}),a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.005000, 3.005000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M0.876688223,7.82337055 C1.82416266,7.02907695 3.20659866,7.09971911 4.07146412,7.98533063 L5.53482321,9.47915396 L5.53482321,3.45217126 C5.53482321,1.10030408 7.78886826,-0.560648269 9.97210561,0.183678925 L14.6976765,1.79294189 C16.0750548,2.26159234 17.0039844,3.57967175 17.0039844,5.06143422 L17.0039844,12.1222047 C17.0039844,15.4044809 14.3992726,18.0664844 11.1876378,18.0664844 L8.44636831,18.0664844 C6.61379765,18.0664844 4.88912444,17.1843188 3.78991922,15.6853265 L0.478816396,11.165951 C-0.284895203,10.1218254 -0.109561856,8.64867779 0.876688223,7.82337055 L0.876688223,7.82337055 Z"}))));function Tn(e,t){var n=e.title,i=e.titleId,r=Nn(e,["title","titleId"]);return a.createElement("svg",zn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Hand"):n?a.createElement("title",{id:i},n):null,Fn)}var Zn=a.forwardRef(Tn);n.p;function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Un(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Hn=a.createElement("g",{id:"Lasso-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",id:"Path",stroke:"#BABABA"},a.createElement("path",{d:"M18.9200215,5.20050274 C22.7422808,7.79423331 22.7422808,11.9995035 18.9200215,14.593244 C15.0977622,17.1869746 8.90062147,17.1869746 5.07841219,14.593244 C1.25615292,11.9995135 1.25615292,7.79424331 5.07841219,5.20050274 C8.90067146,2.60677217 15.0978122,2.60677217 18.9200215,5.20050274",strokeWidth:1.49992515,transform:"translate(11.999217, 9.896873) rotate(-14.928464) translate(-11.999217, -9.896873) "}),a.createElement("path",{d:"M13.7110001,16.3150001 C9.54400004,17.4260001 4.30200002,16.4030001 4.30200002,12.9560001",strokeWidth:1.5}),a.createElement("path",{d:"M10.048,14.1050001 C10.048,16.3230001 8.89900004,19.8510001 4.30200002,21.0000001",strokeWidth:1.5}),a.createElement("path",{d:"M4.30200002,12.9560001 C4.30200002,9.50900004 10.048,9.50900004 10.048,14.1050001",strokeWidth:1.5})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Yn(e,t){var n=e.title,i=e.titleId,r=Un(e,["title","titleId"]);return a.createElement("svg",Gn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Lasso selection"):n?a.createElement("title",{id:i},n):null,Hn)}var Xn=a.forwardRef(Yn);n.p;function Qn(){return(Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Vn=a.createElement("g",{id:"Magnetic-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(2.995000, 2.995000)",stroke:"#BABABA",strokeWidth:1.5},a.createElement("line",{x1:15.1525604,y1:13.35081,x2:11.8391804,y2:10.0364296,id:"Path"}),a.createElement("line",{x1:7.97357042,y1:6.17081958,x2:4.65919,y2:2.85743958,id:"Path"}),a.createElement("path",{d:"M8.75389542,0.324384583 L10.505625,2.07611417 C10.9368635,2.50774241 10.9368635,3.20713676 10.505625,3.638765 L5.487535,8.65585458 C4.41981785,9.72359699 4.41981785,11.4547226 5.487535,12.522465 C6.55527738,13.5901821 8.28640301,13.5901821 9.35414542,12.522465 L14.371235,7.504375 C14.8028633,7.07313649 15.5022576,7.07313649 15.9338858,7.504375 L17.6856154,9.25610458 C17.8936381,9.46269483 18.0106252,9.74375249 18.0106252,10.0369298 C18.0106252,10.3301071 17.8936381,10.6111648 17.6856154,10.817755 L12.6675254,15.835845 C9.76959655,18.7328702 5.07208391,18.7328702 2.174155,15.835845 C-0.722870151,12.9379161 -0.722870151,8.24040345 2.174155,5.34247458 L7.192245,0.324384583 C7.39883524,0.116361933 7.6798929,-0.000625150988 7.97307021,-0.000625150988 C8.26624751,-0.000625150988 8.54730517,0.116361933 8.75389542,0.324384583 Z",id:"Path"})),a.createElement("polygon",{id:"Path",points:"-0.005 -0.005 24.005 -0.005 24.005 24.005 -0.005 24.005"}));function Jn(e,t){var n=e.title,i=e.titleId,r=qn(e,["title","titleId"]);return a.createElement("svg",Qn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Magnetic selection"):n?a.createElement("title",{id:i},n):null,Vn)}var $n=a.forwardRef(Jn);n.p;function Kn(){return(Kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ei(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ti=a.createElement("g",{id:"Object-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{transform:"translate(2.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("path",{d:"M16.1970001,12.9320001 L16.1970001,12.9320001 L18.1730001,14.9080001 C18.6090001,15.3440001 18.6090001,16.0520001 18.1730001,16.4880001 L16.9870001,17.6740001 C16.5510001,18.1100001 15.8430001,18.1100001 15.4070001,17.6740001 L13.4310001,15.6980001 L11.9420001,17.1870001 C11.6480001,17.4810001 11.1480001,17.3630001 11.0170001,16.9690001 L8.14500004,8.35200005 C7.99900004,7.91500005 8.41500004,7.50000004 8.85200005,7.64500004 L17.4690001,10.5170001 C17.8630001,10.6480001 17.9810001,11.1480001 17.6870001,11.4420001 L16.1970001,12.9320001"}),a.createElement("line",{x1:2.78000002,y1:7.93000005,x2:.50000001,y2:7.93000005}),a.createElement("line",{x1:4.44000003,y1:3.94000003,x2:2.82000002,y2:2.32000002}),a.createElement("line",{x1:4.40000003,y1:11.9600001,x2:2.78000002,y2:13.5800001}),a.createElement("line",{x1:8.43000004,y1:2.28000002,x2:8.43000004,y2:1.25000099e-8}),a.createElement("line",{x1:12.4600001,y1:3.90000003,x2:14.0800001,y2:2.28000002})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function ni(e,t){var n=e.title,i=e.titleId,r=ei(e,["title","titleId"]);return a.createElement("svg",Kn({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Object selection"):n?a.createElement("title",{id:i},n):null,ti)}var ii=a.forwardRef(ni);n.p;function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ai(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var oi=a.createElement("g",{id:"Pen-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeWidth:1.5},a.createElement("path",{d:"M14.3500001,1.196 L6.31300003,8.22800003 C5.44200002,8.99000004 5.39800002,10.329 6.21600003,11.147 L7.36500003,12.2960001 C8.18300003,13.1140001 9.52300004,13.0690001 10.284,12.1990001 L17.3160001,4.16200002 C18.0450001,3.33000001 18.0030001,2.07500001 17.2210001,1.29200001 C16.4380001,0.509000002 15.1830001,0.468000002 14.3500001,1.196 Z"}),a.createElement("line",{x1:7.87000003,y1:6.87000003,x2:11.65,y2:10.65}),a.createElement("path",{d:"M0.599000002,17.3230001 L4.30200002,17.3230001 C7.28700003,17.3230001 8.78200004,13.7140001 6.67100003,11.603 C5.11900002,10.051 2.48300001,10.622 1.71300001,12.6770001 L0.191000001,16.7350001 C0.0850000004,17.0200001 0.295000001,17.3230001 0.599000002,17.3230001 Z"})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function si(e,t){var n=e.title,i=e.titleId,r=ai(e,["title","titleId"]);return a.createElement("svg",ri({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Pen selection"):n?a.createElement("title",{id:i},n):null,oi)}var ci=a.forwardRef(si);n.p;function li(){return(li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ui(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var hi=a.createElement("g",{id:"Polygonal-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M10.922,3.63000002 L3.68100002,8.89100004 C3.03800001,9.35800004 2.77000001,10.185 3.01500001,10.941 L5.78100002,19.4540001 C6.02600003,20.2090001 6.73000003,20.7210001 7.52500003,20.7210001 L16.4760001,20.7210001 C17.2700001,20.7210001 17.9740001,20.2100001 18.2200001,19.4540001 L20.9860001,10.941 C21.2310001,10.186 20.9630001,9.35800004 20.3200001,8.89100004 L13.0780001,3.63000002 C12.4350001,3.16300001 11.565,3.16300001 10.922,3.63000002 L10.922,3.63000002 Z",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function di(e,t){var n=e.title,i=e.titleId,r=ui(e,["title","titleId"]);return a.createElement("svg",li({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Polygonal selection"):n?a.createElement("title",{id:i},n):null,hi)}var fi=a.forwardRef(di);n.p;function pi(){return(pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function gi(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var bi=a.createElement("g",{id:"Quick-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("g",{transform:"translate(3.000000, 3.000000)",id:"Path",stroke:"#BABABA",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("polyline",{points:"2.54200002 13.2190001 0.225000013 15.5370001 1.58200002 17.1480001 4.22900003 17.1480001 5.36900003 16.0500001"}),a.createElement("path",{d:"M8.00300005,14.8300001 L7.29600004,15.5370001 C6.51500004,16.3180001 5.24900003,16.3180001 4.46800003,15.5370001 L3.05400003,14.1230001 C2.27300002,13.3420001 2.27300002,12.0760001 3.05400003,11.2950001 L3.76100003,10.5880001"}),a.createElement("path",{d:"M17.9940001,3.60700003 L14.9830001,0.596000015 C14.2380001,-0.148999988 13.0440001,-0.187999988 12.2520001,0.505000015 L3.95500003,7.76500004 C3.08400003,8.52700005 3.04000003,9.86600005 3.85800003,10.6840001 L7.90600005,14.7320001 C8.72400005,15.5500001 10.0640001,15.5050001 10.8250001,14.6350001 L18.0850001,6.33800004 C18.7780001,5.54600004 18.7380001,4.35200003 17.9940001,3.60700003 Z"})),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function ji(e,t){var n=e.title,i=e.titleId,r=gi(e,["title","titleId"]);return a.createElement("svg",pi({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Quick selection"):n?a.createElement("title",{id:i},n):null,bi)}var mi=a.forwardRef(ji);n.p;function vi(){return(vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Oi(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var xi=a.createElement("g",{id:"Rectangular-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},a.createElement("path",{d:"M18.4170001,20.25 L5.58300002,20.25 C4.57000002,20.25 3.75000002,19.4290001 3.75000002,18.4170001 L3.75000002,5.58300002 C3.75000002,4.57000002 4.57100002,3.75000002 5.58300002,3.75000002 L18.4160001,3.75000002 C19.4290001,3.75000002 20.249001,4.57100002 20.249001,5.58300002 L20.249001,18.4160001 C20.25,19.4290001 19.4290001,20.25 18.4170001,20.25 Z",id:"Path",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function yi(e,t){var n=e.title,i=e.titleId,r=Oi(e,["title","titleId"]);return a.createElement("svg",vi({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Rectangular selection"):n?a.createElement("title",{id:i},n):null,xi)}var ki=a.forwardRef(yi);n.p;function wi(){return(wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Ci(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Mi=a.createElement("g",{id:"Zoom",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},a.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),a.createElement("path",{d:"M14.1931001,5.58187002 C16.5249201,7.91369003 16.5249201,11.69432 14.1931001,14.0261401 C11.86128,16.3579601 8.08065003,16.3579601 5.74883002,14.0261401 C3.41701001,11.69432 3.41701001,7.91369003 5.74883002,5.58187002 C8.08065003,3.25005001 11.86128,3.25005001 14.1931001,5.58187002",stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("line",{x1:14.1500001,y1:14.0600001,x2:20.0000001,y2:19.9900001,stroke:"#BABABA",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function Si(e,t){var n=e.title,i=e.titleId,r=Ci(e,["title","titleId"]);return a.createElement("svg",wi({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),void 0===n?a.createElement("title",{id:i},"Zoom"):n?a.createElement("title",{id:i},n):null,Mi)}var Ii=a.forwardRef(Si),Ei=(n.p,function(e){var t=e.handleCollapse,n=yn(),r=Object(M.b)(),a=Object(M.c)(O);return Object(V.jsxs)(fe.a,{anchor:"right",className:n.drawer,classes:{paper:n.paper},variant:"permanent",children:[Object(V.jsx)("div",{className:n.toolbar}),Object(V.jsx)(Jt.a,{}),Object(V.jsxs)(K.a,{children:[Object(V.jsx)(xn,{name:"Color adjustment",onClick:function(){r(X.actions.setOperation({operation:i.ColorAdjustment})),t(!0)},selected:a===i.ColorAdjustment,children:Object(V.jsx)(Sn,{})}),Object(V.jsx)(Jt.a,{}),Object(V.jsx)(xn,{name:"Rectangular selection",onClick:function(){r(X.actions.setOperation({operation:i.RectangularSelection})),t(!0)},selected:a===i.RectangularSelection,children:Object(V.jsx)(ki,{})}),Object(V.jsx)(xn,{name:"Elliptical selection",onClick:function(){r(X.actions.setOperation({operation:i.EllipticalSelection})),t(!0)},selected:a===i.EllipticalSelection,children:Object(V.jsx)(Rn,{})}),Object(V.jsx)(xn,{name:"Pen selection",onClick:function(){r(X.actions.setOperation({operation:i.PenSelection})),t(!0)},selected:a===i.PenSelection,children:Object(V.jsx)(Xn,{})}),Object(V.jsx)(xn,{name:"Lasso selection",onClick:function(){r(X.actions.setOperation({operation:i.LassoSelection})),t(!0)},selected:a===i.LassoSelection,children:Object(V.jsx)(Xn,{})}),Object(V.jsx)(xn,{name:"Polygonal selection",onClick:function(){r(X.actions.setOperation({operation:i.PolygonalSelection})),t(!0)},selected:a===i.PolygonalSelection,children:Object(V.jsx)(fi,{})}),Object(V.jsx)(xn,{name:"Magnetic selection",onClick:function(){r(X.actions.setOperation({operation:i.MagneticSelection})),t(!0)},selected:a===i.MagneticSelection,children:Object(V.jsx)($n,{})}),Object(V.jsx)(xn,{name:"Color selection",onClick:function(){r(X.actions.setOperation({operation:i.ColorSelection})),t(!0)},selected:a===i.ColorSelection,children:Object(V.jsx)(Ln,{})}),Object(V.jsx)(xn,{name:"Quick selection",onClick:function(){r(X.actions.setOperation({operation:i.QuickSelection})),t(!0)},selected:a===i.QuickSelection,children:Object(V.jsx)(mi,{})}),Object(V.jsx)(xn,{name:"Object selection",onClick:function(){r(X.actions.setOperation({operation:i.ObjectSelection})),t(!0)},selected:a===i.ObjectSelection,children:Object(V.jsx)(ii,{})}),Object(V.jsx)(Jt.a,{}),Object(V.jsx)(xn,{name:"Zoom",onClick:function(){r(X.actions.setOperation({operation:i.Zoom})),t(!0)},selected:a===i.Zoom,children:Object(V.jsx)(Ii,{})}),Object(V.jsx)(xn,{name:"Hand",onClick:function(){r(X.actions.setOperation({operation:i.Hand})),t(!0)},selected:a===i.Hand,children:Object(V.jsx)(Zn,{})})]})]})}),Bi=n(833),Pi=function(e){var t=e.handleRevert,n=Object(M.b)(),i=Object(M.c)(C);return Object(V.jsxs)(K.a,{children:[Object(V.jsxs)(ee.a,{dense:!0,children:[Object(V.jsx)(te.a,{primary:"Mode",secondary:"Select the zoom mode."}),Object(V.jsxs)(vn.a,{defaultValue:f.In,name:"zoom-mode",onChange:function(e){var t=parseInt(e.target.value);n(X.actions.setZoomMode({zoomMode:t}))},value:i,children:[Object(V.jsx)(Bi.a,{control:Object(V.jsx)(dn.a,{tabIndex:-1}),label:"Zoom In",value:f.In}),Object(V.jsx)(Bi.a,{control:Object(V.jsx)(dn.a,{tabIndex:-1}),label:"Zoom out",value:f.Out})]})]}),Object(V.jsx)(ee.a,{children:Object(V.jsx)(D.a,{onClick:t,variant:"contained",children:"Actual Size"})})]})},Li=n(49),Ai=n(344),Di=n.n(Ai),_i=n(503),Wi=n.n(_i),Ri=Object(L.a)((function(e){return{content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},stage:{margin:"8px"},toolbar:Object(P.a)({},e.mixins.toolbar),parent:{cursor:"crosshair"}}})),zi=function(e){var t=e.operator,n=Ze();return t.center&&t.radius?Object(V.jsxs)(Li.c,{children:[Object(V.jsx)(Li.b,{dash:[4,2],dashOffset:-n,radiusX:t.radius.x,radiusY:t.radius.y,stroke:"black",strokeWidth:1,x:t.center.x,y:t.center.y}),Object(V.jsx)(Li.b,{dash:[4,2],dashOffset:-n,radiusX:t.radius.x,radiusY:t.radius.y,stroke:"white",strokeWidth:1,x:t.center.x,y:t.center.y})]}):null},Ni=function(e){var t=e.operator,n=Ze();return Object(V.jsxs)(Li.c,{children:[t.origin&&Object(V.jsx)(Li.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(V.jsx)(Li.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(V.jsx)(Li.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(V.jsx)(Li.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]})},Fi=function(e){var t=e.operator,n=Ze();return t.origin?Object(V.jsxs)(Li.c,{children:[Object(V.jsx)(Li.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(V.jsx)(Li.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(V.jsx)(Li.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(V.jsx)(Li.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]}):null},Ti=function(e){var t=e.operator,n=Ze();return t.origin&&t.width&&t.height?Object(V.jsxs)(Li.c,{children:[Object(V.jsx)(Li.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"black",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(V.jsx)(Li.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"white",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(V.jsx)(Li.f,{stroke:"white",points:t.points,strokeWidth:1})]}):null},Zi=function(e){var t=e.operator,n=Ze();return Object(V.jsxs)(Li.c,{children:[t.origin&&Object(V.jsx)(Li.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(V.jsx)(Li.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(V.jsx)(Li.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(V.jsx)(Li.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]})},Gi=function(e){var t=e.operator,n=Ze();return t.origin&&t.width&&t.height?Object(V.jsxs)(Li.c,{children:[Object(V.jsx)(Li.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"black",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(V.jsx)(Li.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"white",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y})]}):null},Ui=function(e){var t=e.operator,n=Object(a.useState)(),i=Object(u.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){var e=new Image;e.src=t.overlayData,o(e)}),[t.overlayData]),t.overlayData&&t.offset?Object(V.jsx)(Li.c,{children:Object(V.jsx)(Li.d,{image:r,x:t.offset.x,y:t.offset.y})}):null},Hi=function(e){var t=e.operator,n=Object(a.useState)(),i=Object(u.a)(n,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){if(t.currentMask){var e=new Image;e.src=t.currentMask.toDataURL(),o(e)}}),[t.currentMask]),t.currentMask?Object(V.jsx)(Li.c,{children:Object(V.jsx)(Li.d,{image:r})}):null},Yi=function(e){var t=e.operator;return Object(V.jsx)(Li.c,{children:Object(V.jsx)(Li.f,{points:t.buffer,stroke:"red",strokeWidth:t.brushSize})})},Xi=function(e){var t=e.operation,n=e.operator;if(!t||!n)return Object(V.jsx)(o.a.Fragment,{});switch(t){case i.ColorSelection:return Object(V.jsx)(Ui,{operator:n});case i.EllipticalSelection:return Object(V.jsx)(zi,{operator:n});case i.LassoSelection:return Object(V.jsx)(Ni,{operator:n});case i.MagneticSelection:return Object(V.jsx)(Fi,{operator:n});case i.ObjectSelection:return Object(V.jsx)(Ti,{operator:n});case i.PenSelection:return Object(V.jsx)(Yi,{operator:n});case i.PolygonalSelection:return Object(V.jsx)(Zi,{operator:n});case i.RectangularSelection:return Object(V.jsx)(Gi,{operator:n});case i.QuickSelection:return Object(V.jsx)(Hi,{operator:n});default:return Object(V.jsx)(o.a.Fragment,{})}};function Qi(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],r=n[1];function o(t){t.key===e&&r(!0)}var s=function(t){t.key===e&&r(!1)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}}),[]),i}var qi=function(e){return e.state.categories.filter((function(e){return e.visible})).map((function(e){return e.id}))},Vi=function(e){return e.state.penSelectionBrushSize},Ji=function(e){var t=e.points,n=Ze();return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsx)(Li.f,{dash:[4,2],dashOffset:-n,points:t,stroke:"black",strokeWidth:1}),Object(V.jsx)(Li.f,{dash:[4,2],dashOffset:-n,points:t,stroke:"white",strokeWidth:1})]})},$i=function(e){var t=e.category,n=e.src,r=Wi()(n,"Anonymous"),s=Object(u.a)(r,1)[0],c=Object(a.useRef)(null),l=Object(a.useRef)(null),h=Object(a.useRef)(null),f=Object(a.useRef)(null),g=Object(a.useRef)(null),b=Object(a.useRef)(null),m=Ri(),y=Object(M.c)(O),w=Object(M.c)(Vi),C=Object(M.c)(k),S=Object(M.c)(v),I=function(e){var t=Object(M.c)(O),n=Object(a.useState)(),r=Object(u.a)(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){Ge.a.load(e).then((function(e){switch(t){case i.ColorSelection:return void s(new jt(e));case i.EllipticalSelection:return void s(new mt(e));case i.LassoSelection:return void s(new vt(e));case i.MagneticSelection:return void s(new Pt(e));case i.ObjectSelection:return void Wt.compile(e).then((function(e){s(e)}));case i.PenSelection:return void Nt.setup(e,8).then((function(e){s(e)}));case i.PolygonalSelection:return void s(new Rt(e));case i.QuickSelection:var n=zt.setup(e);return void s(n);case i.RectangularSelection:return void s(new Dt(e))}}))}),[t,e]),[o]}(n),E=Object(u.a)(I,1)[0],B=Object(a.useState)(),L=Object(u.a)(B,2),A=L[0],D=L[1],_=Object(a.useState)(!1),W=Object(u.a)(_,2),R=W[0],z=W[1],N=Object(a.useState)(!1),F=Object(u.a)(N,2),T=F[0],Z=F[1],G=Object(a.useReducer)((function(e){return e+1}),0),H=Object(u.a)(G,2)[1],Y=Object(M.b)(),Q=Object(M.c)(j),q=Object(M.c)(p),J=Object(M.c)(qi),$=Qi("Enter"),K=Qi("Escape"),ee=Qi("Delete"),te=Qi("Backspace");Object(a.useEffect)((function(){if(A&&E&&Q){var e=Q.filter((function(e){return e.id===A}))[0];if(e&&e.mask&&e.contour){var t=E.invert(e.mask,!0),n=E.invertContour(e.contour),i=E.computeBoundingBoxFromContours(n),r=Q.filter((function(e){return e.id===A}))[0];if(b&&b.current){b.current=Object(P.a)(Object(P.a)({},r),{},{boundingBox:i,contour:n,mask:t}),Y(X.actions.deleteImageInstance({id:A}));var a=Q.filter((function(e){return e.id!==A}));Y(X.actions.setImageInstances({instances:[].concat(Object(U.a)(a),[b.current])}))}}}}),[S]),Object(a.useEffect)((function(){if(C!==d.New&&(Z(!1),R&&E&&A&&Q)){var e,t,n=b.current;if(n){if(C===d.Add){var i=E.add(n.mask),r=Object(u.a)(i,2);e=r[0],t=r[1]}else if(C===d.Subtract){var a=E.subtract(n.mask),o=Object(u.a)(a,2);e=o[0],t=o[1]}else if(C===d.Intersect){var s=E.intersect(n.mask),c=Object(u.a)(s,2);e=c[0],t=c[1]}E.mask=e,E.contour=t,t&&(E.boundingBox=E.computeBoundingBoxFromContours(t))}}}),[C,R]),Object(a.useEffect)((function(){var e;C!==d.New&&T&&A&&(null===(e=h.current)||void 0===e||e.detach(),Y(X.actions.deleteImageInstance({id:A})))}),[T]),Object(a.useEffect)((function(){if(A){var e=null===Q||void 0===Q?void 0:Q.filter((function(e){return e.id!==A})),n=Object(P.a)(Object(P.a)({},null===Q||void 0===Q?void 0:Q.filter((function(e){return e.id===A}))[0]),{},{categoryId:t.id});Y(X.actions.setImageInstances({instances:[].concat(Object(U.a)(e),[n])}))}}),[t]),Object(a.useEffect)((function(){E&&(E.selected&&z(E.selected),C!==d.New&&E.selecting&&Z(E.selecting))})),Object(a.useEffect)((function(){y===i.PenSelection&&(E.brushSize=w)}),[w]),Object(a.useEffect)((function(){E&&E.contour&&(g.current=new Di.a.Line({points:E.contour}))})),Object(a.useEffect)((function(){if(R&&h&&h.current&&g&&g.current&&E&&E.contour){h.current.nodes([g.current]);var e=h.current.getLayer();e&&(e.batchDraw(),E&&(E.select(t),E.selection&&(b.current=E.selection)))}}),[R]);var ne=Object(a.useMemo)((function(){var e=x.throttle((function(){if(E&&l&&l.current){var e=l.current.getPointerPosition();e&&(E.onMouseMove(e),H())}}),5);return function(){return e()}}),[E]),ie=Object(a.useMemo)((function(){var e=x.throttle((function(){if(E&&l&&l.current){var e=l.current.getPointerPosition();e&&(E.onMouseUp(e),H())}}),10);return function(){return e()}}),[E]);Object(a.useEffect)((function(){var e,t,n;$&&Q&&E&&b&&b.current&&(A!==b.current.id&&Y(X.actions.setImageInstances({instances:[].concat(Object(U.a)(Q),[b.current])})),E.deselect(),null===(e=h.current)||void 0===e||e.detach(),null===(t=h.current)||void 0===t||null===(n=t.getLayer())||void 0===n||n.batchDraw(),z(!1),g.current=null,b.current=null)}),[$]),Object(a.useEffect)((function(){var e;R&&K&&E&&(E.deselect(),null===(e=h.current)||void 0===e||e.detach())}),[K]),Object(a.useEffect)((function(){var e;A&&((te||K||ee)&&(Y(X.actions.deleteImageInstance({id:A})),null===(e=h.current)||void 0===e||e.detach(),b.current=null))}),[te,ee,K]),Object(a.useEffect)((function(){if(l&&l.current){var e=document.querySelector(".konvajs-content");e&&(e.style.marginLeft="auto",e.style.marginRight="auto")}}),[l.current]);var re=Object(a.useState)(1),ae=Object(u.a)(re,2),oe=ae[0],se=ae[1],ce=Object(a.useState)(0),le=Object(u.a)(ce,2),ue=le[0],he=le[1],de=Object(a.useState)(0),fe=Object(u.a)(de,2),pe=fe[0],ge=fe[1];return Object(V.jsx)(Li.h,{className:m.stage,globalCompositeOperation:"destination-over",height:512,ref:l,onWheel:function(e){if(y===i.Zoom){se(e.evt.deltaY>0?1.01*oe:oe/1.01);var t=e.target.getStage();if(t){var n=t.getPointerPosition();if(n){var r=n.x/oe-t.x()/oe,a=n.y/oe-t.y()/oe;he(-(r-n.x/oe)*oe),ge(-(a-n.y/oe)*oe)}}}},scale:{x:oe,y:oe},width:512,x:ue,y:pe,children:Object(V.jsxs)(Li.e,{onMouseDown:function(e){return function(e){if(0===e.evt.button){if(!E||!l||!l.current)return;var t=l.current.getPointerPosition();if(!t)return;E.onMouseDown(t),H()}}(e)},onMouseMove:ne,onMouseUp:ie,children:[Object(V.jsx)(Li.d,{ref:c,image:s,position:{x:0,y:0},width:512,height:512}),!R&&Object(V.jsx)(Xi,{operation:y,operator:E}),R&&E&&E.contour&&Object(V.jsx)(Ji,{points:E.contour}),C!==d.New&&E&&E.selecting&&!E.selected&&b&&b.current&&Object(V.jsx)(Ji,{points:b.current.contour}),Q&&Q.map((function(e){var t;return J.includes(e.categoryId)?Object(V.jsx)(Li.f,{closed:!0,points:e.contour,fill:null===(t=x.find(q,(function(t){return t.id===e.categoryId})))||void 0===t?void 0:t.color,onContextMenu:function(t){return function(e,t){var n;e.evt.preventDefault(),E&&(E.selecting||Q&&(E.deselect(),b.current=Q.filter((function(e){return e.id===t.id}))[0],D(t.id),Y(X.actions.setSeletedCategory({selectedCategory:t.categoryId})),f.current=e.target,null===(n=h.current)||void 0===n||n.nodes([f.current])))}(t,e)},opacity:.5,ref:f,strokeWidth:1},e.id):Object(V.jsx)(o.a.Fragment,{})})),Object(V.jsx)(Li.i,{ref:h})]})})},Ki=function(e){var t=e.category,n=Object(M.c)(m),i=Ri();return Object(V.jsxs)("main",{className:i.content,children:[Object(V.jsx)("div",{className:i.toolbar}),Object(V.jsx)("div",{className:i.parent,children:Object(V.jsx)($i,{category:t,src:n.src})})]})},er=n(834),tr=Object(L.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(P.a)({},e.mixins.toolbar),settingsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(P.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(P.a)(Object(P.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),nr=n(845),ir=function(){var e=Object(M.b)(),t=Object(M.c)(Vi);return Object(V.jsxs)(o.a.Fragment,{children:[Object(V.jsx)(On,{}),Object(V.jsx)(Jt.a,{}),Object(V.jsx)(K.a,{children:Object(V.jsx)(ee.a,{dense:!0,children:Object(V.jsx)(te.a,{primary:"Brush size",secondary:Object(V.jsx)(nr.a,{"aria-labelledby":"pen-selection-brush-size",onChange:function(t,n){var i={penSelectionBrushSize:n};e(X.actions.setPenSelectionBrushSize(i))},value:t})})})})]})},rr=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],s=n[1],c=[{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(Sn,{}),method:i.ColorAdjustment,name:"Color adjustment",options:Object(V.jsx)(o.a.Fragment,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(ki,{}),method:i.RectangularSelection,name:"Rectangular selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(Rn,{}),method:i.EllipticalSelection,name:"Elliptical selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(ci,{}),method:i.PenSelection,name:"Pen selection",options:Object(V.jsx)(ir,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(Xn,{}),method:i.LassoSelection,name:"Lasso selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(fi,{}),method:i.PolygonalSelection,name:"Polygonal selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)($n,{}),method:i.MagneticSelection,name:"Magnetic selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(Ln,{}),method:i.ColorSelection,name:"Color selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(mi,{}),method:i.QuickSelection,name:"Quick selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(ii,{}),method:i.ObjectSelection,name:"Object selection",options:Object(V.jsx)(On,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(V.jsx)(Zn,{}),method:i.Hand,name:"Hand",options:Object(V.jsx)(o.a.Fragment,{})},{description:"Description of zoom here.",icon:Object(V.jsx)(Ii,{}),method:i.Zoom,name:"Zoom",options:Object(V.jsx)(Pi,{handleRevert:function(){s(!r)}})}],l=Object(M.b)();Object(a.useEffect)((function(){e.image&&l(X.actions.setImage({image:e.image}))}),[l,e.image]);var d=Object(M.c)(m),f=Object(M.c)(O),p=tr(),g=(Object(M.c)(w),Object(M.c)(y)),b=o.a.useState(!1),j=Object(u.a)(b,2),v=j[0],x=j[1],k=function(e){x(e)};return Object(V.jsx)(er.a,{theme:un,children:Object(V.jsxs)("div",{className:p.root,children:[Object(V.jsx)(h.a,{}),Object(V.jsx)(de,{}),Object(V.jsx)(an,{activeCategory:g,onCategoryClick:function(e,t){l(X.actions.setSeletedCategory({selectedCategory:t.id}))}}),d&&Object(V.jsx)(Ki,{category:g}),Object(V.jsx)(Oe.a,{in:v,timeout:"auto",unmountOnExit:!0,children:Object(V.jsx)(hn,{handleCollapse:k,name:c[c.findIndex((function(e){return e.method===f}))].name,settings:c[c.findIndex((function(e){return e.method===f}))].options})}),Object(V.jsx)(Ei,{handleCollapse:k})]})})},ar=n(107),or={state:X.reducer},sr=Object(ar.c)(or),cr=n(504),lr={devTools:!0,enhancers:[],middleware:[n.n(cr).a],preloadedState:{},reducer:sr},ur=Object(H.a)(lr);c.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(M.a,{store:ur,children:Object(V.jsx)(rr,{})})}),document.getElementById("root")),l()}},[[775,1,2]]]);
//# sourceMappingURL=main.a03a522c.chunk.js.map