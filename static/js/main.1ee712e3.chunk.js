(this["webpackJsonp@piximi/image-viewer"]=this["webpackJsonp@piximi/image-viewer"]||[]).push([[0],{755:function(e,t){},756:function(e,t){},764:function(e,t){},767:function(e,t){},768:function(e,t){},769:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(63),o=n.n(a),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,838)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))},c=n(5),l=n(828);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var h=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},i.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),i.createElement("path",{d:"M8.25100003,21.5020001 C4.80400002,21.5020001 2.00000001,18.6980001 2.00000001,15.2510001 C2.00000001,11.804 4.80400002,9.00000004 8.25100003,9.00000004 C11.698,9.00000004 14.5020001,11.804 14.5020001,15.2510001 C14.5020001,18.6980001 11.698,21.5020001 8.25100003,21.5020001 Z",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M15.7490001,21.5020001 C12.3020001,21.5020001 9.49800004,18.6980001 9.49800004,15.2510001 C9.49800004,11.804 12.3020001,9.00000004 15.7490001,9.00000004 C19.1960001,9.00000004 22.0000001,11.804 22.0000001,15.2510001 C22.0000001,18.6980001 19.1960001,21.5020001 15.7490001,21.5020001 Z",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M12.0100001,15.0000001 C8.56300004,15.0000001 5.75900002,12.1960001 5.75900002,8.74900004 C5.75900002,5.30200002 8.56300004,2.49800001 12.0100001,2.49800001 C15.4570001,2.49800001 18.2610001,5.30200002 18.2610001,8.74900004 C18.2610001,12.1960001 15.4570001,15.0000001 12.0100001,15.0000001 Z",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function f(e,t){var n=e.title,r=e.titleId,a=u(e,["title","titleId"]);return i.createElement("svg",d({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,h)}var p=i.forwardRef(f);n.p;function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var j=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.000000, 2.000000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("path",{d:"M11.574,1.145 C11.062,1.056 10.538,1 10,1 C9.46200004,1 8.93800004,1.056 8.42600004,1.145"}),i.createElement("path",{d:"M18.5180001,6.97300003 C18.8710001,7.94200003 19.0730001,8.98300004 19.0730001,10.073"}),i.createElement("path",{d:"M16.9480001,4.24300002 C16.2700001,3.43600001 15.4510001,2.75300001 14.5330001,2.22200001"}),i.createElement("path",{d:"M5.46700002,2.22200001 C4.54900002,2.75300001 3.73100002,3.43600001 3.05200001,4.24300002"}),i.createElement("path",{d:"M0.927000004,10.073 C0.927000004,8.98200004 1.129,7.94100003 1.48200001,6.97300003"}),i.createElement("path",{d:"M5.46700002,17.9240001 C6.36700003,18.4450001 7.36400003,18.8140001 8.42600004,19.0000001"}),i.createElement("path",{d:"M1.48200001,13.1730001 C1.84800001,14.1770001 2.37800001,15.1000001 3.05200001,15.9030001"}),i.createElement("path",{d:"M11.574,19.0000001 C12.6360001,18.8140001 13.6320001,18.4450001 14.5330001,17.9240001"}),i.createElement("path",{d:"M16.9480001,15.9030001 C17.6220001,15.1000001 18.1520001,14.1770001 18.5180001,13.1730001"})),i.createElement("rect",{id:"Rectangle",x:0,y:0,width:24.0000001,height:24.0000001})));function m(e,t){var n=e.title,r=e.titleId,a=b(e,["title","titleId"]);return i.createElement("svg",g({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Untitled 6"):n?i.createElement("title",{id:r},n):null,j)}var v=i.forwardRef(m);n.p;function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var y=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Design,-Tools/Lasso-Tool",transform:"translate(1.000000, 1.000000)"},i.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",id:"Path",stroke:"#323232"},i.createElement("path",{d:"M18.9200215,5.20050274 C22.7422808,7.79423331 22.7422808,11.9995035 18.9200215,14.593244 C15.0977622,17.1869746 8.90062147,17.1869746 5.07841219,14.593244 C1.25615292,11.9995135 1.25615292,7.79424331 5.07841219,5.20050274 C8.90067146,2.60677217 15.0978122,2.60677217 18.9200215,5.20050274",strokeWidth:1.49992515,transform:"translate(11.999217, 9.896873) rotate(-14.928464) translate(-11.999217, -9.896873) "}),i.createElement("path",{d:"M13.7110001,16.3150001 C9.54400004,17.4260001 4.30200002,16.4030001 4.30200002,12.9560001",strokeWidth:1.5}),i.createElement("path",{d:"M10.048,14.1050001 C10.048,16.3230001 8.89900004,19.8510001 4.30200002,21.0000001",strokeWidth:1.5}),i.createElement("path",{d:"M4.30200002,12.9560001 C4.30200002,9.50900004 10.048,9.50900004 10.048,14.1050001",strokeWidth:1.5})),i.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}))));function w(e,t){var n=e.title,r=e.titleId,a=x(e,["title","titleId"]);return i.createElement("svg",O({width:"26px",height:"25px",viewBox:"0 0 26 25",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,y)}var k=i.forwardRef(w);n.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var I=i.createElement("g",{id:"Color-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.000000, 2.000000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("path",{d:"M5.25800002,14.4180001 L1.51600001,10.676 C0.689000003,9.84900004 0.689000003,8.50900004 1.51600001,7.68200003 L7.15000003,2.04800001 L13.8860001,8.78400004 L8.25200003,14.4180001 C7.42500003,15.2440001 6.08400003,15.2440001 5.25800002,14.4180001 Z"}),i.createElement("path",{d:"M16.8830001,11.774 C16.8830001,11.774 14.7660001,14.0710001 14.7660001,15.4790001 C14.7660001,16.6430001 15.7190001,17.5960001 16.8830001,17.5960001 C18.0470001,17.5960001 19.0000001,16.6430001 19.0000001,15.4780001 C19.0000001,14.0710001 16.8830001,11.774 16.8830001,11.774 L16.8830001,11.774 Z"}),i.createElement("line",{x1:7.15000003,y1:2.05000001,x2:6.06000003,y2:.940000004}),i.createElement("line",{x1:13.8900001,y1:8.78000004,x2:.930000004,y2:8.78000004}),i.createElement("line",{x1:1.42000001,y1:19.4400001,x2:10,y2:19.4400001})),i.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function S(e,t){var n=e.title,r=e.titleId,a=M(e,["title","titleId"]);return i.createElement("svg",C({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Color selection"):n?i.createElement("title",{id:r},n):null,I)}var E=i.forwardRef(S);n.p;function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var D=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},i.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),i.createElement("path",{d:"M14.1931001,5.58187002 C16.5249201,7.91369003 16.5249201,11.69432 14.1931001,14.0261401 C11.86128,16.3579601 8.08065003,16.3579601 5.74883002,14.0261401 C3.41701001,11.69432 3.41701001,7.91369003 5.74883002,5.58187002 C8.08065003,3.25005001 11.86128,3.25005001 14.1931001,5.58187002",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:14.1500001,y1:14.0600001,x2:20.0000001,y2:19.9900001,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function A(e,t){var n=e.title,r=e.titleId,a=P(e,["title","titleId"]);return i.createElement("svg",L({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,D)}var B=i.forwardRef(A);n.p;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var z=i.createElement("g",{id:"Hand",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group",transform:"translate(-0.005000, -0.005000)"},i.createElement("polygon",{id:"Path",points:"0 0 24.01 0 24.01 24.01 0 24.01"}),i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.005000, 3.005000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("path",{d:"M0.876688223,7.82337055 C1.82416266,7.02907695 3.20659866,7.09971911 4.07146412,7.98533063 L5.53482321,9.47915396 L5.53482321,3.45217126 C5.53482321,1.10030408 7.78886826,-0.560648269 9.97210561,0.183678925 L14.6976765,1.79294189 C16.0750548,2.26159234 17.0039844,3.57967175 17.0039844,5.06143422 L17.0039844,12.1222047 C17.0039844,15.4044809 14.3992726,18.0664844 11.1876378,18.0664844 L8.44636831,18.0664844 C6.61379765,18.0664844 4.88912444,17.1843188 3.78991922,15.6853265 L0.478816396,11.165951 C-0.284895203,10.1218254 -0.109561856,8.64867779 0.876688223,7.82337055 L0.876688223,7.82337055 Z"}))));function V(e,t){var n=e.title,r=e.titleId,a=R(e,["title","titleId"]);return i.createElement("svg",W({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Hand"):n?i.createElement("title",{id:r},n):null,z)}var T=i.forwardRef(V);n.p;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var H=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(3.000000, 3.000000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("path",{d:"M2.06200001,15.9380001 L2.06200001,15.9380001 C4.81100002,18.6870001 9.26800004,18.6870001 12.0170001,15.9380001 L17.7060001,10.249 C18.0990001,9.85600004 18.0990001,9.22000004 17.7060001,8.82700004 L16.2840001,7.40500003 C15.8910001,7.01200003 15.2550001,7.01200003 14.8620001,7.40500003 L9.15500004,13.1120001 C7.97000003,14.2970001 6.04500003,14.2890001 4.87000002,13.0930001 L4.87000002,13.0930001 C3.70900002,11.912 3.71800002,10.016 4.88900002,8.84500004 L10.596,3.13800001 C10.989,2.74500001 10.989,2.10900001 10.596,1.71600001 L9.17400004,0.294000001 C8.78100004,-0.0990000004 8.14500003,-0.0990000004 7.75200003,0.294000001 L2.06200001,5.98300002 C-0.687000003,8.73200004 -0.687000003,13.1890001 2.06200001,15.9380001 L2.06200001,15.9380001 Z"}),i.createElement("line",{x1:15.5700001,y1:12.3800001,x2:12.7300001,y2:9.54000004}),i.createElement("line",{x1:8.46000004,y1:5.27000002,x2:5.62000002,y2:2.43000001})),i.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function G(e,t){var n=e.title,r=e.titleId,a=F(e,["title","titleId"]);return i.createElement("svg",N({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,H)}var U=i.forwardRef(G);n.p;function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var q=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},i.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),i.createElement("polyline",{stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",points:"5.54200002 16.2190001 3.22500001 18.5370001 4.58200002 20.1480001 7.22900003 20.1480001 8.36900003 19.0500001"}),i.createElement("path",{d:"M11.003,17.8300001 L10.296,18.5370001 C9.51500004,19.3180001 8.24900003,19.3180001 7.46800003,18.5370001 L6.05400003,17.1230001 C5.27300002,16.3420001 5.27300002,15.0760001 6.05400003,14.2950001 L6.76100003,13.5880001",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("path",{d:"M20.9940001,6.60700003 L17.9830001,3.59600001 C17.2380001,2.85100001 16.0440001,2.81200001 15.2520001,3.50500001 L6.95500003,10.765 C6.08400003,11.527 6.04000003,12.8660001 6.85800003,13.6840001 L10.906,17.7320001 C11.724,18.5500001 13.0640001,18.5050001 13.8250001,17.6350001 L21.0850001,9.33800004 C21.7780001,8.54600004 21.7380001,7.35200003 20.9940001,6.60700003 Z",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function Y(e,t){var n=e.title,r=e.titleId,a=_(e,["title","titleId"]);return i.createElement("svg",Z({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,q)}var Q=i.forwardRef(Y);n.p;function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var K=i.createElement("g",{id:"Object-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Path",transform:"translate(-0.000000, -0.000000)"},i.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),i.createElement("path",{d:"M18.1970001,15.9320001 L18.1970001,15.9320001 L20.1730001,17.9080001 C20.6090001,18.3440001 20.6090001,19.0520001 20.1730001,19.4880001 L18.9870001,20.6740001 C18.5510001,21.1100001 17.8430001,21.1100001 17.4070001,20.6740001 L15.4310001,18.6980001 L13.9420001,20.1870001 C13.6480001,20.4810001 13.1480001,20.3630001 13.0170001,19.9690001 L10.145,11.352 C9.99900004,10.915 10.415,10.5 10.852,10.645 L19.4690001,13.5170001 C19.8630001,13.6480001 19.9810001,14.1480001 19.6870001,14.4420001 L18.1970001,15.9320001",stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:4.78000002,y1:10.93,x2:2.50000001,y2:10.93,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:6.44000003,y1:6.94000003,x2:4.82000002,y2:5.32000002,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:6.40000003,y1:14.9600001,x2:4.78000002,y2:16.5800001,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:10.43,y1:5.28000002,x2:10.43,y2:3.00000001,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),i.createElement("line",{x1:14.4600001,y1:6.90000003,x2:16.0800001,y2:5.28000002,stroke:"#323232",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})));function $(e,t){var n=e.title,r=e.titleId,a=J(e,["title","titleId"]);return i.createElement("svg",X({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Object selection"):n?i.createElement("title",{id:r},n):null,K)}var ee=i.forwardRef($);n.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ie=i.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.000000, 2.000000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("line",{x1:8.50000004,y1:19.0000001,x2:11.5,y2:19.0000001}),i.createElement("line",{x1:11.5,y1:1,x2:8.50000004,y2:1}),i.createElement("line",{x1:19.0000001,y1:11.5,x2:19.0000001,y2:8.50000004}),i.createElement("line",{x1:1,y1:8.50000004,x2:1,y2:11.5}),i.createElement("path",{d:"M19.0000001,5 L19.0000001,3 C19.0000001,1.89500001 18.1050001,1 17.0000001,1 L15.0000001,1"}),i.createElement("path",{d:"M1,15.0000001 L1,17.0000001 C1,18.1050001 1.89500001,19.0000001 3,19.0000001 L5,19.0000001"}),i.createElement("path",{d:"M5,1 L3,1 C1.89500001,1 1,1.89500001 1,3 L1,5"}),i.createElement("path",{d:"M15.0000001,19.0000001 L17.0000001,19.0000001 C18.1050001,19.0000001 19.0000001,18.1050001 19.0000001,17.0000001 L19.0000001,15.0000001"})),i.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function re(e,t){var n=e.title,r=e.titleId,a=ne(e,["title","titleId"]);return i.createElement("svg",te({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Group"):n?i.createElement("title",{id:r},n):null,ie)}var ae,oe=i.forwardRef(re);n.p;!function(e){e[e.ColorAdjustment=0]="ColorAdjustment",e[e.ColorSelection=1]="ColorSelection",e[e.EllipticalSelection=2]="EllipticalSelection",e[e.Hand=3]="Hand",e[e.LassoSelection=4]="LassoSelection",e[e.MagneticSelection=5]="MagneticSelection",e[e.ObjectSelection=6]="ObjectSelection",e[e.PolygonalSelection=7]="PolygonalSelection",e[e.QuickSelection=8]="QuickSelection",e[e.RectangularSelection=9]="RectangularSelection",e[e.Zoom=10]="Zoom"}(ae||(ae={}));var se,ce,le,de=function(e){return e.project.categories},ue=n(107),he=function(e){var t=e.project.categories.filter((function(e){return"00000000-0000-0000-0000-000000000000"!==e.id}));return Object(ue.d)(t,"name")},fe=function(e){var t;return null===(t=e.imageViewer.image)||void 0===t?void 0:t.instances},pe=function(e){return e.imageViewer.image},ge=function(e){return e.imageViewer.operation},be=function(e){return e.imageViewer.zoomMode},je=function(e){return e.project.categories.find((function(e){return"00000000-0000-0000-0000-000000000000"===e.id}))},me=n(51),ve=n(59),Oe=n(807),xe=Object(Oe.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(ve.a)({},e.mixins.toolbar),settingsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),ye=n(816),we=n(817),ke=n(227),Ce=n(834),Me=Object(Oe.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},grow:{flexGrow:1},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(ve.a)({},e.mixins.toolbar),settingsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),Ie=n(815),Se=n(298),Ee=n.n(Se),Le=n(456),Pe=n(833),De=Object(Oe.a)((function(e){return{button:{margin:e.spacing(1),textTransform:"none"}}})),Ae=n(7),Be=n.n(Ae),We=n(16),Re=n(810),ze=n(140),Ve={selectedImages:[],selectionMethod:ae.RectangularSelection,tileSize:1},Te=Object(ze.b)({name:"settings",initialState:Ve,reducers:{updateSelectionMethod:function(e,t){e.selectionMethod=t.payload.selectionMethod},updateTileSize:function(e,t){e.tileSize=t.payload.newValue},selectImage:function(e,t){e.selectedImages.push(t.payload.id)},selectOneImage:function(e,t){e.selectedImages=[],e.selectedImages.push(t.payload.id)},selectAllImages:function(e,t){e.selectedImages=[],e.selectedImages=t.payload.ids},deselectImage:function(e,t){e.selectedImages=e.selectedImages.filter((function(e){return e!==t.payload.id}))},deselectImages:function(e,t){e.selectedImages=e.selectedImages.filter((function(e){return!t.payload.ids.includes(e)}))},clearSelectedImages:function(e){e.selectedImages=[]}}}).actions,Ne=(Te.updateTileSize,Te.selectImage,Te.selectOneImage,Te.deselectImage,Te.deselectImages,Te.clearSelectedImages,n(20));!function(e){e.AbsoluteDifference="Absolute difference",e.CategoricalCrossEntropy="Categorical cross-entropy",e.CosineDistance="Cosine distance",e.Hinge="Hinge",e.Huber="Huber",e.Log="Log",e.MeanSquaredError="Mean squared error (MSE)",e.SigmoidCrossEntropy="Sigmoid cross-entropy"}(se||(se={})),function(e){e.BinaryAccuracy="Binary accuracy",e.BinaryCrossEntropy="Binary cros-sentropy",e.CategoricalAccuracy="Categorical accuracy",e.CategoricalCrossEntropy="Categorical cross-entropy",e.CosineProximity="Cosine proximity",e.MeanAbsoluteError="Mean absolute error (MAE)",e.MeanAbsolutePercentageError="Mean absolute percentage error",e.MeanSquaredError="Mean squared error",e.Precision="Precision",e.Recall="Recall",e.SparseCategoricalAccuracy="Sparse categorical accuracy"}(ce||(ce={})),function(e){e.Adadelta="Adadelta",e.Adagrad="Adagrad",e.Adam="Adam",e.Adamax="Adamax",e.Momentum="Momentum",e.RMSProp="RMSProp",e.StochasticGradientDescent="Stochastic gradient descent (SGD)"}(le||(le={}));var Fe,He,Ge={compiling:!1,evaluating:!1,fitOptions:{epochs:10,batchSize:32,initialEpoch:0},fitting:!1,preprocessing:!1,learningRate:.01,lossFunction:se.CategoricalCrossEntropy,lossHistory:[],metrics:[ce.CategoricalAccuracy],opening:!1,optimizationAlgorithm:le.StochasticGradientDescent,predicting:!1,saving:!1,trainingPercentage:.5,validationLossHistory:[],validationPercentage:.25},Ue=Object(ze.b)({name:"classifier",initialState:Ge,reducers:{compile:function(e,t){e.compiling=!0},fit:function(e,t){e.fitting=!0},open:function(e,t){e.opening=!0},preprocess:function(e,t){e.preprocessing=!0},updateBatchSize:function(e,t){var n=t.payload.batchSize;e.fitOptions.batchSize=n},updateCompiled:function(e,t){var n=t.payload.compiled;e.compiled=n,e.compiling=!1},updateEpochs:function(e,t){var n=t.payload.epochs;e.fitOptions.epochs=n},updateFitted:function(e,t){var n=t.payload,i=n.fitted,r=n.status;e.compiling=!1,e.fitted=i,e.history=r},updateLearningRate:function(e,t){var n=t.payload.learningRate;e.learningRate=n},updateLossFunction:function(e,t){var n=t.payload.lossFunction;e.lossFunction=n},updateLossHistory:function(e,t){var n=t.payload,i=n.batch,r=n.loss;e.lossHistory=[].concat(Object(Ne.a)(e.lossHistory),[{x:i,y:r}])},updateMetrics:function(e,t){var n=t.payload.metrics;e.metrics=n},updateOpened:function(e,t){var n=t.payload.opened;e.opened=n,e.opening=!1},updateOptimizationAlgorithm:function(e,t){var n=t.payload.optimizationAlgorithm;e.optimizationAlgorithm=n},updatePreprocessed:function(e,t){var n=t.payload.data;e.data=n,e.preprocessing=!1},updateTrainingPercentage:function(e,t){var n=t.payload.trainingPercentage;e.trainingPercentage=n},updateValidationLossHistory:function(e,t){var n=t.payload,i=n.batch,r=n.loss;e.validationLossHistory=[].concat(Object(Ne.a)(e.validationLossHistory),[{x:i,y:r}])},updateValidationPercentage:function(e,t){var n=t.payload.validationPercentage;e.validationPercentage=n}}}).actions;Ue.compile,Ue.fit,Ue.open,Ue.preprocess,Ue.updateBatchSize,Ue.updateCompiled,Ue.updateEpochs,Ue.updateFitted,Ue.updateLearningRate,Ue.updateLossFunction,Ue.updateMetrics,Ue.updateOpened,Ue.updateOptimizationAlgorithm,Ue.updatePreprocessed,Ue.updateTrainingPercentage,Ue.updateValidationLossHistory,Ue.updateValidationPercentage;!function(e){e[e.Addition=0]="Addition",e[e.Intersection=1]="Intersection",e[e.New=2]="New",e[e.Subtraction=3]="Subtraction"}(Fe||(Fe={})),function(e){e[e.In=0]="In",e[e.Out=1]="Out"}(He||(He={}));var Ze={brightness:0,contrast:0,exposure:0,hue:0,operation:ae.RectangularSelection,saturation:0,selectionMode:Fe.New,vibrance:0,zoomMode:He.In},_e=Object(ze.b)({initialState:Ze,name:"image-viewer",reducers:{deleteImageViewerImageInstance:function(e,t){e.image&&(e.image.instances=e.image.instances.filter((function(e){return e.id!==t.payload.id})))},setImageViewerBrightness:function(e,t){e.brightness=t.payload.brightness},setImageViewerContrast:function(e,t){e.contrast=t.payload.contrast},setImageViewerExposure:function(e,t){e.exposure=t.payload.exposure},setImageViewerHue:function(e,t){e.hue=t.payload.hue},setImageViewerImage:function(e,t){e.image=t.payload.image},setImageViewerImageInstances:function(e,t){e.image&&(e.image.instances=t.payload.instances)},setImageViewerOperation:function(e,t){e.operation=t.payload.operation},setImageViewerSaturation:function(e,t){e.saturation=t.payload.saturation},setImageViewerSelectionMode:function(e,t){e.selectionMode=t.payload.selectionMode},setImageViewerVibrance:function(e,t){e.vibrance=t.payload.vibrance},setImageViewerZoomMode:function(e,t){e.zoomMode=t.payload.zoomMode}}}),qe=_e.actions,Ye=(qe.deleteImageViewerImageInstance,qe.setImageViewerBrightness,qe.setImageViewerContrast,qe.setImageViewerExposure,qe.setImageViewerHue,qe.setImageViewerImage),Qe=(qe.setImageViewerImageInstances,qe.setImageViewerOperation,qe.setImageViewerSaturation,qe.setImageViewerSelectionMode,qe.setImageViewerVibrance,qe.setImageViewerZoomMode,n(21)),Xe=n(830),Je=Object(ze.b)({name:"project",initialState:{categories:[{color:"#AAAAAA",id:"00000000-0000-0000-0000-000000000000",name:"Unknown",visible:!0}],images:[],name:"Untitled project"},reducers:{createCategory:function(e,t){var n={color:t.payload.color,id:Object(Xe.a)().toString(),name:t.payload.name,visible:!0};e.categories.push(n)},createImage:function(e,t){var n={categoryId:"00000000-0000-0000-0000-000000000000",id:Object(Xe.a)(),instances:[],name:t.payload.name,shape:t.payload.shape,src:t.payload.src};e.images.push(n)},createProject:function(e,t){e.categories=t.payload.project.categories,e.name=t.payload.project.name,e.images=t.payload.project.images},deleteCategory:function(e,t){e.categories=Object(ue.a)(e.categories,(function(e){return e.id!==t.payload.id})),e.images=e.images.map((function(e){return e.categoryId===t.payload.id&&(e.categoryId="00000000-0000-0000-0000-000000000000"),e}))},deleteImages:function(e,t){e.images=Object(ue.a)(e.images,(function(e){return!t.payload.ids.includes(e.id)}))},updateCategory:function(e,t){var n=Object(ue.b)(e.categories,(function(e){return e.id===t.payload.id}));e.categories[n].name=t.payload.name,e.categories[n].color=t.payload.color},updateCategoryVisibility:function(e,t){var n=Object(ue.b)(e.categories,(function(e){return e.id===t.payload.id}));e.categories[n].visible=t.payload.visible},updateOtherCategoryVisibility:function(e,t){var n,i=Object(ue.a)(e.categories,(function(e){return e.id!==t.payload.id})),r=Object(Qe.a)(i);try{for(r.s();!(n=r.n()).done;){n.value.visible=!1}}catch(a){r.e(a)}finally{r.f()}},updateImageCategory:function(e,t){var n=Object(ue.b)(e.images,(function(e){return e.id===t.payload.id}));n>=0&&(e.images[n].categoryId=t.payload.categoryId)},updateImageCategories:function(e,t){t.payload.ids.forEach((function(n){var i=Object(ue.b)(e.images,(function(e){return e.id===n}));i>=0&&(e.images[i].categoryId=t.payload.categoryId)}))}}}),Ke=Je.actions,$e=Ke.createCategory,et=(Ke.createImage,Ke.createProject,Ke.deleteCategory),tt=Ke.updateCategory,nt=Ke.updateCategoryVisibility,it=(Ke.updateImageCategories,Ke.updateImageCategory,Ke.updateOtherCategoryVisibility),rt=n(12),at=function(e){var t=e.onClose,n=Object(me.b)();return Object(rt.jsxs)(Re.a,{component:"label",dense:!0,children:["Computer",Object(rt.jsx)("input",{accept:"image/*",hidden:!0,id:"open-image",onChange:function(e){if(t(),e.persist(),e.currentTarget.files){var i=e.currentTarget.files[0],r=new FileReader;r.onload=function(){var e=Object(We.a)(Be.a.mark((function e(t){var r,a;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target&&(r=t.target.result,(a=new Image).onload=function(){var e=i.name,t={r:a.naturalHeight,c:a.naturalWidth,channels:4};n(Ye({image:{id:"",instances:[],name:e,shape:t,src:r}}))},a.src=r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(i)}},type:"file"})]})},ot=n(812),st=n(772),ct=n(770),lt=n(814),dt=n.p+"static/media/malaria.5b73ad75.png",ut=function(e){var t=e.onClose,n=e.open,i=Object(me.b)(),r=[{name:"Microscopy",description:"Fusce lectus lorem, lacinia eu libero eu, pellentesque semper dui. Nunc bibendum est eget lacus fermentum ullamcorper.",data:dt},{name:"Microscopy (3D)",description:"Cras lobortis sapien eu tellus malesuada sodales. Vivamus placerat est eu mi ullamcorper, ut ultrices elit rhoncus. Aliquam vitae viverra nisi. Sed odio metus, finibus quis nisi a, vulputate varius justo.",data:dt}];return Object(rt.jsx)(ot.a,{open:n,children:Object(rt.jsx)(st.a,{component:"div",role:"list",children:r.map((function(e,n){return Object(rt.jsx)(ct.a,{button:!0,divider:!0,role:"listitem",onClick:function(){return function(e){var n=e.data,r=(e.description,e.name);t(),i(Ye({image:{id:"",instances:[],name:r,shape:{r:512,c:512,channels:4},src:n}}))}(e)},children:Object(rt.jsx)(lt.a,{primary:e.name,secondary:e.description})})}))})})},ht=function(e){var t=e.onClose,n=r.a.useState(!1),i=Object(c.a)(n,2),a=i[0],o=i[1];return Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsx)(Re.a,{dense:!0,onClick:function(){t(),o(!0)},children:"Example"}),Object(rt.jsx)(ut,{onClose:function(){o(!1)},open:a})]})},ft=function(e){var t=e.anchorEl,n=e.onClose;return Object(rt.jsxs)(Le.a,{anchorEl:t,keepMounted:!0,onClose:n,open:Boolean(t),children:[Object(rt.jsx)(at,{onClose:n}),Object(rt.jsx)(ht,{onClose:n})]})},pt=function(){var e=r.a.useState(null),t=Object(c.a)(e,2),n=t[0],i=t[1],a=De();return Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsx)(Pe.a,{title:"Open image",children:Object(rt.jsx)(Ie.a,{className:a.button,startIcon:Object(rt.jsx)(Ee.a,{}),onClick:function(e){i(e.currentTarget)},children:"Open image"})}),Object(rt.jsx)(ft,{anchorEl:n,onClose:function(){i(null)}})]})},gt=Object(Oe.a)((function(e){return{button:{margin:e.spacing(1),textTransform:"none"}}})),bt=n(458),jt=n(30),mt=function(){var e=gt(),t=Object(me.c)(pe),n=Object(me.c)(de);return Object(rt.jsx)(r.a.Fragment,{children:Object(rt.jsx)(Pe.a,{title:"Export annotations",children:Object(rt.jsx)(Ie.a,{className:e.button,startIcon:Object(rt.jsx)(Ee.a,{}),onClick:function(){if(t){var e={src:t.src,instances:t.instances.map((function(e){var t;return{boundingBox:e.boundingBox,category:null===(t=jt.find(n,(function(t){return t.id===e.categoryId})))||void 0===t?void 0:t.name,mask:e.mask}}))},i=[JSON.stringify(e)],r=new Blob(i,{type:"text/json;charset=utf-8"});Object(bt.saveAs)(r,"foo.json")}},children:"Export"})})})},vt=function(){var e=Me();return Object(rt.jsx)(ye.a,{className:e.appBar,color:"inherit",position:"fixed",children:Object(rt.jsxs)(we.a,{children:[Object(rt.jsxs)(ke.a,{className:e.logo,variant:"h6",children:[Object(rt.jsx)("strong",{children:"Piximi"})," Image viewer ",Object(rt.jsx)(Ce.a,{label:"Early access"})]}),Object(rt.jsx)("div",{className:e.grow}),Object(rt.jsx)(pt,{}),Object(rt.jsx)(mt,{})]})})},Ot=n(836),xt=Object(Oe.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(ve.a)({},e.mixins.toolbar),settingsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),yt=n(818),wt=n(459),kt=n.n(wt),Ct=n(460),Mt=n.n(Ct),It=n(819),St=function(e){var t=e.children,n=e.primary,i=r.a.useState(!0),a=Object(c.a)(i,2),o=a[0],s=a[1];return Object(rt.jsxs)(st.a,{dense:!0,children:[Object(rt.jsxs)(ct.a,{button:!0,dense:!0,onClick:function(){s(!o)},children:[Object(rt.jsx)(yt.a,{children:o?Object(rt.jsx)(kt.a,{}):Object(rt.jsx)(Mt.a,{})}),Object(rt.jsx)(lt.a,{primary:n})]}),Object(rt.jsx)(It.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(rt.jsx)(st.a,{component:"div",dense:!0,disablePadding:!0,children:t})})]})},Et=n(465),Lt=n.n(Et),Pt=n(821),Dt=n(822),At=n(829),Bt=n(824),Wt=n(820),Rt=n(776),zt=n(835),Vt=n(773),Tt=n(501),Nt=Object(Oe.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),Ft=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],Ht=function(e){var t=e.color,n=e.onColorChange,r=Nt(),a=i.useState(null),o=Object(c.a)(a,2),s=o[0],l=o[1],d=Boolean(s),u=function(){l(null)};return Object(rt.jsxs)(i.Fragment,{children:[Object(rt.jsx)(Rt.a,{onClick:function(e){l(e.currentTarget)},children:Object(rt.jsx)(zt.a,{style:{backgroundColor:"#F3F3F3"},children:Object(rt.jsx)(Wt.a,{style:{color:t}})})}),Object(rt.jsx)(Vt.a,{id:"color-menu",open:d,anchorEl:s,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(rt.jsx)("div",{className:r.colorPicker,children:Object(rt.jsx)(Tt.a,{colors:Ft,onChange:function(e){console.info(e),n(e),u()}})})})]})},Gt=n(823),Ut=Object(Oe.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),Zt=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],_t=function(e){var t=e.onClose,n=e.open,a=Object(me.b)(),o=r.a.useState(Object(ue.c)(Zt)),s=Object(c.a)(o,2),l=s[0],d=s[1],u=Object(i.useState)(""),h=Object(c.a)(u,2),f=h[0],p=h[1],g=Ut();return Object(rt.jsxs)(ot.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(rt.jsx)(Pt.a,{children:"Create category"}),Object(rt.jsx)(Dt.a,{className:g.createCategoryDialogContent,children:Object(rt.jsx)("div",{className:g.createCategoryDialogGrid,children:Object(rt.jsxs)(Gt.a,{container:!0,spacing:1,children:[Object(rt.jsx)(Gt.a,{item:!0,xs:2,className:g.createCategoryDialogItem,children:Object(rt.jsx)(Ht,{color:l,onColorChange:function(e){d(e.hex)}})}),Object(rt.jsx)(Gt.a,{item:!0,xs:10,children:Object(rt.jsx)(At.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){p(e.target.value)}})})]})})}),Object(rt.jsxs)(Bt.a,{children:[Object(rt.jsx)(Ie.a,{onClick:t,color:"primary",children:"Cancel"}),Object(rt.jsx)(Ie.a,{onClick:function(){a($e({name:f||"Unnamed",color:l})),t(),d(Object(ue.c)(Zt))},color:"primary",children:"Create"})]})]})},qt=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];return{onClose:Object(i.useCallback)((function(){r(!1)}),[]),onOpen:Object(i.useCallback)((function(){r(!0)}),[]),open:n}},Yt=function(){var e=Object(i.useState)(0),t=Object(c.a)(e,2),n=t[0],a=t[1];return r.a.useEffect((function(){var e=setTimeout((function(){a(n+1),n>32&&a(0)}),200);return function(){return clearTimeout(e)}})),n},Qt=function(){var e=qt(),t=e.onClose,n=e.onOpen,i=e.open;return Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsxs)(ct.a,{button:!0,onClick:n,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(Lt.a,{})}),Object(rt.jsx)(lt.a,{primary:"Create category"})]}),Object(rt.jsx)(_t,{onClose:t,open:i})]})},Xt=n(832),Jt=n(466),Kt=n.n(Jt),$t=n(467),en=n.n($t),tn=function(e){var t=e.category;return Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(Xt.a,{checked:t.visible,checkedIcon:Object(rt.jsx)(Kt.a,{style:{color:t.color}}),disableRipple:!0,edge:"start",icon:Object(rt.jsx)(en.a,{style:{color:t.color}}),tabIndex:-1})})},nn=n(826),rn=n(468),an=n.n(rn),on=n(775),sn=n(825),cn=function(e){var t=e.category,n=e.onCloseCategoryMenu,i=Object(me.b)();return Object(rt.jsx)(Re.a,{onClick:function(e){n(e);var r={id:t.id,visible:!t.visible};i(nt(r))},children:Object(rt.jsxs)(ke.a,{variant:"inherit",children:[t.visible?"Hide":"Show"," category"]})})},ln=function(e){var t=e.category,n=e.onCloseCategoryMenu,i=Object(me.b)();return Object(rt.jsx)(Re.a,{onClick:function(e){n(e),i(it({id:t.id}))},children:Object(rt.jsx)(ke.a,{variant:"inherit",children:"Hide other categories"})})},dn=function(e){var t=e.anchorElCategoryMenu,n=e.category,i=e.onCloseCategoryMenu,r=e.openCategoryMenu,a=e.onOpenDeleteCategoryDialog,o=e.onOpenEditCategoryDialog;return Object(rt.jsx)(Le.a,{anchorEl:t,anchorOrigin:{horizontal:"center",vertical:"bottom"},getContentAnchorEl:null,onClose:i,open:r,transformOrigin:{horizontal:"center",vertical:"top"},children:Object(rt.jsxs)(on.a,{dense:!0,variant:"menu",children:[Object(rt.jsx)(ln,{category:n,onCloseCategoryMenu:i}),Object(rt.jsx)(cn,{category:n,onCloseCategoryMenu:i}),"00000000-0000-0000-0000-000000000000"!==n.id&&Object(rt.jsxs)("div",{children:[Object(rt.jsx)(sn.a,{}),Object(rt.jsx)(Re.a,{onClick:function(e){o(),i(e)},children:Object(rt.jsx)(ke.a,{variant:"inherit",children:"Edit category"})}),Object(rt.jsx)(Re.a,{onClick:function(e){a(),i(e)},children:Object(rt.jsx)(ke.a,{variant:"inherit",children:"Delete category"})})]})]})})},un=function(e){var t=e.category,n=e.onClose,i=e.open,r=Object(me.b)();return Object(rt.jsxs)(ot.a,{fullWidth:!0,onClose:n,open:i,children:[Object(rt.jsxs)(Pt.a,{children:['Delete "',t.name,'" category?']}),Object(rt.jsxs)(Dt.a,{children:['Images categorized as "',t.name,'" will not be deleted.']}),Object(rt.jsxs)(Bt.a,{children:[Object(rt.jsx)(Ie.a,{onClick:n,color:"primary",children:"Cancel"}),Object(rt.jsx)(Ie.a,{onClick:function(){r(et({id:t.id})),n()},color:"primary",children:"Delete"})]})]})},hn=Object(Oe.a)((function(e){return{alert:{width:e.spacing(64)},appBar:{transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},appBarShift:{marginLeft:e.spacing(32),transition:e.transitions.create(["margin","width"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut}),width:"calc(100% - ".concat(e.spacing(32),"px)")},card:{},classifierSettingsDialogContent:{marginTop:e.spacing(8)},chip:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white"},colorPicker:{margin:"16px"},container:{paddingBottom:e.spacing(8),paddingTop:e.spacing(8)},createCategoryDialogContent:{paddingLeft:"0 !important"},createCategoryDialogGrid:{margin:e.spacing(1)},createCategoryDialogItem:{},drawer:{flexShrink:0,width:e.spacing(32)},drawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),drawerPaper:{width:e.spacing(32)},fileInput:{display:"none"},gridList:{transform:"translateZ(0)"},gridTileBar:{background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%)"},gridTileBarIconButton:{color:"white"},imageDialogAppBar:{zIndex:e.zIndex.drawer+1},imageDialogContent:{paddingBottom:e.spacing(12),paddingTop:e.spacing(12)},imageSelected:{border:"solid 2px blue",borderRadius:"3px"},imageUnselected:{border:"none"},main:{flexGrow:1,marginLeft:-e.spacing(32),padding:e.spacing(3),transition:e.transitions.create("margin",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})},mainShift:{marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},media:{},progress:{width:"100%"},settingsDialogAppBar:{},slider:{padding:e.spacing(3)},sliderInput:{width:42}}})),fn=function(e){var t=e.category,n=e.onCloseDialog,r=e.openDialog,a=Object(me.b)(),o=hn(),s=Object(i.useState)(t.color),l=Object(c.a)(s,2),d=l[0],u=l[1],h=Object(i.useState)(t.name),f=Object(c.a)(h,2),p=f[0],g=f[1];return Object(rt.jsxs)(ot.a,{fullWidth:!0,onClose:n,open:r,children:[Object(rt.jsx)(Pt.a,{children:"Edit category"}),Object(rt.jsx)(Dt.a,{children:Object(rt.jsx)("div",{children:Object(rt.jsxs)(Gt.a,{container:!0,spacing:1,children:[Object(rt.jsx)(Gt.a,{item:!0,xs:2,className:o.createCategoryDialogItem,children:Object(rt.jsx)(Ht,{color:d,onColorChange:function(e){u(e.hex)}})}),Object(rt.jsx)(Gt.a,{item:!0,xs:10,children:Object(rt.jsx)(At.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){g(e.target.value)},value:p})})]})})}),Object(rt.jsxs)(Bt.a,{children:[Object(rt.jsx)(Ie.a,{onClick:n,color:"primary",children:"Cancel"}),Object(rt.jsx)(Ie.a,{onClick:function(){a(tt({id:t.id,name:p,color:d})),n()},color:"primary",children:"Update"})]})]})},pn=function(e){var t=e.activeCategory,n=e.onCategoryClick,a=xt(),o=Object(me.c)(he),s=Object(me.c)(je),l=qt(),d=l.onClose,u=l.onOpen,h=l.open,f=qt(),p=f.onClose,g=f.onOpen,b=f.open,j=function(){var e=Object(i.useRef)(null),t=Object(i.useState)(!1),n=Object(c.a)(t,2),r=n[0],a=n[1],o=Object(i.useCallback)((function(t){e.current&&e.current.contains(t.target)||a(!1)}),[]),s=Object(i.useCallback)((function(){a(!0)}),[]);return{anchorEl:e,onClose:o,onOpen:s,open:r}}(),m=j.anchorEl,v=j.onClose,O=j.onOpen,x=j.open;return Object(rt.jsxs)(Ot.a,{anchor:"left",className:a.applicationDrawer,classes:{paper:a.applicationDrawerPaper},open:!0,variant:"persistent",children:[Object(rt.jsx)("div",{className:a.applicationDrawerHeader}),Object(rt.jsxs)(St,{primary:"Categories",children:[o.map((function(e){return Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsxs)(ct.a,{button:!0,dense:!0,id:e.id,onClick:function(t){return n(t,e)},selected:e.id===t.id,children:[Object(rt.jsx)(tn,{category:e}),Object(rt.jsx)(lt.a,{id:e.id,primary:e.name,primaryTypographyProps:{noWrap:!0}}),Object(rt.jsx)(nn.a,{children:Object(rt.jsx)(Rt.a,{edge:"end",onClick:O,children:Object(rt.jsx)(an.a,{})})})]},e.id),Object(rt.jsx)(dn,{anchorElCategoryMenu:m,category:e,onCloseCategoryMenu:v,onOpenCategoryMenu:O,onOpenDeleteCategoryDialog:u,onOpenEditCategoryDialog:g,openCategoryMenu:x}),Object(rt.jsx)(un,{category:e,onClose:d,open:h}),Object(rt.jsx)(fn,{category:e,onCloseDialog:p,openDialog:b})]})})),Object(rt.jsxs)(ct.a,{button:!0,dense:!0,id:s.id,onClick:function(e){return n(e,s)},selected:s.id===t.id,children:[Object(rt.jsx)(tn,{category:s}),Object(rt.jsx)(lt.a,{id:s.id,primary:s.name,primaryTypographyProps:{noWrap:!0}})]},s.id),Object(rt.jsx)(Qt,{})]})]})},gn=Object(Oe.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},root:{display:"flex"},content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},settings:{width:240,flexShrink:0},settingsPaper:{width:240,right:56},toolbar:Object(ve.a)({},e.mixins.toolbar),settingsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),operations:{flexShrink:0,whiteSpace:"nowrap",width:56},operationsPaper:{width:56},operationsToolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),logo:{flexGrow:1},applicationDrawer:{flexShrink:0,width:e.spacing(32)},applicationDrawerHeader:Object(ve.a)(Object(ve.a)({},e.mixins.toolbar),{},{alignItems:"center",display:"flex",paddingLeft:e.spacing(3)}),applicationDrawerPaper:{zIndex:0,width:e.spacing(32)}}})),bn=function(e){var t=e.description,n=e.name,i=e.settings,r=gn();return Object(rt.jsxs)(Ot.a,{anchor:"right",className:r.settings,classes:{paper:r.settingsPaper},variant:"permanent",children:[Object(rt.jsx)("div",{className:r.settingsToolbar}),Object(rt.jsx)(st.a,{children:Object(rt.jsx)(ct.a,{dense:!0,children:Object(rt.jsx)(lt.a,{primary:n,secondary:t})})}),Object(rt.jsx)(sn.a,{}),i]})},jn=n(831),mn=n(504);function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function On(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var xn=i.createElement("g",{fill:"none"},i.createElement("path",{d:"M0 0h24v24h-24Z"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 21h-11c-.552 0-1-.448-1-1v-11c0-.552.448-1 1-1h11c.552 0 1 .448 1 1v11c0 .552-.448 1-1 1Z"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 5v-1c0-.552-.448-1-1-1h-1"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 15v1c0 .552-.448 1-1 1h-1"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 5v-1c0-.552.448-1 1-1h1"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 3h2"}),i.createElement("path",{stroke:"#323232",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 11v-2 0 0Z"}));function yn(e,t){var n=e.title,r=e.titleId,a=On(e,["title","titleId"]);return i.createElement("svg",vn({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?i.createElement("title",{id:r},n):null,xn)}var wn=i.forwardRef(yn),kn=(n.p,function(){return Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsxs)(st.a,{children:[Object(rt.jsxs)(ct.a,{dense:!0,disabled:!0,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(jn.a,{disableRipple:!0,disabled:!0,edge:"start",tabIndex:-1})}),Object(rt.jsx)(lt.a,{primary:"New",secondary:"Create a new selection."})]}),Object(rt.jsxs)(ct.a,{dense:!0,disabled:!0,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(jn.a,{disableRipple:!0,disabled:!0,edge:"start",tabIndex:-1})}),Object(rt.jsx)(lt.a,{primary:"Addition",secondary:"Add area to the existing selection."})]}),Object(rt.jsxs)(ct.a,{dense:!0,disabled:!0,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(jn.a,{disableRipple:!0,disabled:!0,edge:"start",tabIndex:-1})}),Object(rt.jsx)(lt.a,{primary:"Addition",secondary:"Subtract area from the existing selection."})]}),Object(rt.jsxs)(ct.a,{dense:!0,disabled:!0,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(jn.a,{disableRipple:!0,disabled:!0,edge:"start",tabIndex:-1})}),Object(rt.jsx)(lt.a,{primary:"Intersection",secondary:"Constrain the boundary of the new selection to the existing selection."})]})]}),Object(rt.jsx)(sn.a,{}),Object(rt.jsx)(st.a,{children:Object(rt.jsxs)(ct.a,{button:!0,dense:!0,children:[Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(mn.a,{children:Object(rt.jsx)(wn,{})})}),Object(rt.jsx)(lt.a,{primary:"Invert selection"})]})})]})}),Cn=function(e){var t=e.children,n=e.name,i=e.onClick,r=e.selected;return Object(rt.jsx)(Pe.a,{"aria-label":n,title:n,children:Object(rt.jsx)(ct.a,{button:!0,onClick:i,selected:r,children:Object(rt.jsx)(yt.a,{children:Object(rt.jsx)(mn.a,{fontSize:"small",children:t})})})})},Mn=Object(Oe.a)((function(e){return{drawer:{flexShrink:0,whiteSpace:"nowrap",width:56},paper:{width:56},toolbar:Object(ve.a)({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}}));function In(){return(In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Sn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var En=i.createElement("g",{id:"Polygonal-selection",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"Group",transform:"translate(-0.000000, -0.000000)"},i.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(1.000000, 1.000000)",id:"Path",stroke:"#323232",strokeWidth:1.5},i.createElement("line",{x1:9.93933986,y1:21.0606603,x2:12.0606602,y2:18.9393399}),i.createElement("line",{x1:12.0606602,y1:.939339835,x2:9.93933986,y2:3.06066018}),i.createElement("line",{x1:21.0606602,y1:12.0606602,x2:18.9393399,y2:9.93933987}),i.createElement("line",{x1:.939339826,y1:9.93933987,x2:3.06066017,y2:12.0606602}),i.createElement("path",{d:"M20.0000001,6 L20.0000001,4 C20.0000001,2.89500001 19.1050001,2 18.0000001,2 L16.0000001,2",transform:"translate(18.000000, 4.000000) rotate(-315.000000) translate(-18.000000, -4.000000) "}),i.createElement("path",{d:"M2,16.0000001 L2,18.0000001 C2,19.1050001 2.89500001,20.0000001 4,20.0000001 L6,20.0000001",transform:"translate(4.000000, 18.000000) rotate(-315.000000) translate(-4.000000, -18.000000) "}),i.createElement("path",{d:"M6,2 L4,2 C2.89500001,2 2,2.89500001 2,4 L2,6",transform:"translate(4.000000, 4.000000) rotate(-315.000000) translate(-4.000000, -4.000000) "}),i.createElement("path",{d:"M16.0000001,20.0000001 L18.0000001,20.0000001 C19.1050001,20.0000001 20.0000001,19.1050001 20.0000001,18.0000001 L20.0000001,16.0000001",transform:"translate(18.000000, 18.000000) rotate(-315.000000) translate(-18.000000, -18.000000) "})),i.createElement("polygon",{id:"Path",points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"})));function Ln(e,t){var n=e.title,r=e.titleId,a=Sn(e,["title","titleId"]);return i.createElement("svg",In({width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"Polygonal selection"):n?i.createElement("title",{id:r},n):null,En)}var Pn=i.forwardRef(Ln),Dn=(n.p,function(){var e=Mn(),t=Object(me.b)(),n=Object(me.c)(ge);return Object(rt.jsxs)(Ot.a,{anchor:"right",className:e.drawer,classes:{paper:e.paper},variant:"permanent",children:[Object(rt.jsx)("div",{className:e.toolbar}),Object(rt.jsx)(sn.a,{}),Object(rt.jsxs)(st.a,{children:[Object(rt.jsx)(Cn,{name:"Color adjustment",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.ColorAdjustment}))},selected:n===ae.ColorAdjustment,children:Object(rt.jsx)(p,{})}),Object(rt.jsx)(sn.a,{}),Object(rt.jsx)(Cn,{name:"Rectangular selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.RectangularSelection}))},selected:n===ae.RectangularSelection,children:Object(rt.jsx)(oe,{})}),Object(rt.jsx)(Cn,{name:"Elliptical selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.EllipticalSelection}))},selected:n===ae.EllipticalSelection,children:Object(rt.jsx)(v,{})}),Object(rt.jsx)(Cn,{name:"Lasso selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.LassoSelection}))},selected:n===ae.LassoSelection,children:Object(rt.jsx)(k,{})}),Object(rt.jsx)(Cn,{name:"Polygonal selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.PolygonalSelection}))},selected:n===ae.PolygonalSelection,children:Object(rt.jsx)(Pn,{})}),Object(rt.jsx)(Cn,{name:"Magnetic selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.MagneticSelection}))},selected:n===ae.MagneticSelection,children:Object(rt.jsx)(U,{})}),Object(rt.jsx)(Cn,{name:"Color selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.ColorSelection}))},selected:n===ae.ColorSelection,children:Object(rt.jsx)(E,{})}),Object(rt.jsx)(Cn,{name:"Quick selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.QuickSelection}))},selected:n===ae.QuickSelection,children:Object(rt.jsx)(Q,{})}),Object(rt.jsx)(Cn,{name:"Object selection",onClick:function(){return t(_e.actions.setImageViewerOperation({operation:ae.ObjectSelection}))},selected:n===ae.ObjectSelection,children:Object(rt.jsx)(ee,{})}),Object(rt.jsx)(sn.a,{}),Object(rt.jsx)(Cn,{name:"Zoom",onClick:function(){t(_e.actions.setImageViewerOperation({operation:ae.Zoom}))},selected:n===ae.Zoom,children:Object(rt.jsx)(B,{})}),Object(rt.jsx)(Cn,{name:"Hand",onClick:function(){t(_e.actions.setImageViewerOperation({operation:ae.Hand}))},selected:n===ae.Hand,children:Object(rt.jsx)(T,{})})]})]})}),An=n(837),Bn=n(827),Wn=function(e){var t=e.handleRevert,n=Object(me.b)(),i=Object(me.c)(be);return Object(rt.jsxs)(st.a,{children:[Object(rt.jsxs)(ct.a,{dense:!0,children:[Object(rt.jsx)(lt.a,{primary:"Mode",secondary:"Select the zoom mode."}),Object(rt.jsxs)(An.a,{defaultValue:He.In,name:"zoom-mode",onChange:function(e){var t=parseInt(e.target.value);n(_e.actions.setImageViewerZoomMode({zoomMode:t}))},value:i,children:[Object(rt.jsx)(Bn.a,{control:Object(rt.jsx)(jn.a,{tabIndex:-1}),label:"Zoom In",value:He.In}),Object(rt.jsx)(Bn.a,{control:Object(rt.jsx)(jn.a,{tabIndex:-1}),label:"Zoom out",value:He.Out})]})]}),Object(rt.jsx)(ct.a,{children:Object(rt.jsx)(Ie.a,{onClick:t,variant:"contained",children:"Actual Size"})})]})},Rn=n(50),zn=n(343),Vn=n.n(zn),Tn=n(470),Nn=n.n(Tn),Fn=n(2),Hn=n(8),Gn=n(13),Un=n(14),Zn=n(117),_n=function(e,t,n){var i,r,a,o,s,c,l,d,u=[];for(a=Math.round(t[0]),o=Math.round(t[1]),s=Math.round(n[0])-a,c=Math.round(n[1])-o,l=Math.abs(c),Math.abs(s)>=Math.abs(c)&&(l=Math.abs(s)),s/=l,c/=l,i=a,r=o,d=1;d<=l;)e.setPixelXY(Math.round(i),Math.round(r),[255,255,255,255]),u.push([Math.round(i),Math.round(r)]),i+=s,r+=c,d+=1;return u},qn=function(e,t){return function(n,i,r){return(e*i+n)*t+(r=r||0)}};function Yn(e,t){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function Qn(e,t,n){var i=t[0],r=t[1],a=n[0]-i,o=n[1]-r;if(0!==a||0!==o){var s=((e[0]-i)*a+(e[1]-r)*o)/(a*a+o*o);s>1?(i=n[0],r=n[1]):s>0&&(i+=a*s,r+=o*s)}return(a=e[0]-i)*a+(o=e[1]-r)*o}function Xn(e,t,n,i,r){for(var a=i,o=0,s=t+1;s<n;s++){var c=Qn(e[s],e[t],e[n]);c>a&&(o=s,a=c)}a>i&&(o-t>1&&Xn(e,t,o,i,r),r.push(e[o]),n-o>1&&Xn(e,o,n,i,r))}function Jn(e,t){var n=e.length-1,i=[e[0]];return Xn(e,0,n,t,i),i.push(e[n]),i}function Kn(e,t,n){if(e.length<=2)return e;var i=void 0!==t?t*t:1;return e=Jn(e=n?e:function(e,t){for(var n=e[0],i=[n],r=[],a=1,o=e.length;a<o;a++)Yn(r=e[a],n)>t&&(i.push(r),n=r);return n!==r&&i.push(r),i}(e,i),i)}function $n(e,t){var n=Object(c.a)(t,2),i=Object(c.a)(n[0],2),r=i[0],a=i[1],o=Object(c.a)(n[1],2),s=o[0],l=o[1];return Math.floor((e-a)/(l-a)*(s-r)+r)}function ei(e){var t=Object(c.a)(e,2),n=Object(c.a)(t[0],2)[1],i=Object(c.a)(t[1],2)[1];return n<=i?n:i}function ti(e){var t=Object(c.a)(e,2),n=Object(c.a)(t[0],2)[1],i=Object(c.a)(t[1],2)[1];return n>i?n:i}function ni(e){var t=Object(c.a)(e,2),n=Object(c.a)(t[0],2),i=n[0],r=n[1],a=Object(c.a)(t[1],2),o=a[0];return r<=a[1]?i:o}function ii(e){var t=Object(c.a)(e,2),n=Object(c.a)(t[0],2),i=n[0],r=n[1],a=Object(c.a)(t[1],2),o=a[0];return r>a[1]?i:o}function ri(e,t,n){for(;t.length>0&&e===ei(t[t.length-1]);)n.push(t.pop())}function ai(e,t){for(var n=0;n<t.length;n++)if(e>=ti(t[n])){var i=t.pop();n<t.length&&i&&(t[n]=i,n--)}}function oi(e,t){var n,i=[],r=Object(Qe.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.push($n(e,a))}}catch(o){r.e(o)}finally{r.f()}return i}function si(e,t,n){for(var i=0;i<e.length;i+=2)ci(e[i],e[i+1],t,n)}function ci(e,t,n,i){for(var r=e;r<t;r++)i.setPixelXY(r,n,[255,255,255,255])}var li=function(){function e(t){Object(Fn.a)(this,e),this.image=void 0,this.manager=void 0,this.points=[],this.selected=!1,this.selecting=!1,this.selection=void 0,this.image=t,this.manager=t.getRoiManager()}return Object(Hn.a)(e,[{key:"mask",get:function(){var e=new Zn.a({width:this.image.width,height:this.image.height,bitDepth:8}),t=function(e,t){var n=[];return jt.filter(jt.zip(e.slice(0,e.length-1),e.slice(1)),(function(e){var t=Object(c.a)(e,2),n=t[0],i=t[1];return!jt.isEqual(n,i)})).forEach((function(e){var i=Object(c.a)(e,2),r=i[0],a=i[1],o=_n(t,r,a);n=jt.concat(n,o)})),n}(jt.chunk(this.points,2),e);return Kn(t,1,!0),function(e,t){if(!(e.length<3))for(var n=function(e){for(var t=[],n=e[e.length-1],i=0;i<e.length;i++){var r=e[i];n[1]!=r[1]&&t.push([n,r]),n=r}return t}(e).sort((function(e,t){return ei(t)-ei(e)})),i=[],r=ei(n[n.length-1]);n.length>0||i.length>0;)ri(r,n,i),ai(r,i),i.sort((function(e,t){var n=ni(e)-ni(t);return 0==n?ii(e)-ii(t):n})),si(oi(r,i),r,t),r++}(t,e),e.toDataURL()}},{key:"select",value:function(e){this.boundingBox&&this.contour&&this.mask&&(this.selection={boundingBox:this.boundingBox,categoryId:e.id,contour:this.contour,id:Xe.a(),mask:this.mask})}}]),e}(),di=n(308),ui=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).roiContour=void 0,e.roiMask=void 0,e.offset=void 0,e.overlayData="",e.points=[],e.initialPosition={x:0,y:0},e.tolerance=1,e.toleranceMap=void 0,e.fromFlood=function(e){var t=e.x,n=e.y,i=e.image,r=e.tolerance,a=new Zn.a(i.width,i.height,new Uint8ClampedArray(i.width*i.height*4),{alpha:1}).getRoiManager();return a.fromWaterShed({image:i,fillMaxValue:r,points:[[t,n]]}),a},e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.points){var e=jt.chunk(this.points,2);return[Math.round(jt.min(jt.map(e,jt.first))),Math.round(jt.min(jt.map(e,jt.last))),Math.round(jt.max(jt.map(e,jt.first))),Math.round(jt.max(jt.map(e,jt.last)))]}}},{key:"contour",get:function(){return this.points}},{key:"mask",get:function(){if(this.roiMask)return this.roiMask.toDataURL()}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.overlayData="",this.roiMask=void 0,this.roiContour=void 0,this.points=[],this.initialPosition={x:0,y:0},this.tolerance=1,this.toleranceMap=void 0}},{key:"onMouseDown",value:function(e){this.selected=!1,this.selecting=!0,this.tolerance=1,this.initialPosition=e,this.toleranceMap=function(e){for(var t=e.x,n=e.y,i=e.image,r=[],a=i.getPixelXY(t,n),o=0;o<i.data.length;o+=i.channels){var s=Math.abs(i.data[o]-a[0]),c=Math.abs(i.data[o+1]-a[1]),l=Math.abs(i.data[o+2]-a[2]);r.push(Math.floor((s+c+l)/3))}return new Zn.a(i.width,i.height,r,{alpha:0,components:1})}({x:Math.floor(e.x),y:Math.floor(e.y),image:this.image}),this.updateOverlay(e)}},{key:"onMouseMove",value:function(e){if(this.selecting){var t=Math.ceil(Math.hypot(e.x-this.initialPosition.x,e.y-this.initialPosition.y));t!==this.tolerance&&(this.tolerance=t,this.updateOverlay(this.initialPosition))}}},{key:"onMouseUp",value:function(e){if(this.roiContour&&this.roiMask){var t=jt.chunk(this.roiContour.getRGBAData(),4).map((function(e){return 255===e[0]?255:0})),n=Zn.a.createFrom(this.roiMask,{bitDepth:8,data:t}).getMatrix().data.map((function(e){return Array.from(e)})),i=Object(di.a)(n,1);i.sort((function(e,t){return t.length-e.length}));var r=this.roiMask.position[0],a=this.roiMask.position[1];this.points=jt.flatten(i[0].map((function(e){return[Math.round(e[0]+r),Math.round(e[1]+a)]}))),this.selected=!0,this.selecting=!1}}},{key:"colorOverlay",value:function(e,t,n){for(var i=[parseInt(n.slice(1,3),16),parseInt(n.slice(3,5),16),parseInt(n.slice(5,7),16),150],r=new Zn.a(e.width,e.height,new Uint8Array(e.width*e.height*4),{alpha:1}),a=0;a<e.width;a++)for(var o=0;o<e.height;o++)e.getBitXY(a,o)&&r.setPixelXY(a,o,i);return r.setPixelXY(t.x,t.y,[255,255,255,255]),r.toDataURL()}},{key:"updateOverlay",value:function(e){var t=this.fromFlood({x:Math.floor(e.x),y:Math.floor(e.y),image:this.toleranceMap,tolerance:this.tolerance});this.roiMask=t.getMasks()[0],this.roiContour=t.getMasks({kind:"contour"})[0],this.roiMask&&(this.offset={x:this.roiMask.position[0],y:this.roiMask.position[1]},this.overlayData=this.colorOverlay(this.roiMask,e,"red"))}}]),n}(li),hi=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).center=void 0,e.origin=void 0,e.radius=void 0,e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.center&&this.origin&&this.radius)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.center.x+this.radius.x),Math.round(this.center.y+this.radius.y)]}},{key:"contour",get:function(){return this.convertToPoints()}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.center=void 0,this.origin=void 0,this.radius=void 0}},{key:"onMouseDown",value:function(e){this.selected||(this.origin=e,this.selecting=!0)}},{key:"onMouseMove",value:function(e){this.selected||this.resize(e)}},{key:"onMouseUp",value:function(e){!this.selected&&this.selecting&&(this.resize(e),this.selected=!0,this.selecting=!1,this.points=this.convertToPoints())}},{key:"convertToPoints",value:function(){if(this.radius&&this.origin&&this.center){for(var e=Math.round(this.center.x),t=Math.round(this.center.y),n=[],i=[],r=t;r<t+this.radius.y;r+=.5){var a=this.radius.x*Math.sqrt(1-(r-t)*(r-t)/(this.radius.y*this.radius.y))+e;n.push(Math.round(a)),n.push(Math.round(r)),i.push([Math.round(a),Math.round(r)])}return jt.forEachRight(i,(function(t){var i=2*e-t[0];n.push(i),n.push(t[1])})),jt.forEach(i,(function(i){var r=2*e-i[0],a=2*t-i[1];n.push(r),n.push(a)})),jt.forEachRight(i,(function(e){var i=2*t-e[1];n.push(e[0]),n.push(i)})),n}}},{key:"resize",value:function(e){this.origin&&(this.center={x:(e.x-this.origin.x)/2+this.origin.x,y:(e.y-this.origin.y)/2+this.origin.y},this.radius={x:Math.abs((e.x-this.origin.x)/2),y:Math.abs((e.y-this.origin.y)/2)})}}]),n}(li),fi=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).anchor=void 0,e.buffer=[],e.origin=void 0,e.points=[],e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.points){var e=jt.chunk(this.points,2);return[Math.round(jt.min(jt.map(e,jt.first))),Math.round(jt.min(jt.map(e,jt.last))),Math.round(jt.max(jt.map(e,jt.first))),Math.round(jt.max(jt.map(e,jt.last)))]}}},{key:"contour",get:function(){return this.points}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(Ne.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer,this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(!this.selected&&this.selecting)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y]))):void(this.origin&&(this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y])))}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting){if(this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0&&(this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,this.buffer=[]),this.anchor)return this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y]),void(this.anchor=e);this.origin&&this.buffer&&this.buffer.length>0&&(this.anchor=e)}}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}}]),n}(li),pi=n(147),gi=n(480),bi=n.n(gi),ji=function(){function e(){Object(Fn.a)(this,e),this.data=[],this.length=0}return Object(Hn.a)(e,[{key:"compare",value:function(e,t){return e.fScore-t.fScore}},{key:"setNodeId",value:function(e,t){e.heapIndex=t}},{key:"push",value:function(e){this.data.push(e),this.setNodeId(e,this.length),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),e}}},{key:"updateItem",value:function(e){this._down(e),this._up(e)}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,i=this.setNodeId,r=t[e];e>0;){var a=e-1>>1,o=t[a];if(n(r,o)>=0)break;t[e]=o,i(o,e),e=a}t[e]=r,i(r,e)}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,i=this.length>>1,r=t[e],a=this.setNodeId;e<i;){var o=1+(e<<1),s=o+1,c=t[o];if(s<this.length&&n(t[s],c)<0&&(o=s,c=t[s]),n(c,r)>=0)break;t[e]=c,a(c,e),e=o}t[e]=r,a(r,e)}}]),e}(),mi=[];function vi(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(t){var r=yi(t.id,n),a=Object(c.a)(r,2),o=a[0],s=a[1],l=[o/i,s/i],d=[],u=e.fromId;if(null!==t.parentId){var h=e.getNode(t.parentId);if("undefined"!==typeof h&&h.fromId===u&&(d.push.apply(d,Object(Ne.a)(h.trace)),d.length>1)){var f=Oi(d[d.length-2],d[d.length-1]),p=Oi(d[d.length-1],l);f===p&&d.pop()}}return d.push(l),d}}var Oi=function(e,t){var n=t[0]-e[0],i=t[1]-e[1];if(0===n){if(i<0)return 0;if(i>0)return 4}if(0===i){if(n>0)return 2;if(n<0)return 6}if(n>0){if(i<0)return 1;if(i>0)return 3}if(n<0){if(i<0)return 7;if(i>0)return 5}console.log("Invalid direction, this should never appear so check the code",n,i)},xi=function(e,t,n,i){var r=[0],a=[0],o=[];e>0&&r.push(-1),e<i-1&&r.push(1),t>0&&a.push(-1),t<n-1&&a.push(1);for(var s=0,c=r;s<c.length;s++){var l,d=c[s],u=Object(Qe.a)(a);try{for(u.s();!(l=u.n()).done;){var h=l.value;0===d&&0===h||o.push({x:e+d,y:t+h})}}catch(f){u.e(f)}finally{u.f()}}return o},yi=function(e,t){var n=Math.floor(e/t);return[e-n*t,n]},wi=function(e,t,n){var i=bi()();i.fromId=-1,i.openSet=new ji;for(var r=0;r<t;r++)for(var a=0;a<n;a++){var o=qn(n,1)(a,r,0),s=255-e[o];i.addNode(o,s);var c,l=xi(a,r,t,n),d=Object(Qe.a)(l);try{for(d.s();!(c=d.n()).done;){var u=c.value,h=qn(n,1)(u.x,u.y,0);i.addLink(o,h)}}catch(f){d.e(f)}finally{d.f()}}return i},ki=function(e,t,n){return function(e,t,n){var i=function(e,n){var i=yi(e.id,t),r=Object(c.a)(i,2),a=r[0],o=r[1],s=yi(n.id,t),l=Object(c.a)(s,2),d=l[0],u=l[1];return a===d||o===u?1:1.41};return{find:function(r,a){var o=e.getNode(r);if(!o)return mi;var s,c=e.getNode(a);if(!c)return mi;var l=e.getNode(a);if(l&&l.fromId===r&&l.trace.length>0)return l.trace;for(e.fromId===r&&0!==e.openSet.length||(e.openSet=new ji,o.fScore=i(o,c),o.distanceToSource=0,e.openSet.push(o),o.open=1,e.fromId=r);e.openSet.length>0;){if((s=e.openSet.pop()).id===a)return s.trace=vi(e,s,t,n),s.fromId=r,s.trace;s.trace=vi(e,s,t,n),s.fromId=r,s.closed=!0,e.forEachLinkedNode(s.id,d,!0)}return mi;function d(t){if(t.fromId!==e.fromId&&(t.fromId=e.fromId,t.trace=[],t.parentId=null,t.closed=!1,t.open=0,t.distanceToSource=Number.POSITIVE_INFINITY,t.fScore=Number.POSITIVE_INFINITY,t.heapIndex=-1),!t.closed){0===t.open&&(e.openSet.push(t),t.open=1);var n=s.distanceToSource+s.data;n>=t.distanceToSource||(t.parentId=s.id,t.distanceToSource=n,t.fScore=n+i(t,c),e.openSet.updateItem(t.heapIndex))}}}}}(e,t,n)},Ci=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return Object(Fn.a)(this,n),(i=t.call(this,e)).anchor=void 0,i.buffer=[],i.factor=void 0,i.graph=void 0,i.origin=void 0,i.path=[],i.pathfinder=void 0,i.points=[],i.previous=[],i.response=void 0,i.factor=r,i.filter(),i.image&&i.response?(i.graph=wi(i.response.data,i.response.height,i.response.width),i.pathfinder=ki(i.graph,i.image.width*r,r),i):Object(pi.a)(i)}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.origin&&this.points){var e=jt.chunk(this.points,2);return[Math.round(jt.min(jt.map(e,jt.first))),Math.round(jt.min(jt.map(e,jt.last))),Math.round(jt.max(jt.map(e,jt.first))),Math.round(jt.max(jt.map(e,jt.last)))]}}},{key:"contour",get:function(){return this.points}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.graph=void 0,this.origin=void 0,this.points=[],this.previous=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(Ne.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(this.image&&this.pathfinder&&!this.selected&&this.selecting){if(this.anchor){var t=qn(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=qn(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);return this.path=jt.flatten(this.pathfinder.find(t,n)),this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(Ne.a)(this.previous),[this.anchor.x,this.anchor.y],Object(Ne.a)(this.path)))}if(this.origin){var i=qn(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),r=qn(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);this.path=jt.flatten(this.pathfinder.find(i,r)),this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y].concat(Object(Ne.a)(this.path))}}}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting){if(this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0)return this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,void(this.buffer=[]);if(this.anchor&&this.image){var t=qn(this.image.width*this.factor,1)(Math.floor(this.anchor.x*this.factor),Math.floor(this.anchor.y*this.factor),0),n=qn(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);if(!this.pathfinder)return;return this.path=jt.flatten(this.pathfinder.find(t,n)),this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(Ne.a)(this.previous),Object(Ne.a)(this.path)),this.previous=[].concat(Object(Ne.a)(this.previous),Object(Ne.a)(this.path)),void(this.anchor=e)}if(this.origin&&this.buffer.length>0){if(!this.image||!this.origin||!this.pathfinder)return;this.anchor=e;var i=qn(this.image.width*this.factor,1)(Math.floor(this.origin.x*this.factor),Math.floor(this.origin.y*this.factor),0),r=qn(this.image.width*this.factor,1)(Math.floor(e.x*this.factor),Math.floor(e.y*this.factor),0);return this.path=jt.flatten(this.pathfinder.find(i,r)),this.buffer=[this.origin.x,this.origin.y].concat(Object(Ne.a)(this.path)),void(this.previous=[].concat(Object(Ne.a)(this.previous),[this.origin.x,this.origin.y],Object(Ne.a)(this.path)))}}}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}},{key:"filter",value:function(){if(this.image){var e={factor:this.factor};this.response=this.image.resize(e).grey().sobelFilter()}}}]),n}(li),Mi=n(31),Ii=n(29),Si=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).origin=void 0,e.width=void 0,e.height=void 0,e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.origin&&this.width&&this.height)return[Math.round(this.origin.x),Math.round(this.origin.y),Math.round(this.origin.x+this.width),Math.round(this.origin.y+this.height)]}},{key:"contour",get:function(){return this.convertToPoints()}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.origin=void 0,this.width=void 0,this.height=void 0}},{key:"onMouseDown",value:function(e){this.selected||(this.origin=e,this.selecting=!0)}},{key:"onMouseMove",value:function(e){this.selected||this.resize(e)}},{key:"onMouseUp",value:function(e){!this.selected&&this.selecting&&(this.resize(e),this.points=this.convertToPoints(),this.selected=!0,this.selecting=!1)}},{key:"convertToPoints",value:function(){if(this.width&&this.height&&this.origin){for(var e=[],t=0;t<this.width;t++)e.push(Math.round(t+this.origin.x)),e.push(Math.round(this.origin.y));for(var n=0;n<this.height;n++)e.push(Math.round(this.origin.x+this.width-1)),e.push(Math.round(n+this.origin.y));for(var i=this.width-1;i>=0;i--)e.push(Math.round(i+this.origin.x)),e.push(Math.round(this.origin.y+this.height-1));for(var r=this.height-1;r>=0;r--)e.push(Math.round(this.origin.x)),e.push(Math.round(r+this.origin.y));return e}}},{key:"resize",value:function(e){this.origin&&(this.width=e.x-this.origin.x,this.height=e.y-this.origin.y)}}]),n}(li),Ei=n(165),Li=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).graph=void 0,e.prediction=void 0,e.points=[],e.roi=void 0,e.offset=void 0,e.output=void 0,e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.points){var e=jt.chunk(this.points,2);return[Math.round(jt.min(jt.map(e,jt.first))),Math.round(jt.min(jt.map(e,jt.last))),Math.round(jt.max(jt.map(e,jt.first))),Math.round(jt.max(jt.map(e,jt.last)))]}}},{key:"contour",get:function(){return this.points}},{key:"mask",get:function(){if(this.output)return this.output.toDataURL()}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.prediction=void 0,this.points=[],this.roi=void 0,this.offset=void 0,this.output=void 0,this.origin=void 0,this.width=void 0}},{key:"onMouseUp",value:function(e){Object(Mi.a)(Object(Ii.a)(n.prototype),"onMouseUp",this).call(this,e),this.predict()}},{key:"predict",value:function(){var e=Object(We.a)(Be.a.mark((function e(){var t,n,i,r,a=this;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.image&&this.origin&&this.width&&this.height){e.next=2;break}return e.abrupt("return");case 2:t=Math.floor(this.width),n=Math.floor(this.height),i=this.image.crop({x:this.origin.x,y:this.origin.y,width:t,height:n}),(r=Ei.e((function(){if(i){var e=Ei.a.fromPixels(i.getCanvas()),r=Ei.b.resizeBilinear(e,[128,128]).div(Ei.d(255)).expandDims(0);if(a.graph)return a.graph.predict(r).squeeze([0]).tile([1,1,3]).sub(.3).sign().relu().resizeBilinear([n,t]).pad([[a.origin.y,a.image.height-(a.origin.y+n)],[a.origin.x,a.image.width-(a.origin.x+t)],[0,0]])}})))&&Ei.a.toPixels(r).then(function(){var e=Object(We.a)(Be.a.mark((function e(t){var n,i,r,o,s;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.output=new Zn.a({width:a.image.width,height:a.image.height,data:t}),n=a.output.grey().getMatrix().data,i=n.map((function(e){return Array.from(e)})),(r=Object(di.a)(i,1)).sort((function(e,t){return e.length<t.length?-1:e.length>t.length?1:0})),o=r[r.length-1],s=jt.flatten(o),a.points=s.map((function(e){return Math.round(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"compile",value:function(){var e=Object(We.a)(Be.a.mark((function e(t){var i,r;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new n(t),"https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json",e.next=4,Ei.c("https://raw.githubusercontent.com/zaidalyafeai/HostedModels/master/unet-128/model.json");case 4:return i.graph=e.sent,r=Ei.f.adam(),i.graph.compile({optimizer:r,loss:"categoricalCrossentropy",metrics:["accuracy"]}),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Si),Pi=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).anchor=void 0,e.buffer=[],e.origin=void 0,e.points=[],e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){if(this.points){var e=jt.chunk(this.points,2);return[Math.round(jt.min(jt.map(e,jt.first))),Math.round(jt.min(jt.map(e,jt.last))),Math.round(jt.max(jt.map(e,jt.first))),Math.round(jt.max(jt.map(e,jt.last)))]}}},{key:"contour",get:function(){return this.points}},{key:"deselect",value:function(){this.selected=!1,this.selecting=!1,this.selection=void 0,this.anchor=void 0,this.buffer=[],this.origin=void 0,this.points=[]}},{key:"onMouseDown",value:function(e){this.selected||(this.connected(e)&&(this.origin&&(this.buffer=[].concat(Object(Ne.a)(this.buffer),[this.origin.x,this.origin.y])),this.selected=!0,this.selecting=!1,this.points=this.buffer,this.anchor=void 0,this.origin=void 0),this.buffer&&0===this.buffer.length&&(this.selecting=!0,this.origin||(this.origin=e)))}},{key:"onMouseMove",value:function(e){if(!this.selected&&this.selecting)return this.anchor?(this.buffer[this.buffer.length-2]===this.anchor.x&&this.buffer[this.buffer.length-1]===this.anchor.y||(this.buffer.pop(),this.buffer.pop()),void(this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y]))):void(this.origin&&(this.buffer.pop(),this.buffer.pop(),this.buffer=[this.origin.x,this.origin.y,e.x,e.y]))}},{key:"onMouseUp",value:function(e){if(!this.selected&&this.selecting)return this.connected(e)&&this.origin&&this.buffer&&this.buffer.length>0?(this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y,this.origin.x,this.origin.y]),this.selected=!0,this.selecting=!1,this.points=this.buffer,this.buffer=[],this.anchor=void 0,this.origin=void 0,void console.log(this.anchor,this.origin)):this.anchor?(this.buffer.pop(),this.buffer.pop(),this.buffer=[].concat(Object(Ne.a)(this.buffer),[e.x,e.y]),void(this.anchor=e)):void(this.origin&&this.buffer.length>0&&(this.anchor=e))}},{key:"connected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(this.origin){var n=Math.hypot(e.x-this.origin.x,e.y-this.origin.y);return n<t}}}]),n}(li),Di=function(e){Object(Gn.a)(n,e);var t=Object(Un.a)(n);function n(){var e;Object(Fn.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._superpixels={},e}return Object(Hn.a)(n,[{key:"boundingBox",get:function(){}},{key:"contour",get:function(){return[]}},{key:"mask",get:function(){}},{key:"superpixels",get:function(){if(this._superpixels)return this._superpixels;for(var e,t=this.image.getRGBAData(),n=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,r=arguments.length>4?arguments[4]:void 0;r||(r=i*i/4);for(var a=t,o=n,s=parseInt(String(a/i),10),c=parseInt(String(o/i),10),l=parseInt(String(s*c),10),d=parseInt(String(a*o),10),u=new Array(d),h=new Float32Array(5*l),f=new Float32Array(5*l),p=new Float32Array(2*l),g=new Float32Array(d),b=new Float32Array(d),j=new Float32Array(d),m=new Float32Array(3*a*o),v=2.2,O=0;O<a*o;O++){var x=Math.pow(.00392156862*parseFloat(String(e[4*O])),v),y=Math.pow(.00392156862*parseFloat(String(e[4*O+1])),v),w=Math.pow(.00392156862*parseFloat(String(e[4*O+2])),v);m[O]=.488718*x+.31068*y+.200602*w,m[O+a*o]=.176204*x+.812985*y+.0108109*w,m[O+2*a*o]=.0102048*y+.989795*w}for(var k=1/3,C=1/3,M=1,I=1/(k/C),S=1/M,E=1/((1-k-C)/C*M),L=new Float32Array(3*a*o),P=0;P<a*o;P++){var D=m[P]*I>.00856?Math.pow(m[P]*I,.33333333):7.78706891568*m[P]*I+.1379310336,A=m[a*o+P]*S>.00856?Math.pow(m[a*o+P]*S,.33333333):7.78706891568*m[a*o+P]*S+.1379310336,B=m[2*a*o+P]*E>.00856?Math.pow(m[2*a*o+P]*E,.33333333):7.78706891568*m[2*a*o+P]*E+.1379310336;L[P]=116*A-16,L[P+a*o]=500*(D-A),L[P+2*a*o]=200*(A-B)}for(var W=new Float32Array(d),R=0;R<3;R++)for(var z=1;z<o-1;z++)for(var V=1;V<a-1;V++){var T=L[R*a*o+z*a+V-1],N=L[R*a*o+z*a+V+1],F=L[R*a*o+(z+1)*a+V],H=L[R*a*o+(z-1)*a+V];W[z*a+V]=W[z*a+V]+(T-N)*(T-N)+(F-H)*(F-H)}for(var G=0,U=0,Z=0;Z<c;Z++)for(var _=0;_<s;_++){var q=0,Y=0,Q=1/0,X=parseInt(String(Math.round(i*(_+.5))),10),J=parseInt(String(Math.round(i*(Z+.5))),10);X=Math.max(Math.min(X,a-1),0),J=Math.max(Math.min(J,o-1),0);for(var K=Math.max(0,J-1);K<=Math.min(o-1,J+1);K++)for(var $=Math.max(0,X-1);$<=Math.min(a-1,X+1);$++){var ee=W[K*a+$];ee<Q&&(Q=ee,q=$,Y=K)}h[G++]=parseFloat(String(q)),h[G++]=parseFloat(String(Y)),h[G++]=L[Y*a+q],h[G++]=L[a*o+Y*a+q],h[G++]=L[2*a*o+Y*a+q],p[U++]=100,p[U++]=i*i}for(var te=10,ne=new Int32Array(d),ie=0;ie<te;++ie){for(var re=0;re<j.length;++re)j[re]=1/0;for(var ae=0;ae<s*c;++ae)for(var oe=Math.round(h[5*ae]),se=Math.round(h[5*ae+1]),ce=Math.max(0,se-i);ce<Math.min(o,se+i);++ce)for(var le=Math.max(0,oe-i);le<Math.min(a,oe+i);++le){var de=(le-oe)*(le-oe)+(ce-se)*(ce-se),ue=L[ce*a+le]-h[5*ae+2],he=L[a*o+ce*a+le]-h[5*ae+3],fe=L[2*a*o+ce*a+le]-h[5*ae+4],pe=ue*ue+he*he+fe*fe,ge=Math.sqrt(pe/p[2*ae]+de/p[2*ae+1]);ge<j[ce*a+le]&&(j[ce*a+le]=ge,ne[ce*a+le]=ae)}for(var be=0;be<o;++be)for(var je=0;je<a;++je)p[2*ne[be*a+je]]<g[be*a+je]&&(p[2*ne[be*a+je]]=g[be*a+je]),p[2*ne[be*a+je]+1]<b[be*a+je]&&(p[2*ne[be*a+je]+1]=b[be*a+je]);for(var me=new Float32Array(p.length/2),ve=new Float32Array(p.length/2),Oe=0;Oe<ne.length;Oe++){var xe=ne[Oe];me[xe]<g[xe]&&(me[xe]=g[xe],p[2*xe]=g[xe]),ve[xe]<b[xe]&&(ve[xe]=b[xe],p[2*xe+1]=b[xe])}for(var ye=0;ye<u.length;++ye)u[ye]=0;for(var we=0;we<f.length;++we)f[we]=0;for(var ke=void 0,Ce=0;Ce<o;Ce++)for(var Me=0;Me<a;Me++)u[ke=ne[Me+Ce*a]]++,f[5*ke]+=Me,f[5*ke+1]+=Ce,f[5*ke+2]+=L[Ce*a+Me],f[5*ke+3]+=L[a*o+Ce*a+Me],f[5*ke+4]+=L[2*a*o+Ce*a+Me];for(ke=0;ke<l;ke++){var Ie=1/Math.max(u[ke],1e-8);f[5*ke]=f[5*ke]*Ie,f[5*ke+1]=f[5*ke+1]*Ie,f[5*ke+2]=f[5*ke+2]*Ie,f[5*ke+3]=f[5*ke+3]*Ie,f[5*ke+4]=f[5*ke+4]*Ie}for(var Se=0,Ee=0;Ee<h.length;++Ee){var Le=h[Ee]-f[Ee];Se+=Math.sqrt(Le*Le)}if(Se<1e-5)break;for(var Pe=0;Pe<h.length;++Pe)h[Pe]=f[Pe]}for(var De,Ae,Be,We,Re,ze,Ve,Te,Ne,Fe=new Int32Array(d),He=new Int32Array(d),Ge=[1,-1,0,0],Ue=[0,0,1,-1],Ze=0;Ze<d;Ze++)if(!Fe[Ze]){Ae=ne[Ze],We=0,De=0,He[De++]=Ze,Be=Ae+1,Fe[Ze]=Ae+1,Re=Ze%a,ze=Math.floor(Ze/a);for(var _e=0;_e<4;_e++)Ne=(Ve=Re+Ge[_e])+(Te=ze+Ue[_e])*a,0<=Ve&&Ve<a&&0<=Te&&Te<o&&Fe[Ne]&&(Be=Fe[Ne]);for(;We<De;){var qe=He[We++];Re=qe%a,ze=Math.floor(qe/a);for(var Ye=0;Ye<4;++Ye)Ne=(Ve=Re+Ge[Ye])+(Te=ze+Ue[Ye])*a,0<=Ve&&Ve<a&&0<=Te&&Te<o&&0===Fe[Ne]&&ne[Ne]===Ae&&(Fe[Ne]=Ae+1,He[De++]=Ne)}if(De<r)for(;De>0;)Fe[He[--De]]=Be}for(var Qe=0;Qe<d;++Qe)--Fe[Qe];for(var Xe=0;Xe<d;++Xe)ne[Xe]=Fe[Xe];return{image:e,segmentation:ne}}(t,this.image.width,this.image.height),i=(n.image,n.segmentation),r={},a=0;a<i.length;a+=1){var o=i[a];r.hasOwnProperty(o)||(r[o]={count:0,mask:{background:0,foreground:0},mp:[0,0,0],role:{background:!1,background_and_foreground:!1,foreground:!1,unknown:!1}}),r[o].count+=1,r[o].mp[0]+=t[4*a],r[o].mp[1]+=t[4*a+1],r[o].mp[2]+=t[4*a+2]}for(var s in r)r[s].mp[0]/=r[s].count,r[s].mp[1]/=r[s].count,r[s].mp[2]/=r[s].count;Object.values(r).forEach((function(e){e.mask.foreground>0&&0===e.mask.background?e.role.foreground=!0:0===e.mask.foreground&&e.mask.background>0?e.role.background=!0:e.mask.foreground>0&&e.mask.background>0?e.role.background_and_foreground=!0:e.role.unknown=!0}));for(var c=0;c<i.length;c+=1)r[i[c]].role.foreground?(t[4*c]=t[4*c],t[4*c+1]=t[4*c+1],t[4*c+2]=t[4*c+2],t[4*c+3]=255):t[4*c+3]=0;for(var l=0;l<i.length;++l)e=r[i[l]],t[4*l+3]=255,i[l]===i[l+1]?(t[4*l]=e.mp[0],t[4*l+1]=e.mp[1],t[4*l+2]=e.mp[2]):(t[4*l]=0,t[4*l+1]=0,t[4*l+2]=0);this._superpixels=r}},{key:"deselect",value:function(){}},{key:"onMouseDown",value:function(e){}},{key:"onMouseMove",value:function(e){}},{key:"onMouseUp",value:function(e){}}]),n}(li),Ai=Object(Oe.a)((function(e){return{content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),width:"100%"},stage:{margin:"8px"},toolbar:Object(ve.a)({},e.mixins.toolbar),parent:{cursor:"crosshair",width:"calc(100% - ".concat(240,"px - ").concat(e.spacing(3),"px)")}}})),Bi=function(e){var t=e.operator,n=Yt();return t.center&&t.radius?Object(rt.jsxs)(Rn.c,{children:[Object(rt.jsx)(Rn.b,{dash:[4,2],dashOffset:-n,radiusX:t.radius.x,radiusY:t.radius.y,stroke:"black",strokeWidth:1,x:t.center.x,y:t.center.y}),Object(rt.jsx)(Rn.b,{dash:[4,2],dashOffset:-n,radiusX:t.radius.x,radiusY:t.radius.y,stroke:"white",strokeWidth:1,x:t.center.x,y:t.center.y})]}):null},Wi=function(e){var t=e.operator,n=Yt();return Object(rt.jsxs)(Rn.c,{children:[t.origin&&Object(rt.jsx)(Rn.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(rt.jsx)(Rn.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(rt.jsx)(Rn.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(rt.jsx)(Rn.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]})},Ri=function(e){var t=e.operator,n=Yt();return t.origin?Object(rt.jsxs)(Rn.c,{children:[Object(rt.jsx)(Rn.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(rt.jsx)(Rn.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(rt.jsx)(Rn.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(rt.jsx)(Rn.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]}):null},zi=function(e){var t=e.operator,n=Yt();return t.origin&&t.width&&t.height?Object(rt.jsxs)(Rn.c,{children:[Object(rt.jsx)(Rn.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"black",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(rt.jsx)(Rn.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"white",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(rt.jsx)(Rn.f,{stroke:"white",points:t.points,strokeWidth:1})]}):null},Vi=function(e){var t=e.operator,n=Yt();return Object(rt.jsxs)(Rn.c,{children:[t.origin&&Object(rt.jsx)(Rn.a,{fill:"white",radius:3,stroke:"black",strokeWidth:1,x:t.origin.x,y:t.origin.y}),t.anchor&&Object(rt.jsx)(Rn.a,{fill:"black",radius:3,stroke:"white",strokeWidth:1,x:t.anchor.x,y:t.anchor.y}),Object(rt.jsx)(Rn.f,{points:t.buffer,stroke:"black",strokeWidth:1}),Object(rt.jsx)(Rn.f,{dash:[4,2],dashOffset:-n,stroke:"white",points:t.buffer,strokeWidth:1})]})},Ti=function(e){var t=e.operator,n=Yt();return t.origin&&t.width&&t.height?Object(rt.jsxs)(Rn.c,{children:[Object(rt.jsx)(Rn.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"black",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y}),Object(rt.jsx)(Rn.g,{dash:[4,2],dashOffset:-n,height:t.height,stroke:"white",strokeWidth:1,width:t.width,x:t.origin.x,y:t.origin.y})]}):null},Ni=function(e){var t=e.operator,n=Object(i.useState)(),r=Object(c.a)(n,2),a=r[0],o=r[1];return Object(i.useEffect)((function(){var e=new Image;e.src=t.overlayData,o(e)}),[t.overlayData]),t.overlayData&&t.offset?Object(rt.jsx)(Rn.c,{children:Object(rt.jsx)(Rn.d,{image:a,x:t.offset.x,y:t.offset.y})}):null},Fi=function(e){var t=e.operation,n=e.operator;if(!t||!n)return Object(rt.jsx)(r.a.Fragment,{});switch(t){case ae.ColorSelection:return Object(rt.jsx)(Ni,{operator:n});case ae.EllipticalSelection:return Object(rt.jsx)(Bi,{operator:n});case ae.LassoSelection:return Object(rt.jsx)(Wi,{operator:n});case ae.MagneticSelection:return Object(rt.jsx)(Ri,{operator:n});case ae.ObjectSelection:return Object(rt.jsx)(zi,{operator:n});case ae.PolygonalSelection:return Object(rt.jsx)(Vi,{operator:n});case ae.RectangularSelection:return Object(rt.jsx)(Ti,{operator:n});default:return Object(rt.jsx)(r.a.Fragment,{})}};function Hi(e){var t=Object(i.useState)(!1),n=Object(c.a)(t,2),r=n[0],a=n[1];function o(t){t.key===e&&a(!0)}var s=function(t){t.key===e&&a(!1)};return Object(i.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}}),[]),r}function Gi(e,t){var n=parseInt(e.slice(1),16),i=t<0?0:255,r=t<0?-1*t:t,a=n>>16,o=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((i-a)*r)+a)+256*(Math.round((i-o)*r)+o)+(Math.round((i-s)*r)+s)).toString(16).slice(1)}var Ui=function(e){var t=e.category,n=e.src,a=Nn()(n,"Anonymous"),o=Object(c.a)(a,1)[0],s=Object(i.useRef)(null),l=Object(i.useRef)(null),d=Object(i.useRef)(null),u=Object(i.useRef)(null),h=Object(i.useRef)(null),f=Ai(),p=Object(me.c)(ge),g=Object(i.useState)(),b=Object(c.a)(g,2),j=b[0],m=b[1],v=Object(i.useState)(),O=Object(c.a)(v,2),x=O[0],y=O[1],w=Object(i.useState)(!1),k=Object(c.a)(w,2),C=k[0],M=k[1],I=Object(i.useReducer)((function(e){return e+1}),0),S=Object(c.a)(I,2)[1],E=Object(me.b)(),L=Object(me.c)(fe),P=Hi("Enter"),D=Hi("Escape"),A=Hi("Delete"),B=Hi("Backspace"),W=Yt();Object(i.useEffect)((function(){Zn.a.load(n).then((function(e){switch(p){case ae.ColorSelection:return void m(new ui(e));case ae.EllipticalSelection:return void m(new hi(e));case ae.LassoSelection:return void m(new fi(e));case ae.MagneticSelection:return void m(new Ci(e));case ae.ObjectSelection:return void Li.compile(e).then((function(e){m(e)}));case ae.PolygonalSelection:return void m(new Pi(e));case ae.QuickSelection:return void m(new Di(e));case ae.RectangularSelection:return void m(new Si(e))}}))}),[p,n]),Object(i.useEffect)((function(){j&&j.selected&&M(j.selected)})),Object(i.useEffect)((function(){j&&j.contour&&(h.current=new Vn.a.Line({points:j.contour}))})),Object(i.useEffect)((function(){if(C&&d&&d.current&&h&&h.current){d.current.nodes([h.current]);var e=d.current.getLayer();e&&e.batchDraw()}}),[C]);var R=Object(i.useMemo)((function(){var e=jt.throttle((function(){if(j&&l&&l.current){var e=l.current.getPointerPosition();e&&(j.onMouseDown(e),S())}}),10);return function(){return e()}}),[j]),z=Object(i.useMemo)((function(){var e=jt.throttle((function(){if(j&&l&&l.current){var e=l.current.getPointerPosition();e&&(j.onMouseMove(e),S())}}),5);return function(){return e()}}),[j]),V=Object(i.useMemo)((function(){var e=jt.throttle((function(){if(j&&l&&l.current){var e=l.current.getPointerPosition();e&&(j.onMouseUp(e),S())}}),10);return function(){return e()}}),[j]);return Object(i.useEffect)((function(){var e;C&&P&&L&&j&&(j.select(t),j.selection&&(E(_e.actions.setImageViewerImageInstances({instances:[].concat(Object(Ne.a)(L),[j.selection])})),j.deselect(),null===(e=d.current)||void 0===e||e.detach(),M(!1)))}),[P]),Object(i.useEffect)((function(){var e;C&&D&&j&&(j.deselect(),null===(e=d.current)||void 0===e||e.detach())}),[D]),Object(i.useEffect)((function(){var e;x&&((B||D||A)&&(E(_e.actions.deleteImageViewerImageInstance({id:x})),null===(e=d.current)||void 0===e||e.detach()))}),[B,A,D]),Object(rt.jsx)(Rn.h,{className:f.stage,globalCompositeOperation:"destination-over",height:512,ref:l,width:512,children:Object(rt.jsxs)(Rn.e,{onMouseDown:R,onMouseMove:z,onMouseUp:V,children:[Object(rt.jsx)(Rn.d,{ref:s,image:o}),!C&&Object(rt.jsx)(Fi,{operation:p,operator:j}),C&&j&&j.contour&&Object(rt.jsxs)(r.a.Fragment,{children:[Object(rt.jsx)(Rn.f,{dash:[4,2],dashOffset:-W,points:j.contour,ref:h,stroke:"black",strokeWidth:1}),Object(rt.jsx)(Rn.f,{dash:[4,2],dashOffset:-W,points:j.contour,stroke:"white",strokeWidth:1})]}),L&&L.map((function(e){return Object(rt.jsx)(Rn.f,{closed:!0,points:e.contour,fill:t.color,onClick:function(t){return function(e,t){var n;j&&(j.selecting||(j.deselect(),y(t.id),u.current=e.target,null===(n=d.current)||void 0===n||n.nodes([u.current])))}(t,e)},opacity:.5,ref:u,stroke:Gi(t.color,50),strokeWidth:1},e.id)})),Object(rt.jsx)(Rn.i,{ref:d})]})})},Zi=function(e){var t=e.category,n=Object(me.c)(pe),i=Ai();return Object(rt.jsxs)("main",{className:i.content,children:[Object(rt.jsx)("div",{className:i.toolbar}),Object(rt.jsx)("div",{className:i.parent,children:Object(rt.jsx)(Ui,{category:t,src:n.src})})]})},_i=function(e){var t=Object(i.useState)(!1),n=Object(c.a)(t,2),a=n[0],o=n[1],s=[{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(p,{}),method:ae.ColorAdjustment,name:"Color adjustment",settings:Object(rt.jsx)(r.a.Fragment,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(oe,{}),method:ae.RectangularSelection,name:"Rectangular selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(v,{}),method:ae.EllipticalSelection,name:"Elliptical selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(v,{}),method:ae.PolygonalSelection,name:"Polygonal selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(k,{}),method:ae.LassoSelection,name:"Lasso selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(U,{}),method:ae.MagneticSelection,name:"Magnetic selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(E,{}),method:ae.ColorSelection,name:"Color selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(Q,{}),method:ae.QuickSelection,name:"Quick selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(ee,{}),method:ae.ObjectSelection,name:"Object selection",settings:Object(rt.jsx)(kn,{})},{description:"Nam a facilisis velit, sit amet interdum ante. In sodales.",icon:Object(rt.jsx)(T,{}),method:ae.Hand,name:"Hand",settings:Object(rt.jsx)(r.a.Fragment,{})},{description:"Description of zoom here.",icon:Object(rt.jsx)(B,{}),method:ae.Zoom,name:"Zoom",settings:Object(rt.jsx)(Wn,{handleRevert:function(){o(!a)}})}],d=Object(me.b)();Object(i.useEffect)((function(){e.image&&d(_e.actions.setImageViewerImage({image:e.image}))}),[d,e.image]);var u=Object(me.c)(pe),h=Object(me.c)(ge),f=xe(),g=Object(me.c)(je),b=Object(i.useState)(g),j=Object(c.a)(b,2),m=j[0],O=j[1];return Object(rt.jsxs)("div",{className:f.root,children:[Object(rt.jsx)(l.a,{}),Object(rt.jsx)(vt,{}),Object(rt.jsx)(pn,{activeCategory:m,onCategoryClick:function(e,t){O(t)}}),u&&Object(rt.jsx)(Zi,{category:m}),Object(rt.jsx)(bn,{description:s[s.findIndex((function(e){return e.method===h}))].description,name:s[s.findIndex((function(e){return e.method===h}))].name,settings:s[s.findIndex((function(e){return e.method===h}))].settings}),Object(rt.jsx)(Dn,{})]})},qi=n(105),Yi={imageViewer:_e.reducer,project:Je.reducer},Qi=Object(qi.c)(Yi),Xi=n(500),Ji={devTools:!0,enhancers:[],middleware:[n.n(Xi).a],preloadedState:{},reducer:Qi},Ki=Object(ze.a)(Ji);o.a.render(Object(rt.jsx)(r.a.StrictMode,{children:Object(rt.jsx)(me.a,{store:Ki,children:Object(rt.jsx)(_i,{})})}),document.getElementById("root")),s()}},[[769,1,2]]]);
//# sourceMappingURL=main.1ee712e3.chunk.js.map